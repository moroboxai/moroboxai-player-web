(function(Ce,rt){typeof exports=="object"&&typeof module!="undefined"?rt(exports):typeof define=="function"&&define.amd?define(["exports"],rt):(Ce=typeof globalThis!="undefined"?globalThis:Ce||self,rt(Ce.MoroboxAIPlayer={}))})(this,function(Ce){"use strict";class rt{constructor(){this._context={}}get id(){return 0}get isBound(){return this._context.inputs!==void 0}get label(){return this._context.LABEL!==void 0?this._context.LABEL:"Agent"}loadAgent(e){return new Promise(t=>{function s(r){return"javascript"}const i=(r,a)=>{const o={};new Function("exports",`${a} 
                if (typeof LABEL !== "undefined") {
                    exports.LABEL = LABEL;
                }
                
                if (typeof saveState !== "undefined") {
                    exports.saveState = saveState;
                }
                
                if (typeof loadState !== "undefined") {
                    exports.loadState = loadState;
                }
                
                if (typeof inputs !== "undefined") {
                    exports.inputs = inputs;
                }`)(o),this.unloadAgent(),this._context=o,t()};e.url!==void 0?fetch(e.url).then(r=>r.text()).then(r=>i(e.type!==void 0?e.type:s(e.url),r)):e.code!==void 0&&i(e.type!==void 0?e.type:"javascript",e.code)})}unloadAgent(){this._context={}}inputs(e){return this._context.inputs===void 0?{}:this._context.inputs(e)}saveState(){return this._context.saveState!==void 0?this._context.saveState():{}}loadState(e){this._context.loadState!==void 0&&this._context.loadState(e)}}class In{get id(){return this._id}get isBound(){return!1}get label(){return this._agentController.isBound?this._agentController.label:this._inputController!==void 0?"human":"<>"}constructor(e,t){this._id=e,this._inputController=t,this._agentController=new rt}inputs(e){return this._agentController.isBound?this._agentController.inputs(e):this._inputController!==void 0?this._inputController.inputs:{}}loadAgent(e){return this._agentController.loadAgent(e)}unloadAgent(){this._agentController.unloadAgent()}saveState(){return this._agentController.saveState()}loadState(e){this._agentController.loadState(e)}}class Fs{get ids(){return[...this._controllers.keys()]}get controllers(){return this._controllers}constructor(e){this._controllers=new Map,this._controllers.set(0,new In(0,e.inputController())),this._controllers.set(1,new In(1))}get(e){return this._controllers.get(e)}inputs(e){return[this._controllers.get(0).inputs(e),this._controllers.get(1).inputs(e)]}saveState(){return[this._controllers.get(0).saveState(),this._controllers.get(1).saveState()]}loadState(e){this._controllers.get(0).loadState(e),this._controllers.get(1).loadState(e)}}class _t{constructor(e,t){this._el=document.createElement("div"),this._el.style.boxSizing="border-box",this._el.style.display="block",this._el.style.position="absolute",this._el.style.width="32px",this._el.style.height="32px",this._el.style.margin="4px",this._el.style.border="4px solid #fff",this._el.style.borderRadius="50%",this._el.style.animation="moroboxai-spinner-rotate 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite",this._el.style.borderColor="#fff transparent transparent transparent",t!==void 0&&(this._el.style.animationDelay=`-${t}s`),e.appendChild(this._el)}}class $s{constructor(e){this._el=document.createElement("div"),this._el.style.display="inline-block",this._el.style.position="relative",this._el.style.width="40px",this._el.style.height="40px",new _t(this._el,.45),new _t(this._el,.3),new _t(this._el,.15),new _t(this._el),e.appendChild(this._el);let t=document.getElementById("moroboxai-dynamic-style");t||(t=document.createElement("style"),t.id="moroboxai-dynamic-style",document.body.appendChild(t)),t.innerHTML=`@keyframes moroboxai-spinner-rotate {
   0% {
      transform: rotate(0deg);
   }
   100% {
      transform: rotate(360deg);
   }
}`}remove(){this._el.remove()}}class Yt{get style(){return this.el.style}constructor(e){this.el=document.createElement("div"),this.el.style.width="100%",this.el.style.height="100%",this.el.style.position="absolute",this.el.style.left="0",this.el.style.top="0",this.el.style.display="flex",this.el.style.flexDirection="column",this.el.style.justifyContent="center",this.el.style.alignItems="center",e.appendChild(this.el)}show(){this.el.style.display="flex"}hide(){this.el.style.display="none"}remove(){this.el.remove()}}class Ms{constructor(e){this._overlay=new Yt(e),this._input=document.createElement("input"),this._input.type="button",this._input.value="Play",this._input.onclick=()=>{this.onPlay&&this.onPlay()},this._overlay.el.appendChild(this._input),e.appendChild(this._overlay.el)}show(){this._overlay.show()}hide(){this._overlay.hide()}mouseEnter(){}mouseMove(){}mouseLeave(){}remove(){this._overlay.remove()}}class js{constructor(e){this._overlay=new Yt(e),this._overlay.style.backgroundColor="black",new $s(this._overlay.el),e.appendChild(this._overlay.el)}show(){this._overlay.show()}hide(){this._overlay.hide()}mouseEnter(){}mouseMove(){}mouseLeave(){}remove(){this._overlay.remove()}}class Us{constructor(e){this._overlay=new Yt(e),this._speed1=document.createElement("input"),this._speed1.type="button",this._speed1.value="x1",this._speed1.onclick=()=>{this.onSpeed&&this.onSpeed(1)},this._speed2=document.createElement("input"),this._speed2.type="button",this._speed2.value="x2",this._speed2.onclick=()=>{this.onSpeed&&this.onSpeed(2)},this._speed4=document.createElement("input"),this._speed4.type="button",this._speed4.value="x4",this._speed4.onclick=()=>{this.onSpeed&&this.onSpeed(4)},this._overlay.el.appendChild(this._speed1),this._overlay.el.appendChild(this._speed2),this._overlay.el.appendChild(this._speed4),this._overlay.hide(),e.appendChild(this._overlay.el)}playing(){}paused(){}show(){this._overlay.show()}hide(){this._overlay.hide()}mouseEnter(){this.show()}mouseMove(){}mouseLeave(){this.hide()}remove(){this._overlay.remove()}}class Ks{constructor(e){this._root=e,this._playOverlay=new Ms(e),this._selectedOverlay=this._playOverlay,this._playOverlay.onPlay=()=>{this.onPlay&&this.onPlay()},this._loadingOverlay=new js(this._root),this._loadingOverlay.hide(),this._settingsOverlay=new Us(this._root),this._settingsOverlay.hide(),this._settingsOverlay.onSpeed=t=>{this.onSpeed&&this.onSpeed(t)}}stopped(){this._selectedOverlay.hide(),this._selectedOverlay=this._playOverlay,this._playOverlay.show()}loading(){this._playOverlay.hide(),this._selectedOverlay=this._loadingOverlay,this._loadingOverlay.show()}playing(){this._loadingOverlay.hide(),this._selectedOverlay=this._settingsOverlay,this._settingsOverlay.hide(),this._settingsOverlay.playing()}paused(){this._settingsOverlay.paused()}show(){}hide(){}mouseEnter(){this._selectedOverlay.mouseEnter()}mouseMove(){this._selectedOverlay.mouseMove()}mouseLeave(){this._selectedOverlay.mouseLeave()}remove(){this._playOverlay.remove(),this._loadingOverlay.remove(),this._settingsOverlay.remove()}}const Jt=Symbol.for("yaml.alias"),Qt=Symbol.for("yaml.document"),ze=Symbol.for("yaml.map"),Nn=Symbol.for("yaml.pair"),Le=Symbol.for("yaml.scalar"),Ue=Symbol.for("yaml.seq"),we=Symbol.for("yaml.node.type"),Fe=n=>!!n&&typeof n=="object"&&n[we]===Jt,Ke=n=>!!n&&typeof n=="object"&&n[we]===Qt,We=n=>!!n&&typeof n=="object"&&n[we]===ze,oe=n=>!!n&&typeof n=="object"&&n[we]===Nn,re=n=>!!n&&typeof n=="object"&&n[we]===Le,qe=n=>!!n&&typeof n=="object"&&n[we]===Ue;function le(n){if(n&&typeof n=="object")switch(n[we]){case ze:case Ue:return!0}return!1}function ce(n){if(n&&typeof n=="object")switch(n[we]){case Jt:case ze:case Le:case Ue:return!0}return!1}const Ws=n=>(re(n)||le(n))&&!!n.anchor,_e=Symbol("break visit"),Tn=Symbol("skip children"),Ie=Symbol("remove node");function Pe(n,e){const t=Ln(e);Ke(n)?Ve(null,n.contents,t,Object.freeze([n]))===Ie&&(n.contents=null):Ve(null,n,t,Object.freeze([]))}Pe.BREAK=_e,Pe.SKIP=Tn,Pe.REMOVE=Ie;function Ve(n,e,t,s){const i=xn(n,e,t,s);if(ce(i)||oe(i))return Bn(n,s,i),Ve(n,i,t,s);if(typeof i!="symbol"){if(le(e)){s=Object.freeze(s.concat(e));for(let r=0;r<e.items.length;++r){const a=Ve(r,e.items[r],t,s);if(typeof a=="number")r=a-1;else{if(a===_e)return _e;a===Ie&&(e.items.splice(r,1),r-=1)}}}else if(oe(e)){s=Object.freeze(s.concat(e));const r=Ve("key",e.key,t,s);if(r===_e)return _e;r===Ie&&(e.key=null);const a=Ve("value",e.value,t,s);if(a===_e)return _e;a===Ie&&(e.value=null)}}return i}async function bt(n,e){const t=Ln(e);Ke(n)?await Ze(null,n.contents,t,Object.freeze([n]))===Ie&&(n.contents=null):await Ze(null,n,t,Object.freeze([]))}bt.BREAK=_e,bt.SKIP=Tn,bt.REMOVE=Ie;async function Ze(n,e,t,s){const i=await xn(n,e,t,s);if(ce(i)||oe(i))return Bn(n,s,i),Ze(n,i,t,s);if(typeof i!="symbol"){if(le(e)){s=Object.freeze(s.concat(e));for(let r=0;r<e.items.length;++r){const a=await Ze(r,e.items[r],t,s);if(typeof a=="number")r=a-1;else{if(a===_e)return _e;a===Ie&&(e.items.splice(r,1),r-=1)}}}else if(oe(e)){s=Object.freeze(s.concat(e));const r=await Ze("key",e.key,t,s);if(r===_e)return _e;r===Ie&&(e.key=null);const a=await Ze("value",e.value,t,s);if(a===_e)return _e;a===Ie&&(e.value=null)}}return i}function Ln(n){return typeof n=="object"&&(n.Collection||n.Node||n.Value)?Object.assign({Alias:n.Node,Map:n.Node,Scalar:n.Node,Seq:n.Node},n.Value&&{Map:n.Value,Scalar:n.Value,Seq:n.Value},n.Collection&&{Map:n.Collection,Seq:n.Collection},n):n}function xn(n,e,t,s){var i,r,a,o,l;if(typeof t=="function")return t(n,e,s);if(We(e))return(i=t.Map)==null?void 0:i.call(t,n,e,s);if(qe(e))return(r=t.Seq)==null?void 0:r.call(t,n,e,s);if(oe(e))return(a=t.Pair)==null?void 0:a.call(t,n,e,s);if(re(e))return(o=t.Scalar)==null?void 0:o.call(t,n,e,s);if(Fe(e))return(l=t.Alias)==null?void 0:l.call(t,n,e,s)}function Bn(n,e,t){const s=e[e.length-1];if(le(s))s.items[n]=t;else if(oe(s))n==="key"?s.key=t:s.value=t;else if(Ke(s))s.contents=t;else{const i=Fe(s)?"alias":"scalar";throw new Error(`Cannot replace node with ${i} parent`)}}const qs={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},Vs=n=>n.replace(/[!,[\]{}]/g,e=>qs[e]);class ye{constructor(e,t){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},ye.defaultYaml,e),this.tags=Object.assign({},ye.defaultTags,t)}clone(){const e=new ye(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new ye(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:ye.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},ye.defaultTags);break}return e}add(e,t){this.atNextDocument&&(this.yaml={explicit:ye.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},ye.defaultTags),this.atNextDocument=!1);const s=e.trim().split(/[ \t]+/),i=s.shift();switch(i){case"%TAG":{if(s.length!==2&&(t(0,"%TAG directive should contain exactly two parts"),s.length<2))return!1;const[r,a]=s;return this.tags[r]=a,!0}case"%YAML":{if(this.yaml.explicit=!0,s.length!==1)return t(0,"%YAML directive should contain exactly one part"),!1;const[r]=s;if(r==="1.1"||r==="1.2")return this.yaml.version=r,!0;{const a=/^\d+\.\d+$/.test(r);return t(6,`Unsupported YAML version ${r}`,a),!1}}default:return t(0,`Unknown directive ${i}`,!0),!1}}tagName(e,t){if(e==="!")return"!";if(e[0]!=="!")return t(`Not a valid tag: ${e}`),null;if(e[1]==="<"){const a=e.slice(2,-1);return a==="!"||a==="!!"?(t(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&t("Verbatim tags must end with a >"),a)}const[,s,i]=e.match(/^(.*!)([^!]*)$/);i||t(`The ${e} tag has no suffix`);const r=this.tags[s];return r?r+decodeURIComponent(i):s==="!"?e:(t(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[t,s]of Object.entries(this.tags))if(e.startsWith(s))return t+Vs(e.substring(s.length));return e[0]==="!"?e:`!<${e}>`}toString(e){const t=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],s=Object.entries(this.tags);let i;if(e&&s.length>0&&ce(e.contents)){const r={};Pe(e.contents,(a,o)=>{ce(o)&&o.tag&&(r[o.tag]=!0)}),i=Object.keys(r)}else i=[];for(const[r,a]of s)r==="!!"&&a==="tag:yaml.org,2002:"||(!e||i.some(o=>o.startsWith(a)))&&t.push(`%TAG ${r} ${a}`);return t.join(`
`)}}ye.defaultYaml={explicit:!1,version:"1.2"},ye.defaultTags={"!!":"tag:yaml.org,2002:"};function zn(n){if(/[\x00-\x19\s,[\]{}]/.test(n)){const t=`Anchor must not contain whitespace or control characters: ${JSON.stringify(n)}`;throw new Error(t)}return!0}function Pn(n){const e=new Set;return Pe(n,{Value(t,s){s.anchor&&e.add(s.anchor)}}),e}function Dn(n,e){for(let t=1;;++t){const s=`${n}${t}`;if(!e.has(s))return s}}function Zs(n,e){const t=[],s=new Map;let i=null;return{onAnchor:r=>{t.push(r),i||(i=Pn(n));const a=Dn(e,i);return i.add(a),a},setAnchors:()=>{for(const r of t){const a=s.get(r);if(typeof a=="object"&&a.anchor&&(re(a.node)||le(a.node)))a.node.anchor=a.anchor;else{const o=new Error("Failed to resolve repeated object (this should not happen)");throw o.source=r,o}}},sourceObjects:s}}function Ge(n,e,t,s){if(s&&typeof s=="object")if(Array.isArray(s))for(let i=0,r=s.length;i<r;++i){const a=s[i],o=Ge(n,s,String(i),a);o===void 0?delete s[i]:o!==a&&(s[i]=o)}else if(s instanceof Map)for(const i of Array.from(s.keys())){const r=s.get(i),a=Ge(n,s,i,r);a===void 0?s.delete(i):a!==r&&s.set(i,a)}else if(s instanceof Set)for(const i of Array.from(s)){const r=Ge(n,s,i,i);r===void 0?s.delete(i):r!==i&&(s.delete(i),s.add(r))}else for(const[i,r]of Object.entries(s)){const a=Ge(n,s,i,r);a===void 0?delete s[i]:a!==r&&(s[i]=a)}return n.call(e,t,s)}function ve(n,e,t){if(Array.isArray(n))return n.map((s,i)=>ve(s,String(i),t));if(n&&typeof n.toJSON=="function"){if(!t||!Ws(n))return n.toJSON(e,t);const s={aliasCount:0,count:1,res:void 0};t.anchors.set(n,s),t.onCreate=r=>{s.res=r,delete t.onCreate};const i=n.toJSON(e,t);return t.onCreate&&t.onCreate(i),i}return typeof n=="bigint"&&!(t!=null&&t.keep)?Number(n):n}class Xt{constructor(e){Object.defineProperty(this,we,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:t,maxAliasCount:s,onAnchor:i,reviver:r}={}){if(!Ke(e))throw new TypeError("A document argument is required");const a={anchors:new Map,doc:e,keep:!0,mapAsMap:t===!0,mapKeyWarned:!1,maxAliasCount:typeof s=="number"?s:100},o=ve(this,"",a);if(typeof i=="function")for(const{count:l,res:h}of a.anchors.values())i(h,l);return typeof r=="function"?Ge(r,{"":o},"",o):o}}class wt extends Xt{constructor(e){super(Jt),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e){let t;return Pe(e,{Node:(s,i)=>{if(i===this)return Pe.BREAK;i.anchor===this.source&&(t=i)}}),t}toJSON(e,t){if(!t)return{source:this.source};const{anchors:s,doc:i,maxAliasCount:r}=t,a=this.resolve(i);if(!a){const l=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(l)}let o=s.get(a);if(o||(ve(a,null,t),o=s.get(a)),!o||o.res===void 0){const l="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(l)}if(r>=0&&(o.count+=1,o.aliasCount===0&&(o.aliasCount=vt(i,a,s)),o.count*o.aliasCount>r)){const l="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(l)}return o.res}toString(e,t,s){const i=`*${this.source}`;if(e){if(zn(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const r=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(r)}if(e.implicitKey)return`${i} `}return i}}function vt(n,e,t){if(Fe(e)){const s=e.resolve(n),i=t&&s&&t.get(s);return i?i.count*i.aliasCount:0}else if(le(e)){let s=0;for(const i of e.items){const r=vt(n,i,t);r>s&&(s=r)}return s}else if(oe(e)){const s=vt(n,e.key,t),i=vt(n,e.value,t);return Math.max(s,i)}return 1}const Rn=n=>!n||typeof n!="function"&&typeof n!="object";class ee extends Xt{constructor(e){super(Le),this.value=e}toJSON(e,t){return t!=null&&t.keep?this.value:ve(this.value,e,t)}toString(){return String(this.value)}}ee.BLOCK_FOLDED="BLOCK_FOLDED",ee.BLOCK_LITERAL="BLOCK_LITERAL",ee.PLAIN="PLAIN",ee.QUOTE_DOUBLE="QUOTE_DOUBLE",ee.QUOTE_SINGLE="QUOTE_SINGLE";const Gs="tag:yaml.org,2002:";function Hs(n,e,t){var s;if(e){const i=t.filter(a=>a.tag===e),r=(s=i.find(a=>!a.format))!=null?s:i[0];if(!r)throw new Error(`Tag ${e} not found`);return r}return t.find(i=>{var r;return((r=i.identify)==null?void 0:r.call(i,n))&&!i.format})}function at(n,e,t){var g,_,u;if(Ke(n)&&(n=n.contents),ce(n))return n;if(oe(n)){const y=(_=(g=t.schema[ze]).createNode)==null?void 0:_.call(g,t.schema,null,t);return y.items.push(n),y}(n instanceof String||n instanceof Number||n instanceof Boolean||typeof BigInt!="undefined"&&n instanceof BigInt)&&(n=n.valueOf());const{aliasDuplicateObjects:s,onAnchor:i,onTagObj:r,schema:a,sourceObjects:o}=t;let l;if(s&&n&&typeof n=="object"){if(l=o.get(n),l)return l.anchor||(l.anchor=i(n)),new wt(l.anchor);l={anchor:null,node:null},o.set(n,l)}e!=null&&e.startsWith("!!")&&(e=Gs+e.slice(2));let h=Hs(n,e,a.tags);if(!h){if(n&&typeof n.toJSON=="function"&&(n=n.toJSON()),!n||typeof n!="object"){const y=new ee(n);return l&&(l.node=y),y}h=n instanceof Map?a[ze]:Symbol.iterator in Object(n)?a[Ue]:a[ze]}r&&(r(h),delete t.onTagObj);const b=h!=null&&h.createNode?h.createNode(t.schema,n,t):typeof((u=h==null?void 0:h.nodeClass)==null?void 0:u.from)=="function"?h.nodeClass.from(t.schema,n,t):new ee(n);return e?b.tag=e:h.default||(b.tag=h.tag),l&&(l.node=b),b}function kt(n,e,t){let s=t;for(let i=e.length-1;i>=0;--i){const r=e[i];if(typeof r=="number"&&Number.isInteger(r)&&r>=0){const a=[];a[r]=s,s=a}else s=new Map([[r,s]])}return at(s,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:n,sourceObjects:new Map})}const ot=n=>n==null||typeof n=="object"&&!!n[Symbol.iterator]().next().done;class St extends Xt{constructor(e,t){super(e),Object.defineProperty(this,"schema",{value:t,configurable:!0,enumerable:!1,writable:!0})}clone(e){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(t.schema=e),t.items=t.items.map(s=>ce(s)||oe(s)?s.clone(e):s),this.range&&(t.range=this.range.slice()),t}addIn(e,t){if(ot(e))this.add(t);else{const[s,...i]=e,r=this.get(s,!0);if(le(r))r.addIn(i,t);else if(r===void 0&&this.schema)this.set(s,kt(this.schema,i,t));else throw new Error(`Expected YAML collection at ${s}. Remaining path: ${i}`)}}deleteIn(e){const[t,...s]=e;if(s.length===0)return this.delete(t);const i=this.get(t,!0);if(le(i))return i.deleteIn(s);throw new Error(`Expected YAML collection at ${t}. Remaining path: ${s}`)}getIn(e,t){const[s,...i]=e,r=this.get(s,!0);return i.length===0?!t&&re(r)?r.value:r:le(r)?r.getIn(i,t):void 0}hasAllNullValues(e){return this.items.every(t=>{if(!oe(t))return!1;const s=t.value;return s==null||e&&re(s)&&s.value==null&&!s.commentBefore&&!s.comment&&!s.tag})}hasIn(e){const[t,...s]=e;if(s.length===0)return this.has(t);const i=this.get(t,!0);return le(i)?i.hasIn(s):!1}setIn(e,t){const[s,...i]=e;if(i.length===0)this.set(s,t);else{const r=this.get(s,!0);if(le(r))r.setIn(i,t);else if(r===void 0&&this.schema)this.set(s,kt(this.schema,i,t));else throw new Error(`Expected YAML collection at ${s}. Remaining path: ${i}`)}}}St.maxFlowStringSingleLineLength=60;const Ys=n=>n.replace(/^(?!$)(?: $)?/gm,"#");function xe(n,e){return/^\n+$/.test(n)?n.substring(1):e?n.replace(/^(?! *$)/gm,e):n}const De=(n,e,t)=>n.endsWith(`
`)?xe(t,e):t.includes(`
`)?`
`+xe(t,e):(n.endsWith(" ")?"":" ")+t,Fn="flow",en="block",At="quoted";function Et(n,e,t="flow",{indentAtStart:s,lineWidth:i=80,minContentWidth:r=20,onFold:a,onOverflow:o}={}){if(!i||i<0)return n;const l=Math.max(1+r,1+i-e.length);if(n.length<=l)return n;const h=[],b={};let g=i-e.length;typeof s=="number"&&(s>i-Math.max(2,r)?h.push(0):g=i-s);let _,u,y=!1,f=-1,m=-1,p=-1;t===en&&(f=$n(n,f),f!==-1&&(g=f+l));for(let S;S=n[f+=1];){if(t===At&&S==="\\"){switch(m=f,n[f+1]){case"x":f+=3;break;case"u":f+=5;break;case"U":f+=9;break;default:f+=1}p=f}if(S===`
`)t===en&&(f=$n(n,f)),g=f+l,_=void 0;else{if(S===" "&&u&&u!==" "&&u!==`
`&&u!=="	"){const O=n[f+1];O&&O!==" "&&O!==`
`&&O!=="	"&&(_=f)}if(f>=g)if(_)h.push(_),g=_+l,_=void 0;else if(t===At){for(;u===" "||u==="	";)u=S,S=n[f+=1],y=!0;const O=f>p+1?f-2:m-1;if(b[O])return n;h.push(O),b[O]=!0,g=O+l,_=void 0}else y=!0}u=S}if(y&&o&&o(),h.length===0)return n;a&&a();let w=n.slice(0,h[0]);for(let S=0;S<h.length;++S){const O=h[S],E=h[S+1]||n.length;O===0?w=`
${e}${n.slice(0,E)}`:(t===At&&b[O]&&(w+=`${n[O]}\\`),w+=`
${e}${n.slice(O+1,E)}`)}return w}function $n(n,e){let t=n[e+1];for(;t===" "||t==="	";){do t=n[e+=1];while(t&&t!==`
`);t=n[e+1]}return e}const Ot=(n,e)=>({indentAtStart:e?n.indent.length:n.indentAtStart,lineWidth:n.options.lineWidth,minContentWidth:n.options.minContentWidth}),Ct=n=>/^(%|---|\.\.\.)/m.test(n);function Js(n,e,t){if(!e||e<0)return!1;const s=e-t,i=n.length;if(i<=s)return!1;for(let r=0,a=0;r<i;++r)if(n[r]===`
`){if(r-a>s)return!0;if(a=r+1,i-a<=s)return!1}return!0}function lt(n,e){const t=JSON.stringify(n);if(e.options.doubleQuotedAsJSON)return t;const{implicitKey:s}=e,i=e.options.doubleQuotedMinMultiLineLength,r=e.indent||(Ct(n)?"  ":"");let a="",o=0;for(let l=0,h=t[l];h;h=t[++l])if(h===" "&&t[l+1]==="\\"&&t[l+2]==="n"&&(a+=t.slice(o,l)+"\\ ",l+=1,o=l,h="\\"),h==="\\")switch(t[l+1]){case"u":{a+=t.slice(o,l);const b=t.substr(l+2,4);switch(b){case"0000":a+="\\0";break;case"0007":a+="\\a";break;case"000b":a+="\\v";break;case"001b":a+="\\e";break;case"0085":a+="\\N";break;case"00a0":a+="\\_";break;case"2028":a+="\\L";break;case"2029":a+="\\P";break;default:b.substr(0,2)==="00"?a+="\\x"+b.substr(2):a+=t.substr(l,6)}l+=5,o=l+1}break;case"n":if(s||t[l+2]==='"'||t.length<i)l+=1;else{for(a+=t.slice(o,l)+`

`;t[l+2]==="\\"&&t[l+3]==="n"&&t[l+4]!=='"';)a+=`
`,l+=2;a+=r,t[l+2]===" "&&(a+="\\"),l+=1,o=l+1}break;default:l+=1}return a=o?a+t.slice(o):t,s?a:Et(a,r,At,Ot(e,!1))}function tn(n,e){if(e.options.singleQuote===!1||e.implicitKey&&n.includes(`
`)||/[ \t]\n|\n[ \t]/.test(n))return lt(n,e);const t=e.indent||(Ct(n)?"  ":""),s="'"+n.replace(/'/g,"''").replace(/\n+/g,`$&
${t}`)+"'";return e.implicitKey?s:Et(s,t,Fn,Ot(e,!1))}function He(n,e){const{singleQuote:t}=e.options;let s;if(t===!1)s=lt;else{const i=n.includes('"'),r=n.includes("'");i&&!r?s=tn:r&&!i?s=lt:s=t?tn:lt}return s(n,e)}let nn;try{nn=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{nn=/\n+(?!\n|$)/g}function It({comment:n,type:e,value:t},s,i,r){const{blockQuote:a,commentString:o,lineWidth:l}=s.options;if(!a||/\n[\t ]+$/.test(t)||/^\s*$/.test(t))return He(t,s);const h=s.indent||(s.forceBlockIndent||Ct(t)?"  ":""),b=a==="literal"?!0:a==="folded"||e===ee.BLOCK_FOLDED?!1:e===ee.BLOCK_LITERAL?!0:!Js(t,l,h.length);if(!t)return b?`|
`:`>
`;let g,_;for(_=t.length;_>0;--_){const C=t[_-1];if(C!==`
`&&C!=="	"&&C!==" ")break}let u=t.substring(_);const y=u.indexOf(`
`);y===-1?g="-":t===u||y!==u.length-1?(g="+",r&&r()):g="",u&&(t=t.slice(0,-u.length),u[u.length-1]===`
`&&(u=u.slice(0,-1)),u=u.replace(nn,`$&${h}`));let f=!1,m,p=-1;for(m=0;m<t.length;++m){const C=t[m];if(C===" ")f=!0;else if(C===`
`)p=m;else break}let w=t.substring(0,p<m?p+1:m);w&&(t=t.substring(w.length),w=w.replace(/\n+/g,`$&${h}`));let O=(b?"|":">")+(f?h?"2":"1":"")+g;if(n&&(O+=" "+o(n.replace(/ ?[\r\n]+/g," ")),i&&i()),b)return t=t.replace(/\n+/g,`$&${h}`),`${O}
${h}${w}${t}${u}`;t=t.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${h}`);const E=Et(`${w}${t}${u}`,h,en,Ot(s,!0));return`${O}
${h}${E}`}function Qs(n,e,t,s){const{type:i,value:r}=n,{actualString:a,implicitKey:o,indent:l,indentStep:h,inFlow:b}=e;if(o&&r.includes(`
`)||b&&/[[\]{},]/.test(r))return He(r,e);if(!r||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(r))return o||b||!r.includes(`
`)?He(r,e):It(n,e,t,s);if(!o&&!b&&i!==ee.PLAIN&&r.includes(`
`))return It(n,e,t,s);if(Ct(r)){if(l==="")return e.forceBlockIndent=!0,It(n,e,t,s);if(o&&l===h)return He(r,e)}const g=r.replace(/\n+/g,`$&
${l}`);if(a){const _=f=>{var m;return f.default&&f.tag!=="tag:yaml.org,2002:str"&&((m=f.test)==null?void 0:m.test(g))},{compat:u,tags:y}=e.doc.schema;if(y.some(_)||(u==null?void 0:u.some(_)))return He(r,e)}return o?g:Et(g,l,Fn,Ot(e,!1))}function ct(n,e,t,s){const{implicitKey:i,inFlow:r}=e,a=typeof n.value=="string"?n:Object.assign({},n,{value:String(n.value)});let{type:o}=n;o!==ee.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(a.value)&&(o=ee.QUOTE_DOUBLE);const l=b=>{switch(b){case ee.BLOCK_FOLDED:case ee.BLOCK_LITERAL:return i||r?He(a.value,e):It(a,e,t,s);case ee.QUOTE_DOUBLE:return lt(a.value,e);case ee.QUOTE_SINGLE:return tn(a.value,e);case ee.PLAIN:return Qs(a,e,t,s);default:return null}};let h=l(o);if(h===null){const{defaultKeyType:b,defaultStringType:g}=e.options,_=i&&b||g;if(h=l(_),h===null)throw new Error(`Unsupported default string type ${_}`)}return h}function Mn(n,e){const t=Object.assign({blockQuote:!0,commentString:Ys,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},n.schema.toStringOptions,e);let s;switch(t.collectionStyle){case"block":s=!1;break;case"flow":s=!0;break;default:s=null}return{anchors:new Set,doc:n,flowCollectionPadding:t.flowCollectionPadding?" ":"",indent:"",indentStep:typeof t.indent=="number"?" ".repeat(t.indent):"  ",inFlow:s,options:t}}function Xs(n,e){var i,r,a,o;if(e.tag){const l=n.filter(h=>h.tag===e.tag);if(l.length>0)return(i=l.find(h=>h.format===e.format))!=null?i:l[0]}let t,s;if(re(e)){s=e.value;const l=n.filter(h=>{var b;return(b=h.identify)==null?void 0:b.call(h,s)});t=(r=l.find(h=>h.format===e.format))!=null?r:l.find(h=>!h.format)}else s=e,t=n.find(l=>l.nodeClass&&s instanceof l.nodeClass);if(!t){const l=(o=(a=s==null?void 0:s.constructor)==null?void 0:a.name)!=null?o:typeof s;throw new Error(`Tag not resolved for ${l} value`)}return t}function ei(n,e,{anchors:t,doc:s}){if(!s.directives)return"";const i=[],r=(re(n)||le(n))&&n.anchor;r&&zn(r)&&(t.add(r),i.push(`&${r}`));const a=n.tag?n.tag:e.default?null:e.tag;return a&&i.push(s.directives.tagString(a)),i.join(" ")}function Ye(n,e,t,s){var l,h;if(oe(n))return n.toString(e,t,s);if(Fe(n)){if(e.doc.directives)return n.toString(e);if((l=e.resolvedAliases)!=null&&l.has(n))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(n):e.resolvedAliases=new Set([n]),n=n.resolve(e.doc)}let i;const r=ce(n)?n:e.doc.createNode(n,{onTagObj:b=>i=b});i||(i=Xs(e.doc.schema.tags,r));const a=ei(r,i,e);a.length>0&&(e.indentAtStart=((h=e.indentAtStart)!=null?h:0)+a.length+1);const o=typeof i.stringify=="function"?i.stringify(r,e,t,s):re(r)?ct(r,e,t,s):r.toString(e,t,s);return a?re(r)||o[0]==="{"||o[0]==="["?`${a} ${o}`:`${a}
${e.indent}${o}`:o}function ti({key:n,value:e},t,s,i){var x,D;const{allNullValues:r,doc:a,indent:o,indentStep:l,options:{commentString:h,indentSeq:b,simpleKeys:g}}=t;let _=ce(n)&&n.comment||null;if(g){if(_)throw new Error("With simple keys, key nodes cannot have comments");if(le(n)){const T="With simple keys, collection cannot be used as a key value";throw new Error(T)}}let u=!g&&(!n||_&&e==null&&!t.inFlow||le(n)||(re(n)?n.type===ee.BLOCK_FOLDED||n.type===ee.BLOCK_LITERAL:typeof n=="object"));t=Object.assign({},t,{allNullValues:!1,implicitKey:!u&&(g||!r),indent:o+l});let y=!1,f=!1,m=Ye(n,t,()=>y=!0,()=>f=!0);if(!u&&!t.inFlow&&m.length>1024){if(g)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");u=!0}if(t.inFlow){if(r||e==null)return y&&s&&s(),m===""?"?":u?`? ${m}`:m}else if(r&&!g||e==null&&u)return m=`? ${m}`,_&&!y?m+=De(m,t.indent,h(_)):f&&i&&i(),m;y&&(_=null),u?(_&&(m+=De(m,t.indent,h(_))),m=`? ${m}
${o}:`):(m=`${m}:`,_&&(m+=De(m,t.indent,h(_))));let p,w,S;ce(e)?(p=!!e.spaceBefore,w=e.commentBefore,S=e.comment):(p=!1,w=null,S=null,e&&typeof e=="object"&&(e=a.createNode(e))),t.implicitKey=!1,!u&&!_&&re(e)&&(t.indentAtStart=m.length+1),f=!1,!b&&l.length>=2&&!t.inFlow&&!u&&qe(e)&&!e.flow&&!e.tag&&!e.anchor&&(t.indent=t.indent.substring(2));let O=!1;const E=Ye(e,t,()=>O=!0,()=>f=!0);let C=" ";if(_||p||w){if(C=p?`
`:"",w){const T=h(w);C+=`
${xe(T,t.indent)}`}E===""&&!t.inFlow?C===`
`&&(C=`

`):C+=`
${t.indent}`}else if(!u&&le(e)){const T=E[0],$=E.indexOf(`
`),Z=$!==-1,A=(D=(x=t.inFlow)!=null?x:e.flow)!=null?D:e.items.length===0;if(Z||!A){let P=!1;if(Z&&(T==="&"||T==="!")){let d=E.indexOf(" ");T==="&"&&d!==-1&&d<$&&E[d+1]==="!"&&(d=E.indexOf(" ",d+1)),(d===-1||$<d)&&(P=!0)}P||(C=`
${t.indent}`)}}else(E===""||E[0]===`
`)&&(C="");return m+=C+E,t.inFlow?O&&s&&s():S&&!O?m+=De(m,t.indent,h(S)):f&&i&&i(),m}function jn(n,e){(n==="debug"||n==="warn")&&(typeof process!="undefined"&&process.emitWarning?process.emitWarning(e):console.warn(e))}const Un="<<";function Kn(n,e,{key:t,value:s}){if((n==null?void 0:n.doc.schema.merge)&&ni(t))if(s=Fe(s)?s.resolve(n.doc):s,qe(s))for(const i of s.items)sn(n,e,i);else if(Array.isArray(s))for(const i of s)sn(n,e,i);else sn(n,e,s);else{const i=ve(t,"",n);if(e instanceof Map)e.set(i,ve(s,i,n));else if(e instanceof Set)e.add(i);else{const r=si(t,i,n),a=ve(s,r,n);r in e?Object.defineProperty(e,r,{value:a,writable:!0,enumerable:!0,configurable:!0}):e[r]=a}}return e}const ni=n=>n===Un||re(n)&&n.value===Un&&(!n.type||n.type===ee.PLAIN);function sn(n,e,t){const s=n&&Fe(t)?t.resolve(n.doc):t;if(!We(s))throw new Error("Merge sources must be maps or map aliases");const i=s.toJSON(null,n,Map);for(const[r,a]of i)e instanceof Map?e.has(r)||e.set(r,a):e instanceof Set?e.add(r):Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(e,r,{value:a,writable:!0,enumerable:!0,configurable:!0});return e}function si(n,e,t){if(e===null)return"";if(typeof e!="object")return String(e);if(ce(n)&&(t==null?void 0:t.doc)){const s=Mn(t.doc,{});s.anchors=new Set;for(const r of t.anchors.keys())s.anchors.add(r.anchor);s.inFlow=!0,s.inStringifyKey=!0;const i=n.toString(s);if(!t.mapKeyWarned){let r=JSON.stringify(i);r.length>40&&(r=r.substring(0,36)+'..."'),jn(t.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${r}. Set mapAsMap: true to use object keys.`),t.mapKeyWarned=!0}return i}return JSON.stringify(e)}function rn(n,e,t){const s=at(n,void 0,t),i=at(e,void 0,t);return new pe(s,i)}class pe{constructor(e,t=null){Object.defineProperty(this,we,{value:Nn}),this.key=e,this.value=t}clone(e){let{key:t,value:s}=this;return ce(t)&&(t=t.clone(e)),ce(s)&&(s=s.clone(e)),new pe(t,s)}toJSON(e,t){const s=t!=null&&t.mapAsMap?new Map:{};return Kn(t,s,this)}toString(e,t,s){return e!=null&&e.doc?ti(this,e,t,s):JSON.stringify(this)}}function Wn(n,e,t){var r;return(((r=e.inFlow)!=null?r:n.flow)?ri:ii)(n,e,t)}function ii({comment:n,items:e},t,{blockItemPrefix:s,flowChars:i,itemIndent:r,onChompKeep:a,onComment:o}){const{indent:l,options:{commentString:h}}=t,b=Object.assign({},t,{indent:r,type:null});let g=!1;const _=[];for(let y=0;y<e.length;++y){const f=e[y];let m=null;if(ce(f))!g&&f.spaceBefore&&_.push(""),Nt(t,_,f.commentBefore,g),f.comment&&(m=f.comment);else if(oe(f)){const w=ce(f.key)?f.key:null;w&&(!g&&w.spaceBefore&&_.push(""),Nt(t,_,w.commentBefore,g))}g=!1;let p=Ye(f,b,()=>m=null,()=>g=!0);m&&(p+=De(p,r,h(m))),g&&m&&(g=!1),_.push(s+p)}let u;if(_.length===0)u=i.start+i.end;else{u=_[0];for(let y=1;y<_.length;++y){const f=_[y];u+=f?`
${l}${f}`:`
`}}return n?(u+=`
`+xe(h(n),l),o&&o()):g&&a&&a(),u}function ri({comment:n,items:e},t,{flowChars:s,itemIndent:i,onComment:r}){const{indent:a,indentStep:o,flowCollectionPadding:l,options:{commentString:h}}=t;i+=o;const b=Object.assign({},t,{indent:i,inFlow:!0,type:null});let g=!1,_=0;const u=[];for(let p=0;p<e.length;++p){const w=e[p];let S=null;if(ce(w))w.spaceBefore&&u.push(""),Nt(t,u,w.commentBefore,!1),w.comment&&(S=w.comment);else if(oe(w)){const E=ce(w.key)?w.key:null;E&&(E.spaceBefore&&u.push(""),Nt(t,u,E.commentBefore,!1),E.comment&&(g=!0));const C=ce(w.value)?w.value:null;C?(C.comment&&(S=C.comment),C.commentBefore&&(g=!0)):w.value==null&&(E==null?void 0:E.comment)&&(S=E.comment)}S&&(g=!0);let O=Ye(w,b,()=>S=null);p<e.length-1&&(O+=","),S&&(O+=De(O,i,h(S))),!g&&(u.length>_||O.includes(`
`))&&(g=!0),u.push(O),_=u.length}let y;const{start:f,end:m}=s;if(u.length===0)y=f+m;else if(g||(g=u.reduce((w,S)=>w+S.length+2,2)>St.maxFlowStringSingleLineLength),g){y=f;for(const p of u)y+=p?`
${o}${a}${p}`:`
`;y+=`
${a}${m}`}else y=`${f}${l}${u.join(" ")}${l}${m}`;return n&&(y+=De(y,a,h(n)),r&&r()),y}function Nt({indent:n,options:{commentString:e}},t,s,i){if(s&&i&&(s=s.replace(/^\n+/,"")),s){const r=xe(e(s),n);t.push(r.trimStart())}}function $e(n,e){const t=re(e)?e.value:e;for(const s of n)if(oe(s)&&(s.key===e||s.key===t||re(s.key)&&s.key.value===t))return s}class be extends St{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(ze,e),this.items=[]}static from(e,t,s){const{keepUndefined:i,replacer:r}=s,a=new this(e),o=(l,h)=>{if(typeof r=="function")h=r.call(t,l,h);else if(Array.isArray(r)&&!r.includes(l))return;(h!==void 0||i)&&a.items.push(rn(l,h,s))};if(t instanceof Map)for(const[l,h]of t)o(l,h);else if(t&&typeof t=="object")for(const l of Object.keys(t))o(l,t[l]);return typeof e.sortMapEntries=="function"&&a.items.sort(e.sortMapEntries),a}add(e,t){var a;let s;oe(e)?s=e:!e||typeof e!="object"||!("key"in e)?s=new pe(e,e==null?void 0:e.value):s=new pe(e.key,e.value);const i=$e(this.items,s.key),r=(a=this.schema)==null?void 0:a.sortMapEntries;if(i){if(!t)throw new Error(`Key ${s.key} already set`);re(i.value)&&Rn(s.value)?i.value.value=s.value:i.value=s.value}else if(r){const o=this.items.findIndex(l=>r(s,l)<0);o===-1?this.items.push(s):this.items.splice(o,0,s)}else this.items.push(s)}delete(e){const t=$e(this.items,e);return t?this.items.splice(this.items.indexOf(t),1).length>0:!1}get(e,t){var r;const s=$e(this.items,e),i=s==null?void 0:s.value;return(r=!t&&re(i)?i.value:i)!=null?r:void 0}has(e){return!!$e(this.items,e)}set(e,t){this.add(new pe(e,t),!0)}toJSON(e,t,s){const i=s?new s:t!=null&&t.mapAsMap?new Map:{};t!=null&&t.onCreate&&t.onCreate(i);for(const r of this.items)Kn(t,i,r);return i}toString(e,t,s){if(!e)return JSON.stringify(this);for(const i of this.items)if(!oe(i))throw new Error(`Map items must all be pairs; found ${JSON.stringify(i)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),Wn(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:s,onComment:t})}}const Je={collection:"map",default:!0,nodeClass:be,tag:"tag:yaml.org,2002:map",resolve(n,e){return We(n)||e("Expected a mapping for this tag"),n},createNode:(n,e,t)=>be.from(n,e,t)};class Re extends St{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(Ue,e),this.items=[]}add(e){this.items.push(e)}delete(e){const t=Tt(e);return typeof t!="number"?!1:this.items.splice(t,1).length>0}get(e,t){const s=Tt(e);if(typeof s!="number")return;const i=this.items[s];return!t&&re(i)?i.value:i}has(e){const t=Tt(e);return typeof t=="number"&&t<this.items.length}set(e,t){const s=Tt(e);if(typeof s!="number")throw new Error(`Expected a valid index, not ${e}.`);const i=this.items[s];re(i)&&Rn(t)?i.value=t:this.items[s]=t}toJSON(e,t){const s=[];t!=null&&t.onCreate&&t.onCreate(s);let i=0;for(const r of this.items)s.push(ve(r,String(i++),t));return s}toString(e,t,s){return e?Wn(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:s,onComment:t}):JSON.stringify(this)}static from(e,t,s){const{replacer:i}=s,r=new this(e);if(t&&Symbol.iterator in Object(t)){let a=0;for(let o of t){if(typeof i=="function"){const l=t instanceof Set?o:String(a++);o=i.call(t,l,o)}r.items.push(at(o,void 0,s))}}return r}}function Tt(n){let e=re(n)?n.value:n;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}const Qe={collection:"seq",default:!0,nodeClass:Re,tag:"tag:yaml.org,2002:seq",resolve(n,e){return qe(n)||e("Expected a sequence for this tag"),n},createNode:(n,e,t)=>Re.from(n,e,t)},Lt={identify:n=>typeof n=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:n=>n,stringify(n,e,t,s){return e=Object.assign({actualString:!0},e),ct(n,e,t,s)}},xt={identify:n=>n==null,createNode:()=>new ee(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new ee(null),stringify:({source:n},e)=>typeof n=="string"&&xt.test.test(n)?n:e.options.nullStr},an={identify:n=>typeof n=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:n=>new ee(n[0]==="t"||n[0]==="T"),stringify({source:n,value:e},t){if(n&&an.test.test(n)){const s=n[0]==="t"||n[0]==="T";if(e===s)return n}return e?t.options.trueStr:t.options.falseStr}};function Ae({format:n,minFractionDigits:e,tag:t,value:s}){if(typeof s=="bigint")return String(s);const i=typeof s=="number"?s:Number(s);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let r=JSON.stringify(s);if(!n&&e&&(!t||t==="tag:yaml.org,2002:float")&&/^\d/.test(r)){let a=r.indexOf(".");a<0&&(a=r.length,r+=".");let o=e-(r.length-a-1);for(;o-- >0;)r+="0"}return r}const qn={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:n=>n.slice(-3).toLowerCase()==="nan"?NaN:n[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Ae},Vn={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:n=>parseFloat(n),stringify(n){const e=Number(n.value);return isFinite(e)?e.toExponential():Ae(n)}},Zn={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(n){const e=new ee(parseFloat(n)),t=n.indexOf(".");return t!==-1&&n[n.length-1]==="0"&&(e.minFractionDigits=n.length-t-1),e},stringify:Ae},Bt=n=>typeof n=="bigint"||Number.isInteger(n),on=(n,e,t,{intAsBigInt:s})=>s?BigInt(n):parseInt(n.substring(e),t);function Gn(n,e,t){const{value:s}=n;return Bt(s)&&s>=0?t+s.toString(e):Ae(n)}const Hn={identify:n=>Bt(n)&&n>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(n,e,t)=>on(n,2,8,t),stringify:n=>Gn(n,8,"0o")},Yn={identify:Bt,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(n,e,t)=>on(n,0,10,t),stringify:Ae},Jn={identify:n=>Bt(n)&&n>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(n,e,t)=>on(n,2,16,t),stringify:n=>Gn(n,16,"0x")},ai=[Je,Qe,Lt,xt,an,Hn,Yn,Jn,qn,Vn,Zn];function Qn(n){return typeof n=="bigint"||Number.isInteger(n)}const zt=({value:n})=>JSON.stringify(n),oi=[{identify:n=>typeof n=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:n=>n,stringify:zt},{identify:n=>n==null,createNode:()=>new ee(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:zt},{identify:n=>typeof n=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:n=>n==="true",stringify:zt},{identify:Qn,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(n,e,{intAsBigInt:t})=>t?BigInt(n):parseInt(n,10),stringify:({value:n})=>Qn(n)?n.toString():JSON.stringify(n)},{identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:n=>parseFloat(n),stringify:zt}],li={default:!0,tag:"",test:/^/,resolve(n,e){return e(`Unresolved plain scalar ${JSON.stringify(n)}`),n}},ci=[Je,Qe].concat(oi,li),ln={identify:n=>n instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(n,e){if(typeof Buffer=="function")return Buffer.from(n,"base64");if(typeof atob=="function"){const t=atob(n.replace(/[\n\r]/g,"")),s=new Uint8Array(t.length);for(let i=0;i<t.length;++i)s[i]=t.charCodeAt(i);return s}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),n},stringify({comment:n,type:e,value:t},s,i,r){const a=t;let o;if(typeof Buffer=="function")o=a instanceof Buffer?a.toString("base64"):Buffer.from(a.buffer).toString("base64");else if(typeof btoa=="function"){let l="";for(let h=0;h<a.length;++h)l+=String.fromCharCode(a[h]);o=btoa(l)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e||(e=ee.BLOCK_LITERAL),e!==ee.QUOTE_DOUBLE){const l=Math.max(s.options.lineWidth-s.indent.length,s.options.minContentWidth),h=Math.ceil(o.length/l),b=new Array(h);for(let g=0,_=0;g<h;++g,_+=l)b[g]=o.substr(_,l);o=b.join(e===ee.BLOCK_LITERAL?`
`:" ")}return ct({comment:n,type:e,value:o},s,i,r)}};function Xn(n,e){var t;if(qe(n))for(let s=0;s<n.items.length;++s){let i=n.items[s];if(!oe(i)){if(We(i)){i.items.length>1&&e("Each pair must have its own sequence indicator");const r=i.items[0]||new pe(new ee(null));if(i.commentBefore&&(r.key.commentBefore=r.key.commentBefore?`${i.commentBefore}
${r.key.commentBefore}`:i.commentBefore),i.comment){const a=(t=r.value)!=null?t:r.key;a.comment=a.comment?`${i.comment}
${a.comment}`:i.comment}i=r}n.items[s]=oe(i)?i:new pe(i)}}else e("Expected a sequence for this tag");return n}function es(n,e,t){const{replacer:s}=t,i=new Re(n);i.tag="tag:yaml.org,2002:pairs";let r=0;if(e&&Symbol.iterator in Object(e))for(let a of e){typeof s=="function"&&(a=s.call(e,String(r++),a));let o,l;if(Array.isArray(a))if(a.length===2)o=a[0],l=a[1];else throw new TypeError(`Expected [key, value] tuple: ${a}`);else if(a&&a instanceof Object){const h=Object.keys(a);if(h.length===1)o=h[0],l=a[o];else throw new TypeError(`Expected tuple with one key, not ${h.length} keys`)}else o=a;i.items.push(rn(o,l,t))}return i}const cn={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:Xn,createNode:es};class Xe extends Re{constructor(){super(),this.add=be.prototype.add.bind(this),this.delete=be.prototype.delete.bind(this),this.get=be.prototype.get.bind(this),this.has=be.prototype.has.bind(this),this.set=be.prototype.set.bind(this),this.tag=Xe.tag}toJSON(e,t){if(!t)return super.toJSON(e);const s=new Map;t!=null&&t.onCreate&&t.onCreate(s);for(const i of this.items){let r,a;if(oe(i)?(r=ve(i.key,"",t),a=ve(i.value,r,t)):r=ve(i,"",t),s.has(r))throw new Error("Ordered maps must not include duplicate keys");s.set(r,a)}return s}static from(e,t,s){const i=es(e,t,s),r=new this;return r.items=i.items,r}}Xe.tag="tag:yaml.org,2002:omap";const un={collection:"seq",identify:n=>n instanceof Map,nodeClass:Xe,default:!1,tag:"tag:yaml.org,2002:omap",resolve(n,e){const t=Xn(n,e),s=[];for(const{key:i}of t.items)re(i)&&(s.includes(i.value)?e(`Ordered maps must not include duplicate keys: ${i.value}`):s.push(i.value));return Object.assign(new Xe,t)},createNode:(n,e,t)=>Xe.from(n,e,t)};function ts({value:n,source:e},t){return e&&(n?ns:ss).test.test(e)?e:n?t.options.trueStr:t.options.falseStr}const ns={identify:n=>n===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new ee(!0),stringify:ts},ss={identify:n=>n===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>new ee(!1),stringify:ts},ui={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:n=>n.slice(-3).toLowerCase()==="nan"?NaN:n[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Ae},fi={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:n=>parseFloat(n.replace(/_/g,"")),stringify(n){const e=Number(n.value);return isFinite(e)?e.toExponential():Ae(n)}},hi={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(n){const e=new ee(parseFloat(n.replace(/_/g,""))),t=n.indexOf(".");if(t!==-1){const s=n.substring(t+1).replace(/_/g,"");s[s.length-1]==="0"&&(e.minFractionDigits=s.length)}return e},stringify:Ae},ut=n=>typeof n=="bigint"||Number.isInteger(n);function Pt(n,e,t,{intAsBigInt:s}){const i=n[0];if((i==="-"||i==="+")&&(e+=1),n=n.substring(e).replace(/_/g,""),s){switch(t){case 2:n=`0b${n}`;break;case 8:n=`0o${n}`;break;case 16:n=`0x${n}`;break}const a=BigInt(n);return i==="-"?BigInt(-1)*a:a}const r=parseInt(n,t);return i==="-"?-1*r:r}function fn(n,e,t){const{value:s}=n;if(ut(s)){const i=s.toString(e);return s<0?"-"+t+i.substr(1):t+i}return Ae(n)}const di={identify:ut,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(n,e,t)=>Pt(n,2,2,t),stringify:n=>fn(n,2,"0b")},pi={identify:ut,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(n,e,t)=>Pt(n,1,8,t),stringify:n=>fn(n,8,"0")},mi={identify:ut,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(n,e,t)=>Pt(n,0,10,t),stringify:Ae},gi={identify:ut,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(n,e,t)=>Pt(n,2,16,t),stringify:n=>fn(n,16,"0x")};class et extends be{constructor(e){super(e),this.tag=et.tag}add(e){let t;oe(e)?t=e:e&&typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?t=new pe(e.key,null):t=new pe(e,null),$e(this.items,t.key)||this.items.push(t)}get(e,t){const s=$e(this.items,e);return!t&&oe(s)?re(s.key)?s.key.value:s.key:s}set(e,t){if(typeof t!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof t}`);const s=$e(this.items,e);s&&!t?this.items.splice(this.items.indexOf(s),1):!s&&t&&this.items.push(new pe(e))}toJSON(e,t){return super.toJSON(e,t,Set)}toString(e,t,s){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),t,s);throw new Error("Set items must all have null values")}static from(e,t,s){const{replacer:i}=s,r=new this(e);if(t&&Symbol.iterator in Object(t))for(let a of t)typeof i=="function"&&(a=i.call(t,a,a)),r.items.push(rn(a,null,s));return r}}et.tag="tag:yaml.org,2002:set";const hn={collection:"map",identify:n=>n instanceof Set,nodeClass:et,default:!1,tag:"tag:yaml.org,2002:set",createNode:(n,e,t)=>et.from(n,e,t),resolve(n,e){if(We(n)){if(n.hasAllNullValues(!0))return Object.assign(new et,n);e("Set items must all have null values")}else e("Expected a mapping for this tag");return n}};function dn(n,e){const t=n[0],s=t==="-"||t==="+"?n.substring(1):n,i=a=>e?BigInt(a):Number(a),r=s.replace(/_/g,"").split(":").reduce((a,o)=>a*i(60)+i(o),i(0));return t==="-"?i(-1)*r:r}function is(n){let{value:e}=n,t=a=>a;if(typeof e=="bigint")t=a=>BigInt(a);else if(isNaN(e)||!isFinite(e))return Ae(n);let s="";e<0&&(s="-",e*=t(-1));const i=t(60),r=[e%i];return e<60?r.unshift(0):(e=(e-r[0])/i,r.unshift(e%i),e>=60&&(e=(e-r[0])/i,r.unshift(e))),s+r.map(a=>String(a).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const rs={identify:n=>typeof n=="bigint"||Number.isInteger(n),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(n,e,{intAsBigInt:t})=>dn(n,t),stringify:is},as={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:n=>dn(n,!1),stringify:is},Dt={identify:n=>n instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(n){const e=n.match(Dt.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,t,s,i,r,a,o]=e.map(Number),l=e[7]?Number((e[7]+"00").substr(1,3)):0;let h=Date.UTC(t,s-1,i,r||0,a||0,o||0,l);const b=e[8];if(b&&b!=="Z"){let g=dn(b,!1);Math.abs(g)<30&&(g*=60),h-=6e4*g}return new Date(h)},stringify:({value:n})=>n.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")},os=[Je,Qe,Lt,xt,ns,ss,di,pi,mi,gi,ui,fi,hi,ln,un,cn,hn,rs,as,Dt],ls=new Map([["core",ai],["failsafe",[Je,Qe,Lt]],["json",ci],["yaml11",os],["yaml-1.1",os]]),cs={binary:ln,bool:an,float:Zn,floatExp:Vn,floatNaN:qn,floatTime:as,int:Yn,intHex:Jn,intOct:Hn,intTime:rs,map:Je,null:xt,omap:un,pairs:cn,seq:Qe,set:hn,timestamp:Dt},yi={"tag:yaml.org,2002:binary":ln,"tag:yaml.org,2002:omap":un,"tag:yaml.org,2002:pairs":cn,"tag:yaml.org,2002:set":hn,"tag:yaml.org,2002:timestamp":Dt};function pn(n,e){let t=ls.get(e);if(!t)if(Array.isArray(n))t=[];else{const s=Array.from(ls.keys()).filter(i=>i!=="yaml11").map(i=>JSON.stringify(i)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${s} or define customTags array`)}if(Array.isArray(n))for(const s of n)t=t.concat(s);else typeof n=="function"&&(t=n(t.slice()));return t.map(s=>{if(typeof s!="string")return s;const i=cs[s];if(i)return i;const r=Object.keys(cs).map(a=>JSON.stringify(a)).join(", ");throw new Error(`Unknown custom tag "${s}"; use one of ${r}`)})}const _i=(n,e)=>n.key<e.key?-1:n.key>e.key?1:0;class Rt{constructor({compat:e,customTags:t,merge:s,resolveKnownTags:i,schema:r,sortMapEntries:a,toStringDefaults:o}){this.compat=Array.isArray(e)?pn(e,"compat"):e?pn(null,e):null,this.merge=!!s,this.name=typeof r=="string"&&r||"core",this.knownTags=i?yi:{},this.tags=pn(t,this.name),this.toStringOptions=o!=null?o:null,Object.defineProperty(this,ze,{value:Je}),Object.defineProperty(this,Le,{value:Lt}),Object.defineProperty(this,Ue,{value:Qe}),this.sortMapEntries=typeof a=="function"?a:a===!0?_i:null}clone(){const e=Object.create(Rt.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}function bi(n,e){var l;const t=[];let s=e.directives===!0;if(e.directives!==!1&&n.directives){const h=n.directives.toString(n);h?(t.push(h),s=!0):n.directives.docStart&&(s=!0)}s&&t.push("---");const i=Mn(n,e),{commentString:r}=i.options;if(n.commentBefore){t.length!==1&&t.unshift("");const h=r(n.commentBefore);t.unshift(xe(h,""))}let a=!1,o=null;if(n.contents){if(ce(n.contents)){if(n.contents.spaceBefore&&s&&t.push(""),n.contents.commentBefore){const g=r(n.contents.commentBefore);t.push(xe(g,""))}i.forceBlockIndent=!!n.comment,o=n.contents.comment}const h=o?void 0:()=>a=!0;let b=Ye(n.contents,i,()=>o=null,h);o&&(b+=De(b,"",r(o))),(b[0]==="|"||b[0]===">")&&t[t.length-1]==="---"?t[t.length-1]=`--- ${b}`:t.push(b)}else t.push(Ye(n.contents,i));if((l=n.directives)!=null&&l.docEnd)if(n.comment){const h=r(n.comment);h.includes(`
`)?(t.push("..."),t.push(xe(h,""))):t.push(`... ${h}`)}else t.push("...");else{let h=n.comment;h&&a&&(h=h.replace(/^\n+/,"")),h&&((!a||o)&&t[t.length-1]!==""&&t.push(""),t.push(xe(r(h),"")))}return t.join(`
`)+`
`}class tt{constructor(e,t,s){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,we,{value:Qt});let i=null;typeof t=="function"||Array.isArray(t)?i=t:s===void 0&&t&&(s=t,t=void 0);const r=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,uniqueKeys:!0,version:"1.2"},s);this.options=r;let{version:a}=r;s!=null&&s._directives?(this.directives=s._directives.atDocument(),this.directives.yaml.explicit&&(a=this.directives.yaml.version)):this.directives=new ye({version:a}),this.setSchema(a,s),this.contents=e===void 0?null:this.createNode(e,i,s)}clone(){const e=Object.create(tt.prototype,{[we]:{value:Qt}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=ce(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){nt(this.contents)&&this.contents.add(e)}addIn(e,t){nt(this.contents)&&this.contents.addIn(e,t)}createAlias(e,t){if(!e.anchor){const s=Pn(this);e.anchor=!t||s.has(t)?Dn(t||"a",s):t}return new wt(e.anchor)}createNode(e,t,s){let i;if(typeof t=="function")e=t.call({"":e},"",e),i=t;else if(Array.isArray(t)){const m=w=>typeof w=="number"||w instanceof String||w instanceof Number,p=t.filter(m).map(String);p.length>0&&(t=t.concat(p)),i=t}else s===void 0&&t&&(s=t,t=void 0);const{aliasDuplicateObjects:r,anchorPrefix:a,flow:o,keepUndefined:l,onTagObj:h,tag:b}=s!=null?s:{},{onAnchor:g,setAnchors:_,sourceObjects:u}=Zs(this,a||"a"),y={aliasDuplicateObjects:r!=null?r:!0,keepUndefined:l!=null?l:!1,onAnchor:g,onTagObj:h,replacer:i,schema:this.schema,sourceObjects:u},f=at(e,b,y);return o&&le(f)&&(f.flow=!0),_(),f}createPair(e,t,s={}){const i=this.createNode(e,null,s),r=this.createNode(t,null,s);return new pe(i,r)}delete(e){return nt(this.contents)?this.contents.delete(e):!1}deleteIn(e){return ot(e)?this.contents==null?!1:(this.contents=null,!0):nt(this.contents)?this.contents.deleteIn(e):!1}get(e,t){return le(this.contents)?this.contents.get(e,t):void 0}getIn(e,t){return ot(e)?!t&&re(this.contents)?this.contents.value:this.contents:le(this.contents)?this.contents.getIn(e,t):void 0}has(e){return le(this.contents)?this.contents.has(e):!1}hasIn(e){return ot(e)?this.contents!==void 0:le(this.contents)?this.contents.hasIn(e):!1}set(e,t){this.contents==null?this.contents=kt(this.schema,[e],t):nt(this.contents)&&this.contents.set(e,t)}setIn(e,t){ot(e)?this.contents=t:this.contents==null?this.contents=kt(this.schema,Array.from(e),t):nt(this.contents)&&this.contents.setIn(e,t)}setSchema(e,t={}){typeof e=="number"&&(e=String(e));let s;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new ye({version:"1.1"}),s={merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new ye({version:e}),s={merge:!1,resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,s=null;break;default:{const i=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${i}`)}}if(t.schema instanceof Object)this.schema=t.schema;else if(s)this.schema=new Rt(Object.assign(s,t));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:t,mapAsMap:s,maxAliasCount:i,onAnchor:r,reviver:a}={}){const o={anchors:new Map,doc:this,keep:!e,mapAsMap:s===!0,mapKeyWarned:!1,maxAliasCount:typeof i=="number"?i:100},l=ve(this.contents,t!=null?t:"",o);if(typeof r=="function")for(const{count:h,res:b}of o.anchors.values())r(b,h);return typeof a=="function"?Ge(a,{"":l},"",l):l}toJSON(e,t){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:t})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const t=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${t}`)}return bi(this,e)}}function nt(n){if(le(n))return!0;throw new Error("Expected a YAML collection as document contents")}class mn extends Error{constructor(e,t,s,i){super(),this.name=e,this.code=s,this.message=i,this.pos=t}}class Me extends mn{constructor(e,t,s){super("YAMLParseError",e,t,s)}}class us extends mn{constructor(e,t,s){super("YAMLWarning",e,t,s)}}const Ft=(n,e)=>t=>{if(t.pos[0]===-1)return;t.linePos=t.pos.map(o=>e.linePos(o));const{line:s,col:i}=t.linePos[0];t.message+=` at line ${s}, column ${i}`;let r=i-1,a=n.substring(e.lineStarts[s-1],e.lineStarts[s]).replace(/[\n\r]+$/,"");if(r>=60&&a.length>80){const o=Math.min(r-39,a.length-79);a="\u2026"+a.substring(o),r-=o-1}if(a.length>80&&(a=a.substring(0,79)+"\u2026"),s>1&&/^ *$/.test(a.substring(0,r))){let o=n.substring(e.lineStarts[s-2],e.lineStarts[s-1]);o.length>80&&(o=o.substring(0,79)+`\u2026
`),a=o+a}if(/[^ ]/.test(a)){let o=1;const l=t.linePos[1];l&&l.line===s&&l.col>i&&(o=Math.max(1,Math.min(l.col-i,80-r)));const h=" ".repeat(r)+"^".repeat(o);t.message+=`:

${a}
${h}
`}};function st(n,{flow:e,indicator:t,next:s,offset:i,onError:r,startOnNewline:a}){let o=!1,l=a,h=a,b="",g="",_=!1,u=!1,y=!1,f=null,m=null,p=null,w=null,S=null;for(const C of n)switch(y&&(C.type!=="space"&&C.type!=="newline"&&C.type!=="comma"&&r(C.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),y=!1),C.type){case"space":!e&&l&&t!=="doc-start"&&C.source[0]==="	"&&r(C,"TAB_AS_INDENT","Tabs are not allowed as indentation"),h=!0;break;case"comment":{h||r(C,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const x=C.source.substring(1)||" ";b?b+=g+x:b=x,g="",l=!1;break}case"newline":l?b?b+=C.source:o=!0:g+=C.source,l=!0,_=!0,(f||m)&&(u=!0),h=!0;break;case"anchor":f&&r(C,"MULTIPLE_ANCHORS","A node can have at most one anchor"),C.source.endsWith(":")&&r(C.offset+C.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),f=C,S===null&&(S=C.offset),l=!1,h=!1,y=!0;break;case"tag":{m&&r(C,"MULTIPLE_TAGS","A node can have at most one tag"),m=C,S===null&&(S=C.offset),l=!1,h=!1,y=!0;break}case t:(f||m)&&r(C,"BAD_PROP_ORDER",`Anchors and tags must be after the ${C.source} indicator`),w&&r(C,"UNEXPECTED_TOKEN",`Unexpected ${C.source} in ${e!=null?e:"collection"}`),w=C,l=!1,h=!1;break;case"comma":if(e){p&&r(C,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),p=C,l=!1,h=!1;break}default:r(C,"UNEXPECTED_TOKEN",`Unexpected ${C.type} token`),l=!1,h=!1}const O=n[n.length-1],E=O?O.offset+O.source.length:i;return y&&s&&s.type!=="space"&&s.type!=="newline"&&s.type!=="comma"&&(s.type!=="scalar"||s.source!=="")&&r(s.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),{comma:p,found:w,spaceBefore:o,comment:b,hasNewline:_,hasNewlineAfterProp:u,anchor:f,tag:m,end:E,start:S!=null?S:E}}function ft(n){if(!n)return null;switch(n.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(n.source.includes(`
`))return!0;if(n.end){for(const e of n.end)if(e.type==="newline")return!0}return!1;case"flow-collection":for(const e of n.items){for(const t of e.start)if(t.type==="newline")return!0;if(e.sep){for(const t of e.sep)if(t.type==="newline")return!0}if(ft(e.key)||ft(e.value))return!0}return!1;default:return!0}}function gn(n,e,t){if((e==null?void 0:e.type)==="flow-collection"){const s=e.end[0];s.indent===n&&(s.source==="]"||s.source==="}")&&ft(e)&&t(s,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function fs(n,e,t){const{uniqueKeys:s}=n.options;if(s===!1)return!1;const i=typeof s=="function"?s:(r,a)=>r===a||re(r)&&re(a)&&r.value===a.value&&!(r.value==="<<"&&n.schema.merge);return e.some(r=>i(r.key,t))}const hs="All mapping items must start at the same column";function wi({composeNode:n,composeEmptyNode:e},t,s,i,r){var b,g;const a=(b=r==null?void 0:r.nodeClass)!=null?b:be,o=new a(t.schema);t.atRoot&&(t.atRoot=!1);let l=s.offset,h=null;for(const _ of s.items){const{start:u,key:y,sep:f,value:m}=_,p=st(u,{indicator:"explicit-key-ind",next:y!=null?y:f==null?void 0:f[0],offset:l,onError:i,startOnNewline:!0}),w=!p.found;if(w){if(y&&(y.type==="block-seq"?i(l,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in y&&y.indent!==s.indent&&i(l,"BAD_INDENT",hs)),!p.anchor&&!p.tag&&!f){h=p.end,p.comment&&(o.comment?o.comment+=`
`+p.comment:o.comment=p.comment);continue}(p.hasNewlineAfterProp||ft(y))&&i(y!=null?y:u[u.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else((g=p.found)==null?void 0:g.indent)!==s.indent&&i(l,"BAD_INDENT",hs);const S=p.end,O=y?n(t,y,p,i):e(t,S,u,null,p,i);t.schema.compat&&gn(s.indent,y,i),fs(t,o.items,O)&&i(S,"DUPLICATE_KEY","Map keys must be unique");const E=st(f!=null?f:[],{indicator:"map-value-ind",next:m,offset:O.range[2],onError:i,startOnNewline:!y||y.type==="block-scalar"});if(l=E.end,E.found){w&&((m==null?void 0:m.type)==="block-map"&&!E.hasNewline&&i(l,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),t.options.strict&&p.start<E.found.offset-1024&&i(O.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const C=m?n(t,m,E,i):e(t,l,f,null,E,i);t.schema.compat&&gn(s.indent,m,i),l=C.range[2];const x=new pe(O,C);t.options.keepSourceTokens&&(x.srcToken=_),o.items.push(x)}else{w&&i(O.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),E.comment&&(O.comment?O.comment+=`
`+E.comment:O.comment=E.comment);const C=new pe(O);t.options.keepSourceTokens&&(C.srcToken=_),o.items.push(C)}}return h&&h<l&&i(h,"IMPOSSIBLE","Map comment with trailing content"),o.range=[s.offset,l,h!=null?h:l],o}function vi({composeNode:n,composeEmptyNode:e},t,s,i,r){var b;const a=(b=r==null?void 0:r.nodeClass)!=null?b:Re,o=new a(t.schema);t.atRoot&&(t.atRoot=!1);let l=s.offset,h=null;for(const{start:g,value:_}of s.items){const u=st(g,{indicator:"seq-item-ind",next:_,offset:l,onError:i,startOnNewline:!0});if(!u.found)if(u.anchor||u.tag||_)_&&_.type==="block-seq"?i(u.end,"BAD_INDENT","All sequence items must start at the same column"):i(l,"MISSING_CHAR","Sequence item without - indicator");else{h=u.end,u.comment&&(o.comment=u.comment);continue}const y=_?n(t,_,u,i):e(t,u.end,g,null,u,i);t.schema.compat&&gn(s.indent,_,i),l=y.range[2],o.items.push(y)}return o.range=[s.offset,l,h!=null?h:l],o}function ht(n,e,t,s){let i="";if(n){let r=!1,a="";for(const o of n){const{source:l,type:h}=o;switch(h){case"space":r=!0;break;case"comment":{t&&!r&&s(o,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const b=l.substring(1)||" ";i?i+=a+b:i=b,a="";break}case"newline":i&&(a+=l),r=!0;break;default:s(o,"UNEXPECTED_TOKEN",`Unexpected ${h} at node end`)}e+=l.length}}return{comment:i,offset:e}}const yn="Block collections are not allowed within flow collections",_n=n=>n&&(n.type==="block-map"||n.type==="block-seq");function ki({composeNode:n,composeEmptyNode:e},t,s,i,r){var m,p;const a=s.start.source==="{",o=a?"flow map":"flow sequence",l=(m=r==null?void 0:r.nodeClass)!=null?m:a?be:Re,h=new l(t.schema);h.flow=!0;const b=t.atRoot;b&&(t.atRoot=!1);let g=s.offset+s.start.source.length;for(let w=0;w<s.items.length;++w){const S=s.items[w],{start:O,key:E,sep:C,value:x}=S,D=st(O,{flow:o,indicator:"explicit-key-ind",next:E!=null?E:C==null?void 0:C[0],offset:g,onError:i,startOnNewline:!1});if(!D.found){if(!D.anchor&&!D.tag&&!C&&!x){w===0&&D.comma?i(D.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${o}`):w<s.items.length-1&&i(D.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${o}`),D.comment&&(h.comment?h.comment+=`
`+D.comment:h.comment=D.comment),g=D.end;continue}!a&&t.options.strict&&ft(E)&&i(E,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(w===0)D.comma&&i(D.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${o}`);else if(D.comma||i(D.start,"MISSING_CHAR",`Missing , between ${o} items`),D.comment){let T="";e:for(const $ of O)switch($.type){case"comma":case"space":break;case"comment":T=$.source.substring(1);break e;default:break e}if(T){let $=h.items[h.items.length-1];oe($)&&($=(p=$.value)!=null?p:$.key),$.comment?$.comment+=`
`+T:$.comment=T,D.comment=D.comment.substring(T.length+1)}}if(!a&&!C&&!D.found){const T=x?n(t,x,D,i):e(t,D.end,C,null,D,i);h.items.push(T),g=T.range[2],_n(x)&&i(T.range,"BLOCK_IN_FLOW",yn)}else{const T=D.end,$=E?n(t,E,D,i):e(t,T,O,null,D,i);_n(E)&&i($.range,"BLOCK_IN_FLOW",yn);const Z=st(C!=null?C:[],{flow:o,indicator:"map-value-ind",next:x,offset:$.range[2],onError:i,startOnNewline:!1});if(Z.found){if(!a&&!D.found&&t.options.strict){if(C)for(const d of C){if(d===Z.found)break;if(d.type==="newline"){i(d,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}D.start<Z.found.offset-1024&&i(Z.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else x&&("source"in x&&x.source&&x.source[0]===":"?i(x,"MISSING_CHAR",`Missing space after : in ${o}`):i(Z.start,"MISSING_CHAR",`Missing , or : between ${o} items`));const A=x?n(t,x,Z,i):Z.found?e(t,Z.end,C,null,Z,i):null;A?_n(x)&&i(A.range,"BLOCK_IN_FLOW",yn):Z.comment&&($.comment?$.comment+=`
`+Z.comment:$.comment=Z.comment);const P=new pe($,A);if(t.options.keepSourceTokens&&(P.srcToken=S),a){const d=h;fs(t,d.items,$)&&i(T,"DUPLICATE_KEY","Map keys must be unique"),d.items.push(P)}else{const d=new be(t.schema);d.flow=!0,d.items.push(P),h.items.push(d)}g=A?A.range[2]:Z.end}}const _=a?"}":"]",[u,...y]=s.end;let f=g;if(u&&u.source===_)f=u.offset+u.source.length;else{const w=o[0].toUpperCase()+o.substring(1),S=b?`${w} must end with a ${_}`:`${w} in block collection must be sufficiently indented and end with a ${_}`;i(g,b?"MISSING_CHAR":"BAD_INDENT",S),u&&u.source.length!==1&&y.unshift(u)}if(y.length>0){const w=ht(y,f,t.options.strict,i);w.comment&&(h.comment?h.comment+=`
`+w.comment:h.comment=w.comment),h.range=[s.offset,f,w.offset]}else h.range=[s.offset,f,f];return h}function bn(n,e,t,s,i,r){const a=t.type==="block-map"?wi(n,e,t,s,r):t.type==="block-seq"?vi(n,e,t,s,r):ki(n,e,t,s,r),o=a.constructor;return i==="!"||i===o.tagName?(a.tag=o.tagName,a):(i&&(a.tag=i),a)}function Si(n,e,t,s,i){var g,_;const r=s?e.directives.tagName(s.source,u=>i(s,"TAG_RESOLVE_FAILED",u)):null,a=t.type==="block-map"?"map":t.type==="block-seq"?"seq":t.start.source==="{"?"map":"seq";if(!s||!r||r==="!"||r===be.tagName&&a==="map"||r===Re.tagName&&a==="seq"||!a)return bn(n,e,t,i,r);let o=e.schema.tags.find(u=>u.tag===r&&u.collection===a);if(!o){const u=e.schema.knownTags[r];if(u&&u.collection===a)e.schema.tags.push(Object.assign({},u,{default:!1})),o=u;else return u!=null&&u.collection?i(s,"BAD_COLLECTION_TYPE",`${u.tag} used for ${a} collection, but expects ${u.collection}`,!0):i(s,"TAG_RESOLVE_FAILED",`Unresolved tag: ${r}`,!0),bn(n,e,t,i,r)}const l=bn(n,e,t,i,r,o),h=(_=(g=o.resolve)==null?void 0:g.call(o,l,u=>i(s,"TAG_RESOLVE_FAILED",u),e.options))!=null?_:l,b=ce(h)?h:new ee(h);return b.range=l.range,b.tag=r,o!=null&&o.format&&(b.format=o.format),b}function ds(n,e,t){const s=n.offset,i=Ai(n,e,t);if(!i)return{value:"",type:null,comment:"",range:[s,s,s]};const r=i.mode===">"?ee.BLOCK_FOLDED:ee.BLOCK_LITERAL,a=n.source?Ei(n.source):[];let o=a.length;for(let f=a.length-1;f>=0;--f){const m=a[f][1];if(m===""||m==="\r")o=f;else break}if(o===0){const f=i.chomp==="+"&&a.length>0?`
`.repeat(Math.max(1,a.length-1)):"";let m=s+i.length;return n.source&&(m+=n.source.length),{value:f,type:r,comment:i.comment,range:[s,m,m]}}let l=n.indent+i.indent,h=n.offset+i.length,b=0;for(let f=0;f<o;++f){const[m,p]=a[f];if(p===""||p==="\r")i.indent===0&&m.length>l&&(l=m.length);else{if(m.length<l){const w="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";t(h+m.length,"MISSING_CHAR",w)}i.indent===0&&(l=m.length),b=f;break}h+=m.length+p.length+1}for(let f=a.length-1;f>=o;--f)a[f][0].length>l&&(o=f+1);let g="",_="",u=!1;for(let f=0;f<b;++f)g+=a[f][0].slice(l)+`
`;for(let f=b;f<o;++f){let[m,p]=a[f];h+=m.length+p.length+1;const w=p[p.length-1]==="\r";if(w&&(p=p.slice(0,-1)),p&&m.length<l){const O=`Block scalar lines must not be less indented than their ${i.indent?"explicit indentation indicator":"first line"}`;t(h-p.length-(w?2:1),"BAD_INDENT",O),m=""}r===ee.BLOCK_LITERAL?(g+=_+m.slice(l)+p,_=`
`):m.length>l||p[0]==="	"?(_===" "?_=`
`:!u&&_===`
`&&(_=`

`),g+=_+m.slice(l)+p,_=`
`,u=!0):p===""?_===`
`?g+=`
`:_=`
`:(g+=_+p,_=" ",u=!1)}switch(i.chomp){case"-":break;case"+":for(let f=o;f<a.length;++f)g+=`
`+a[f][0].slice(l);g[g.length-1]!==`
`&&(g+=`
`);break;default:g+=`
`}const y=s+i.length+n.source.length;return{value:g,type:r,comment:i.comment,range:[s,y,y]}}function Ai({offset:n,props:e},t,s){if(e[0].type!=="block-scalar-header")return s(e[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:i}=e[0],r=i[0];let a=0,o="",l=-1;for(let _=1;_<i.length;++_){const u=i[_];if(!o&&(u==="-"||u==="+"))o=u;else{const y=Number(u);!a&&y?a=y:l===-1&&(l=n+_)}}l!==-1&&s(l,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${i}`);let h=!1,b="",g=i.length;for(let _=1;_<e.length;++_){const u=e[_];switch(u.type){case"space":h=!0;case"newline":g+=u.source.length;break;case"comment":t&&!h&&s(u,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),g+=u.source.length,b=u.source.substring(1);break;case"error":s(u,"UNEXPECTED_TOKEN",u.message),g+=u.source.length;break;default:{const y=`Unexpected token in block scalar header: ${u.type}`;s(u,"UNEXPECTED_TOKEN",y);const f=u.source;f&&typeof f=="string"&&(g+=f.length)}}}return{mode:r,indent:a,chomp:o,comment:b,length:g}}function Ei(n){const e=n.split(/\n( *)/),t=e[0],s=t.match(/^( *)/),r=[s!=null&&s[1]?[s[1],t.slice(s[1].length)]:["",t]];for(let a=1;a<e.length;a+=2)r.push([e[a],e[a+1]]);return r}function ps(n,e,t){const{offset:s,type:i,source:r,end:a}=n;let o,l;const h=(_,u,y)=>t(s+_,u,y);switch(i){case"scalar":o=ee.PLAIN,l=Oi(r,h);break;case"single-quoted-scalar":o=ee.QUOTE_SINGLE,l=Ci(r,h);break;case"double-quoted-scalar":o=ee.QUOTE_DOUBLE,l=Ii(r,h);break;default:return t(n,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${i}`),{value:"",type:null,comment:"",range:[s,s+r.length,s+r.length]}}const b=s+r.length,g=ht(a,b,e,t);return{value:l,type:o,comment:g.comment,range:[s,b,g.offset]}}function Oi(n,e){let t="";switch(n[0]){case"	":t="a tab character";break;case",":t="flow indicator character ,";break;case"%":t="directive indicator character %";break;case"|":case">":{t=`block scalar indicator ${n[0]}`;break}case"@":case"`":{t=`reserved character ${n[0]}`;break}}return t&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${t}`),ms(n)}function Ci(n,e){return(n[n.length-1]!=="'"||n.length===1)&&e(n.length,"MISSING_CHAR","Missing closing 'quote"),ms(n.slice(1,-1)).replace(/''/g,"'")}function ms(n){var l;let e,t;try{e=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),t=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{e=/(.*?)[ \t]*\r?\n/sy,t=/[ \t]*(.*?)[ \t]*\r?\n/sy}let s=e.exec(n);if(!s)return n;let i=s[1],r=" ",a=e.lastIndex;for(t.lastIndex=a;s=t.exec(n);)s[1]===""?r===`
`?i+=r:r=`
`:(i+=r+s[1],r=" "),a=t.lastIndex;const o=/[ \t]*(.*)/sy;return o.lastIndex=a,s=o.exec(n),i+r+((l=s==null?void 0:s[1])!=null?l:"")}function Ii(n,e){let t="";for(let s=1;s<n.length-1;++s){const i=n[s];if(!(i==="\r"&&n[s+1]===`
`))if(i===`
`){const{fold:r,offset:a}=Ni(n,s);t+=r,s=a}else if(i==="\\"){let r=n[++s];const a=Ti[r];if(a)t+=a;else if(r===`
`)for(r=n[s+1];r===" "||r==="	";)r=n[++s+1];else if(r==="\r"&&n[s+1]===`
`)for(r=n[++s+1];r===" "||r==="	";)r=n[++s+1];else if(r==="x"||r==="u"||r==="U"){const o={x:2,u:4,U:8}[r];t+=Li(n,s+1,o,e),s+=o}else{const o=n.substr(s-1,2);e(s-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${o}`),t+=o}}else if(i===" "||i==="	"){const r=s;let a=n[s+1];for(;a===" "||a==="	";)a=n[++s+1];a!==`
`&&!(a==="\r"&&n[s+2]===`
`)&&(t+=s>r?n.slice(r,s+1):i)}else t+=i}return(n[n.length-1]!=='"'||n.length===1)&&e(n.length,"MISSING_CHAR",'Missing closing "quote'),t}function Ni(n,e){let t="",s=n[e+1];for(;(s===" "||s==="	"||s===`
`||s==="\r")&&!(s==="\r"&&n[e+2]!==`
`);)s===`
`&&(t+=`
`),e+=1,s=n[e+1];return t||(t=" "),{fold:t,offset:e}}const Ti={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"\x85",_:"\xA0",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function Li(n,e,t,s){const i=n.substr(e,t),a=i.length===t&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;if(isNaN(a)){const o=n.substr(e-2,t+2);return s(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${o}`),o}return String.fromCodePoint(a)}function gs(n,e,t,s){const{value:i,type:r,comment:a,range:o}=e.type==="block-scalar"?ds(e,n.options.strict,s):ps(e,n.options.strict,s),l=t?n.directives.tagName(t.source,g=>s(t,"TAG_RESOLVE_FAILED",g)):null,h=t&&l?xi(n.schema,i,l,t,s):e.type==="scalar"?Bi(n,i,e,s):n.schema[Le];let b;try{const g=h.resolve(i,_=>s(t!=null?t:e,"TAG_RESOLVE_FAILED",_),n.options);b=re(g)?g:new ee(g)}catch(g){const _=g instanceof Error?g.message:String(g);s(t!=null?t:e,"TAG_RESOLVE_FAILED",_),b=new ee(i)}return b.range=o,b.source=i,r&&(b.type=r),l&&(b.tag=l),h.format&&(b.format=h.format),a&&(b.comment=a),b}function xi(n,e,t,s,i){var o;if(t==="!")return n[Le];const r=[];for(const l of n.tags)if(!l.collection&&l.tag===t)if(l.default&&l.test)r.push(l);else return l;for(const l of r)if((o=l.test)!=null&&o.test(e))return l;const a=n.knownTags[t];return a&&!a.collection?(n.tags.push(Object.assign({},a,{default:!1,test:void 0})),a):(i(s,"TAG_RESOLVE_FAILED",`Unresolved tag: ${t}`,t!=="tag:yaml.org,2002:str"),n[Le])}function Bi({directives:n,schema:e},t,s,i){var a;const r=e.tags.find(o=>{var l;return o.default&&((l=o.test)==null?void 0:l.test(t))})||e[Le];if(e.compat){const o=(a=e.compat.find(l=>{var h;return l.default&&((h=l.test)==null?void 0:h.test(t))}))!=null?a:e[Le];if(r.tag!==o.tag){const l=n.tagString(r.tag),h=n.tagString(o.tag),b=`Value may be parsed as either ${l} or ${h}`;i(s,"TAG_RESOLVE_FAILED",b,!0)}}return r}function zi(n,e,t){if(e){t===null&&(t=e.length);for(let s=t-1;s>=0;--s){let i=e[s];switch(i.type){case"space":case"comment":case"newline":n-=i.source.length;continue}for(i=e[++s];(i==null?void 0:i.type)==="space";)n+=i.source.length,i=e[++s];break}}return n}const Pi={composeNode:ys,composeEmptyNode:wn};function ys(n,e,t,s){const{spaceBefore:i,comment:r,anchor:a,tag:o}=t;let l,h=!0;switch(e.type){case"alias":l=Di(n,e,s),(a||o)&&s(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":l=gs(n,e,o,s),a&&(l.anchor=a.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":l=Si(Pi,n,e,o,s),a&&(l.anchor=a.source.substring(1));break;default:{const b=e.type==="error"?e.message:`Unsupported token (type: ${e.type})`;s(e,"UNEXPECTED_TOKEN",b),l=wn(n,e.offset,void 0,null,t,s),h=!1}}return a&&l.anchor===""&&s(a,"BAD_ALIAS","Anchor cannot be an empty string"),i&&(l.spaceBefore=!0),r&&(e.type==="scalar"&&e.source===""?l.comment=r:l.commentBefore=r),n.options.keepSourceTokens&&h&&(l.srcToken=e),l}function wn(n,e,t,s,{spaceBefore:i,comment:r,anchor:a,tag:o,end:l},h){const b={type:"scalar",offset:zi(e,t,s),indent:-1,source:""},g=gs(n,b,o,h);return a&&(g.anchor=a.source.substring(1),g.anchor===""&&h(a,"BAD_ALIAS","Anchor cannot be an empty string")),i&&(g.spaceBefore=!0),r&&(g.comment=r,g.range[2]=l),g}function Di({options:n},{offset:e,source:t,end:s},i){const r=new wt(t.substring(1));r.source===""&&i(e,"BAD_ALIAS","Alias cannot be an empty string"),r.source.endsWith(":")&&i(e+t.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const a=e+t.length,o=ht(s,a,n.strict,i);return r.range=[e,a,o.offset],o.comment&&(r.comment=o.comment),r}function Ri(n,e,{offset:t,start:s,value:i,end:r},a){const o=Object.assign({_directives:e},n),l=new tt(void 0,o),h={atRoot:!0,directives:l.directives,options:l.options,schema:l.schema},b=st(s,{indicator:"doc-start",next:i!=null?i:r==null?void 0:r[0],offset:t,onError:a,startOnNewline:!0});b.found&&(l.directives.docStart=!0,i&&(i.type==="block-map"||i.type==="block-seq")&&!b.hasNewline&&a(b.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),l.contents=i?ys(h,i,b,a):wn(h,b.end,s,null,b,a);const g=l.contents.range[2],_=ht(r,g,!1,a);return _.comment&&(l.comment=_.comment),l.range=[t,g,_.offset],l}function dt(n){if(typeof n=="number")return[n,n+1];if(Array.isArray(n))return n.length===2?n:[n[0],n[1]];const{offset:e,source:t}=n;return[e,e+(typeof t=="string"?t.length:1)]}function _s(n){var i;let e="",t=!1,s=!1;for(let r=0;r<n.length;++r){const a=n[r];switch(a[0]){case"#":e+=(e===""?"":s?`

`:`
`)+(a.substring(1)||" "),t=!0,s=!1;break;case"%":((i=n[r+1])==null?void 0:i[0])!=="#"&&(r+=1),t=!1;break;default:t||(s=!0),t=!1}}return{comment:e,afterEmptyLine:s}}class vn{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(t,s,i,r)=>{const a=dt(t);r?this.warnings.push(new us(a,s,i)):this.errors.push(new Me(a,s,i))},this.directives=new ye({version:e.version||"1.2"}),this.options=e}decorate(e,t){const{comment:s,afterEmptyLine:i}=_s(this.prelude);if(s){const r=e.contents;if(t)e.comment=e.comment?`${e.comment}
${s}`:s;else if(i||e.directives.docStart||!r)e.commentBefore=s;else if(le(r)&&!r.flow&&r.items.length>0){let a=r.items[0];oe(a)&&(a=a.key);const o=a.commentBefore;a.commentBefore=o?`${s}
${o}`:s}else{const a=r.commentBefore;r.commentBefore=a?`${s}
${a}`:s}}t?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:_s(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,t=!1,s=-1){for(const i of e)yield*this.next(i);yield*this.end(t,s)}*next(e){switch(e.type){case"directive":this.directives.add(e.source,(t,s,i)=>{const r=dt(e);r[0]+=t,this.onError(r,"BAD_DIRECTIVE",s,i)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{const t=Ri(this.options,this.directives,e,this.onError);this.atDirectives&&!t.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(t,!1),this.doc&&(yield this.doc),this.doc=t,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{const t=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,s=new Me(dt(e),"UNEXPECTED_TOKEN",t);this.atDirectives||!this.doc?this.errors.push(s):this.doc.errors.push(s);break}case"doc-end":{if(!this.doc){const s="Unexpected doc-end without preceding document";this.errors.push(new Me(dt(e),"UNEXPECTED_TOKEN",s));break}this.doc.directives.docEnd=!0;const t=ht(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),t.comment){const s=this.doc.comment;this.doc.comment=s?`${s}
${t.comment}`:t.comment}this.doc.range[2]=t.offset;break}default:this.errors.push(new Me(dt(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,t=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){const s=Object.assign({_directives:this.directives},this.options),i=new tt(void 0,s);this.atDirectives&&this.onError(t,"MISSING_CHAR","Missing directives-end indicator line"),i.range=[0,t,t],this.decorate(i,!1),yield i}}}function Fi(n,e=!0,t){if(n){const s=(i,r,a)=>{const o=typeof i=="number"?i:Array.isArray(i)?i[0]:i.offset;if(t)t(o,r,a);else throw new Me([o,o+1],r,a)};switch(n.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return ps(n,e,s);case"block-scalar":return ds(n,e,s)}}return null}function $i(n,e){var h;const{implicitKey:t=!1,indent:s,inFlow:i=!1,offset:r=-1,type:a="PLAIN"}=e,o=ct({type:a,value:n},{implicitKey:t,indent:s>0?" ".repeat(s):"",inFlow:i,options:{blockQuote:!0,lineWidth:-1}}),l=(h=e.end)!=null?h:[{type:"newline",offset:-1,indent:s,source:`
`}];switch(o[0]){case"|":case">":{const b=o.indexOf(`
`),g=o.substring(0,b),_=o.substring(b+1)+`
`,u=[{type:"block-scalar-header",offset:r,indent:s,source:g}];return bs(u,l)||u.push({type:"newline",offset:-1,indent:s,source:`
`}),{type:"block-scalar",offset:r,indent:s,props:u,source:_}}case'"':return{type:"double-quoted-scalar",offset:r,indent:s,source:o,end:l};case"'":return{type:"single-quoted-scalar",offset:r,indent:s,source:o,end:l};default:return{type:"scalar",offset:r,indent:s,source:o,end:l}}}function Mi(n,e,t={}){let{afterKey:s=!1,implicitKey:i=!1,inFlow:r=!1,type:a}=t,o="indent"in n?n.indent:null;if(s&&typeof o=="number"&&(o+=2),!a)switch(n.type){case"single-quoted-scalar":a="QUOTE_SINGLE";break;case"double-quoted-scalar":a="QUOTE_DOUBLE";break;case"block-scalar":{const h=n.props[0];if(h.type!=="block-scalar-header")throw new Error("Invalid block scalar header");a=h.source[0]===">"?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:a="PLAIN"}const l=ct({type:a,value:e},{implicitKey:i||o===null,indent:o!==null&&o>0?" ".repeat(o):"",inFlow:r,options:{blockQuote:!0,lineWidth:-1}});switch(l[0]){case"|":case">":ji(n,l);break;case'"':kn(n,l,"double-quoted-scalar");break;case"'":kn(n,l,"single-quoted-scalar");break;default:kn(n,l,"scalar")}}function ji(n,e){const t=e.indexOf(`
`),s=e.substring(0,t),i=e.substring(t+1)+`
`;if(n.type==="block-scalar"){const r=n.props[0];if(r.type!=="block-scalar-header")throw new Error("Invalid block scalar header");r.source=s,n.source=i}else{const{offset:r}=n,a="indent"in n?n.indent:-1,o=[{type:"block-scalar-header",offset:r,indent:a,source:s}];bs(o,"end"in n?n.end:void 0)||o.push({type:"newline",offset:-1,indent:a,source:`
`});for(const l of Object.keys(n))l!=="type"&&l!=="offset"&&delete n[l];Object.assign(n,{type:"block-scalar",indent:a,props:o,source:i})}}function bs(n,e){if(e)for(const t of e)switch(t.type){case"space":case"comment":n.push(t);break;case"newline":return n.push(t),!0}return!1}function kn(n,e,t){switch(n.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":n.type=t,n.source=e;break;case"block-scalar":{const s=n.props.slice(1);let i=e.length;n.props[0].type==="block-scalar-header"&&(i-=n.props[0].source.length);for(const r of s)r.offset+=i;delete n.props,Object.assign(n,{type:t,source:e,end:s});break}case"block-map":case"block-seq":{const s=n.offset+e.length,i={type:"newline",offset:s,indent:n.indent,source:`
`};delete n.items,Object.assign(n,{type:t,source:e,end:[i]});break}default:{const s="indent"in n?n.indent:-1,i="end"in n&&Array.isArray(n.end)?n.end.filter(r=>r.type==="space"||r.type==="comment"||r.type==="newline"):[];for(const r of Object.keys(n))r!=="type"&&r!=="offset"&&delete n[r];Object.assign(n,{type:t,indent:s,source:e,end:i})}}}const Ui=n=>"type"in n?$t(n):Mt(n);function $t(n){switch(n.type){case"block-scalar":{let e="";for(const t of n.props)e+=$t(t);return e+n.source}case"block-map":case"block-seq":{let e="";for(const t of n.items)e+=Mt(t);return e}case"flow-collection":{let e=n.start.source;for(const t of n.items)e+=Mt(t);for(const t of n.end)e+=t.source;return e}case"document":{let e=Mt(n);if(n.end)for(const t of n.end)e+=t.source;return e}default:{let e=n.source;if("end"in n&&n.end)for(const t of n.end)e+=t.source;return e}}}function Mt({start:n,key:e,sep:t,value:s}){let i="";for(const r of n)i+=r.source;if(e&&(i+=$t(e)),t)for(const r of t)i+=r.source;return s&&(i+=$t(s)),i}const Sn=Symbol("break visit"),Ki=Symbol("skip children"),ws=Symbol("remove item");function je(n,e){"type"in n&&n.type==="document"&&(n={start:n.start,value:n.value}),vs(Object.freeze([]),n,e)}je.BREAK=Sn,je.SKIP=Ki,je.REMOVE=ws,je.itemAtPath=(n,e)=>{let t=n;for(const[s,i]of e){const r=t==null?void 0:t[s];if(r&&"items"in r)t=r.items[i];else return}return t},je.parentCollection=(n,e)=>{const t=je.itemAtPath(n,e.slice(0,-1)),s=e[e.length-1][0],i=t==null?void 0:t[s];if(i&&"items"in i)return i;throw new Error("Parent collection not found")};function vs(n,e,t){let s=t(e,n);if(typeof s=="symbol")return s;for(const i of["key","value"]){const r=e[i];if(r&&"items"in r){for(let a=0;a<r.items.length;++a){const o=vs(Object.freeze(n.concat([[i,a]])),r.items[a],t);if(typeof o=="number")a=o-1;else{if(o===Sn)return Sn;o===ws&&(r.items.splice(a,1),a-=1)}}typeof s=="function"&&i==="key"&&(s=s(e,n))}}return typeof s=="function"?s(e,n):s}const jt="\uFEFF",Ut="",Kt="",pt="",Wi=n=>!!n&&"items"in n,qi=n=>!!n&&(n.type==="scalar"||n.type==="single-quoted-scalar"||n.type==="double-quoted-scalar"||n.type==="block-scalar");function Vi(n){switch(n){case jt:return"<BOM>";case Ut:return"<DOC>";case Kt:return"<FLOW_END>";case pt:return"<SCALAR>";default:return JSON.stringify(n)}}function ks(n){switch(n){case jt:return"byte-order-mark";case Ut:return"doc-mode";case Kt:return"flow-error-end";case pt:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(n[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}var Zi=Object.freeze(Object.defineProperty({__proto__:null,BOM:jt,DOCUMENT:Ut,FLOW_END:Kt,SCALAR:pt,isCollection:Wi,isScalar:qi,prettyToken:Vi,tokenType:ks,createScalarToken:$i,resolveAsScalar:Fi,setScalarValue:Mi,stringify:Ui,visit:je},Symbol.toStringTag,{value:"Module"}));function ke(n){switch(n){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}const Ss="0123456789ABCDEFabcdef".split(""),Gi="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()".split(""),An=",[]{}".split(""),Hi=` ,[]{}
\r	`.split(""),En=n=>!n||Hi.includes(n);class As{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,t=!1){var i;e&&(this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null),this.atEnd=!t;let s=(i=this.next)!=null?i:"stream";for(;s&&(t||this.hasChars(1));)s=yield*this.parseNext(s)}atLineEnd(){let e=this.pos,t=this.buffer[e];for(;t===" "||t==="	";)t=this.buffer[++e];return!t||t==="#"||t===`
`?!0:t==="\r"?this.buffer[e+1]===`
`:!1}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let t=this.buffer[e];if(this.indentNext>0){let s=0;for(;t===" ";)t=this.buffer[++s+e];if(t==="\r"){const i=this.buffer[s+e+1];if(i===`
`||!i&&!this.atEnd)return e+s+1}return t===`
`||s>=this.indentNext||!t&&!this.atEnd?e+s:-1}if(t==="-"||t==="."){const s=this.buffer.substr(e,3);if((s==="---"||s==="...")&&ke(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return(typeof e!="number"||e!==-1&&e<this.pos)&&(e=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=e),e===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[e-1]==="\r"&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===jt&&(yield*this.pushCount(1),e=e.substring(1)),e[0]==="%"){let t=e.length;const s=e.indexOf("#");if(s!==-1){const r=e[s-1];(r===" "||r==="	")&&(t=s-1)}for(;;){const r=e[t-1];if(r===" "||r==="	")t-=1;else break}const i=(yield*this.pushCount(t))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-i),this.pushNewline(),"stream"}if(this.atLineEnd()){const t=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-t),yield*this.pushNewline(),"stream"}return yield Ut,yield*this.parseLineStart()}*parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const t=this.peek(3);if(t==="---"&&ke(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"doc";if(t==="..."&&ke(this.charAt(3)))return yield*this.pushCount(3),"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!ke(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[e,t]=this.peek(2);if(!t&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&ke(t)){const s=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=s,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const e=this.getLine();if(e===null)return this.setNext("doc");let t=yield*this.pushIndicators();switch(e[t]){case"#":yield*this.pushCount(e.length-t);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(En),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return t+=yield*this.parseBlockScalarHeader(),t+=yield*this.pushSpaces(!0),yield*this.pushCount(e.length-t),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,t,s=-1;do e=yield*this.pushNewline(),e>0?(t=yield*this.pushSpaces(!1),this.indentValue=s=t):t=0,t+=yield*this.pushSpaces(!0);while(e+t>0);const i=this.getLine();if(i===null)return this.setNext("flow");if((s!==-1&&s<this.indentNext&&i[0]!=="#"||s===0&&(i.startsWith("---")||i.startsWith("..."))&&ke(i[3]))&&!(s===this.indentNext-1&&this.flowLevel===1&&(i[0]==="]"||i[0]==="}")))return this.flowLevel=0,yield Kt,yield*this.parseLineStart();let r=0;for(;i[r]===",";)r+=yield*this.pushCount(1),r+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(r+=yield*this.pushIndicators(),i[r]){case void 0:return"flow";case"#":return yield*this.pushCount(i.length-r),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(En),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const a=this.charAt(1);if(this.flowKey||ke(a)||a===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const e=this.charAt(0);let t=this.buffer.indexOf(e,this.pos+1);if(e==="'")for(;t!==-1&&this.buffer[t+1]==="'";)t=this.buffer.indexOf("'",t+2);else for(;t!==-1;){let r=0;for(;this.buffer[t-1-r]==="\\";)r+=1;if(r%2===0)break;t=this.buffer.indexOf('"',t+1)}const s=this.buffer.substring(0,t);let i=s.indexOf(`
`,this.pos);if(i!==-1){for(;i!==-1;){const r=this.continueScalar(i+1);if(r===-1)break;i=s.indexOf(`
`,r)}i!==-1&&(t=i-(s[i-1]==="\r"?2:1))}if(t===-1){if(!this.atEnd)return this.setNext("quoted-scalar");t=this.buffer.length}return yield*this.pushToIndex(t+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){const t=this.buffer[++e];if(t==="+")this.blockScalarKeep=!0;else if(t>"0"&&t<="9")this.blockScalarIndent=Number(t)-1;else if(t!=="-")break}return yield*this.pushUntil(t=>ke(t)||t==="#")}*parseBlockScalar(){let e=this.pos-1,t=0,s;e:for(let i=this.pos;s=this.buffer[i];++i)switch(s){case" ":t+=1;break;case`
`:e=i,t=0;break;case"\r":{const r=this.buffer[i+1];if(!r&&!this.atEnd)return this.setNext("block-scalar");if(r===`
`)break}default:break e}if(!s&&!this.atEnd)return this.setNext("block-scalar");if(t>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=t:this.indentNext+=this.blockScalarIndent;do{const i=this.continueScalar(e+1);if(i===-1)break;e=this.buffer.indexOf(`
`,i)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}if(!this.blockScalarKeep)do{let i=e-1,r=this.buffer[i];r==="\r"&&(r=this.buffer[--i]);const a=i;for(;r===" "||r==="	";)r=this.buffer[--i];if(r===`
`&&i>=this.pos&&i+1+t>a)e=i;else break}while(!0);return yield pt,yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const e=this.flowLevel>0;let t=this.pos-1,s=this.pos-1,i;for(;i=this.buffer[++s];)if(i===":"){const r=this.buffer[s+1];if(ke(r)||e&&r===",")break;t=s}else if(ke(i)){let r=this.buffer[s+1];if(i==="\r"&&(r===`
`?(s+=1,i=`
`,r=this.buffer[s+1]):t=s),r==="#"||e&&An.includes(r))break;if(i===`
`){const a=this.continueScalar(s+1);if(a===-1)break;s=Math.max(s,a-2)}}else{if(e&&An.includes(i))break;t=s}return!i&&!this.atEnd?this.setNext("plain-scalar"):(yield pt,yield*this.pushToIndex(t+1,!0),e?"flow":"doc")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,t){const s=this.buffer.slice(this.pos,e);return s?(yield s,this.pos+=s.length,s.length):(t&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(En))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const e=this.flowLevel>0,t=this.charAt(1);if(ke(t)||e&&An.includes(t))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2,t=this.buffer[e];for(;!ke(t)&&t!==">";)t=this.buffer[++e];return yield*this.pushToIndex(t===">"?e+1:e,!1)}else{let e=this.pos+1,t=this.buffer[e];for(;t;)if(Gi.includes(t))t=this.buffer[++e];else if(t==="%"&&Ss.includes(this.buffer[e+1])&&Ss.includes(this.buffer[e+2]))t=this.buffer[e+=3];else break;return yield*this.pushToIndex(e,!1)}}*pushNewline(){const e=this.buffer[this.pos];return e===`
`?yield*this.pushCount(1):e==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(e){let t=this.pos-1,s;do s=this.buffer[++t];while(s===" "||e&&s==="	");const i=t-this.pos;return i>0&&(yield this.buffer.substr(this.pos,i),this.pos=t),i}*pushUntil(e){let t=this.pos,s=this.buffer[t];for(;!e(s);)s=this.buffer[++t];return yield*this.pushToIndex(t,!1)}}class Es{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let t=0,s=this.lineStarts.length;for(;t<s;){const r=t+s>>1;this.lineStarts[r]<e?t=r+1:s=r}if(this.lineStarts[t]===e)return{line:t+1,col:1};if(t===0)return{line:0,col:e};const i=this.lineStarts[t-1];return{line:t,col:e-i+1}}}}function Ee(n,e){for(let t=0;t<n.length;++t)if(n[t].type===e)return!0;return!1}function Os(n){for(let e=0;e<n.length;++e)switch(n[e].type){case"space":case"comment":case"newline":break;default:return e}return-1}function Cs(n){switch(n==null?void 0:n.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function Wt(n){var e;switch(n.type){case"document":return n.start;case"block-map":{const t=n.items[n.items.length-1];return(e=t.sep)!=null?e:t.start}case"block-seq":return n.items[n.items.length-1].start;default:return[]}}function it(n){var t;if(n.length===0)return[];let e=n.length;e:for(;--e>=0;)switch(n[e].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;((t=n[++e])==null?void 0:t.type)==="space";);return n.splice(e,n.length)}function Is(n){if(n.start.type==="flow-seq-start")for(const e of n.items)e.sep&&!e.value&&!Ee(e.start,"explicit-key-ind")&&!Ee(e.sep,"map-value-ind")&&(e.key&&(e.value=e.key),delete e.key,Cs(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}class On{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new As,this.onNewLine=e}*parse(e,t=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(const s of this.lexer.lex(e,t))yield*this.next(s);t||(yield*this.end())}*next(e){if(this.source=e,this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=e.length;return}const t=ks(e);if(t)if(t==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=t,yield*this.step(),t){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&e[0]===" "&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{const s=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:s,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const e=this.peek(1);if(this.type==="doc-end"&&(!e||e.type!=="doc-end")){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){const t=e!=null?e:this.stack.pop();if(t)if(this.stack.length===0)yield t;else{const s=this.peek(1);switch(t.type==="block-scalar"?t.indent="indent"in s?s.indent:0:t.type==="flow-collection"&&s.type==="document"&&(t.indent=0),t.type==="flow-collection"&&Is(t),s.type){case"document":s.value=t;break;case"block-scalar":s.props.push(t);break;case"block-map":{const i=s.items[s.items.length-1];if(i.value){s.items.push({start:[],key:t,sep:[]}),this.onKeyLine=!0;return}else if(i.sep)i.value=t;else{Object.assign(i,{key:t,sep:[]}),this.onKeyLine=!Ee(i.start,"explicit-key-ind");return}break}case"block-seq":{const i=s.items[s.items.length-1];i.value?s.items.push({start:[],value:t}):i.value=t;break}case"flow-collection":{const i=s.items[s.items.length-1];!i||i.value?s.items.push({start:[],key:t,sep:[]}):i.sep?i.value=t:Object.assign(i,{key:t,sep:[]});return}default:yield*this.pop(),yield*this.pop(t)}if((s.type==="document"||s.type==="block-map"||s.type==="block-seq")&&(t.type==="block-map"||t.type==="block-seq")){const i=t.items[t.items.length-1];i&&!i.sep&&!i.value&&i.start.length>0&&Os(i.start)===-1&&(t.indent===0||i.start.every(r=>r.type!=="comment"||r.indent<t.indent))&&(s.type==="document"?s.end=i.start:s.items.push({start:i.start}),t.items.splice(-1,1))}}else{const s="Tried to pop an empty stack";yield{type:"error",offset:this.offset,source:"",message:s}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{const e={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":{Os(e.start)!==-1?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}const t=this.startBlockValue(e);t?this.stack.push(t):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if(this.type==="map-value-ind"){const t=Wt(this.peek(2)),s=it(t);let i;e.end?(i=e.end,i.push(this.sourceToken),delete e.end):i=[this.sourceToken];const r={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:s,key:e,sep:i}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=r}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let t=this.source.indexOf(`
`)+1;for(;t!==0;)this.onNewLine(this.offset+t),t=this.source.indexOf(`
`,t)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){var s;const t=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,t.value){const i="end"in t.value?t.value.end:void 0,r=Array.isArray(i)?i[i.length-1]:void 0;(r==null?void 0:r.type)==="comment"?i==null||i.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else if(t.sep)t.sep.push(this.sourceToken);else{if(this.atIndentedComment(t.start,e.indent)){const i=e.items[e.items.length-2],r=(s=i==null?void 0:i.value)==null?void 0:s.end;if(Array.isArray(r)){Array.prototype.push.apply(r,t.start),r.push(this.sourceToken),e.items.pop();return}}t.start.push(this.sourceToken)}return}if(this.indent>=e.indent){const i=!this.onKeyLine&&this.indent===e.indent&&t.sep;let r=[];if(i&&t.sep&&!t.value){const a=[];for(let o=0;o<t.sep.length;++o){const l=t.sep[o];switch(l.type){case"newline":a.push(o);break;case"space":break;case"comment":l.indent>e.indent&&(a.length=0);break;default:a.length=0}}a.length>=2&&(r=t.sep.splice(a[1]))}switch(this.type){case"anchor":case"tag":i||t.value?(r.push(this.sourceToken),e.items.push({start:r}),this.onKeyLine=!0):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"explicit-key-ind":!t.sep&&!Ee(t.start,"explicit-key-ind")?t.start.push(this.sourceToken):i||t.value?(r.push(this.sourceToken),e.items.push({start:r})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]}),this.onKeyLine=!0;return;case"map-value-ind":if(Ee(t.start,"explicit-key-ind"))if(t.sep)if(t.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(Ee(t.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,key:null,sep:[this.sourceToken]}]});else if(Cs(t.key)&&!Ee(t.sep,"newline")){const a=it(t.start),o=t.key,l=t.sep;l.push(this.sourceToken),delete t.key,delete t.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:a,key:o,sep:l}]})}else r.length>0?t.sep=t.sep.concat(r,this.sourceToken):t.sep.push(this.sourceToken);else if(Ee(t.start,"newline"))Object.assign(t,{key:null,sep:[this.sourceToken]});else{const a=it(t.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:a,key:null,sep:[this.sourceToken]}]})}else t.sep?t.value||i?e.items.push({start:r,key:null,sep:[this.sourceToken]}):Ee(t.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const a=this.flowScalar(this.type);i||t.value?(e.items.push({start:r,key:a,sep:[]}),this.onKeyLine=!0):t.sep?this.stack.push(a):(Object.assign(t,{key:a,sep:[]}),this.onKeyLine=!0);return}default:{const a=this.startBlockValue(e);if(a){i&&a.type!=="block-seq"&&Ee(t.start,"explicit-key-ind")&&e.items.push({start:r}),this.stack.push(a);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){var s;const t=e.items[e.items.length-1];switch(this.type){case"newline":if(t.value){const i="end"in t.value?t.value.end:void 0,r=Array.isArray(i)?i[i.length-1]:void 0;(r==null?void 0:r.type)==="comment"?i==null||i.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(t.start,e.indent)){const i=e.items[e.items.length-2],r=(s=i==null?void 0:i.value)==null?void 0:s.end;if(Array.isArray(r)){Array.prototype.push.apply(r,t.start),r.push(this.sourceToken),e.items.pop();return}}t.start.push(this.sourceToken)}return;case"anchor":case"tag":if(t.value||this.indent<=e.indent)break;t.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;t.value||Ee(t.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken);return}if(this.indent>e.indent){const i=this.startBlockValue(e);if(i){this.stack.push(i);return}}yield*this.pop(),yield*this.step()}*flowCollection(e){const t=e.items[e.items.length-1];if(this.type==="flow-error-end"){let s;do yield*this.pop(),s=this.peek(1);while(s&&s.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!t||t.sep?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken);return;case"map-value-ind":!t||t.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!t||t.value?e.items.push({start:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const i=this.flowScalar(this.type);!t||t.value?e.items.push({start:[],key:i,sep:[]}):t.sep?this.stack.push(i):Object.assign(t,{key:i,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}const s=this.startBlockValue(e);s?this.stack.push(s):(yield*this.pop(),yield*this.step())}else{const s=this.peek(2);if(s.type==="block-map"&&(this.type==="map-value-ind"&&s.indent===e.indent||this.type==="newline"&&!s.items[s.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&s.type!=="flow-collection"){const i=Wt(s),r=it(i);Is(e);const a=e.end.splice(1,e.end.length);a.push(this.sourceToken);const o={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:r,key:e,sep:a}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=o}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let t=this.source.indexOf(`
`)+1;for(;t!==0;)this.onNewLine(this.offset+t),t=this.source.indexOf(`
`,t)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const t=Wt(e),s=it(t);return s.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s}]}}case"map-value-ind":{this.onKeyLine=!0;const t=Wt(e),s=it(t);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,t){return this.type!=="comment"||this.indent<=t?!1:e.every(s=>s.type==="newline"||s.type==="space")}*documentEnd(e){this.type!=="doc-mode"&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}}function Ns(n){const e=n.prettyErrors!==!1;return{lineCounter:n.lineCounter||e&&new Es||null,prettyErrors:e}}function Yi(n,e={}){const{lineCounter:t,prettyErrors:s}=Ns(e),i=new On(t==null?void 0:t.addNewLine),r=new vn(e),a=Array.from(r.compose(i.parse(n)));if(s&&t)for(const o of a)o.errors.forEach(Ft(n,t)),o.warnings.forEach(Ft(n,t));return a.length>0?a:Object.assign([],{empty:!0},r.streamInfo())}function Ts(n,e={}){const{lineCounter:t,prettyErrors:s}=Ns(e),i=new On(t==null?void 0:t.addNewLine),r=new vn(e);let a=null;for(const o of r.compose(i.parse(n),!0,n.length))if(!a)a=o;else if(a.options.logLevel!=="silent"){a.errors.push(new Me(o.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return s&&t&&(a.errors.forEach(Ft(n,t)),a.warnings.forEach(Ft(n,t))),a}function Ji(n,e,t){let s;typeof e=="function"?s=e:t===void 0&&e&&typeof e=="object"&&(t=e);const i=Ts(n,t);if(!i)return null;if(i.warnings.forEach(r=>jn(i.options.logLevel,r)),i.errors.length>0){if(i.options.logLevel!=="silent")throw i.errors[0];i.errors=[]}return i.toJS(Object.assign({reviver:s},t))}function Qi(n,e,t){var i;let s=null;if(typeof e=="function"||Array.isArray(e)?s=e:t===void 0&&e&&(t=e),typeof t=="string"&&(t=t.length),typeof t=="number"){const r=Math.round(t);t=r<1?void 0:r>8?{indent:8}:{indent:r}}if(n===void 0){const{keepUndefined:r}=(i=t!=null?t:e)!=null?i:{};if(!r)return}return new tt(n,s,t).toString(t)}var Xi=Object.freeze(Object.defineProperty({__proto__:null,CST:Zi,Composer:vn,Document:tt,Schema:Rt,YAMLError:mn,YAMLParseError:Me,YAMLWarning:us,Alias:wt,isAlias:Fe,isCollection:le,isDocument:Ke,isMap:We,isNode:ce,isPair:oe,isScalar:re,isSeq:qe,Pair:pe,Scalar:ee,YAMLMap:be,YAMLSeq:Re,Lexer:As,LineCounter:Es,Parser:On,parse:Ji,parseAllDocuments:Yi,parseDocument:Ts,stringify:Qi,visit:Pe,visitAsync:bt},Symbol.toStringTag,{value:"Module"}));const er="header.yml";class tr{constructor(e){this._server=e}href(e){return this._server.href(e)}get(e){return this._server.get(e)}ready(e){this._server.ready(e)}close(e){this._server.close(e)}gameHeader(){return this._server.get(er).then(e=>Xi.parse(e))}}const nr="0.1.0-alpha.27",sr="0.1.0-alpha.23",ir=1e3,qt=.01;function rr(n,e){if(e.endsWith(".zip"))return n.zipServer(e);if(e.endsWith(".yaml")||e.endsWith(".yml")){const t=e.lastIndexOf("/");e=t<0?"":e.substring(0,t)}return n.fileServer(e)}var me;(function(n){n[n.Idle=0]="Idle",n[n.Loading=1]="Loading",n[n.BecomePlaying=2]="BecomePlaying",n[n.Playing=3]="Playing",n[n.Pause=4]="Pause"})(me||(me={}));class ar{constructor(e){this._player=e}get root(){return this._player.root}get gameServer(){return this._player.gameServer}get width(){return this._player.width}set width(e){this.resize({width:e})}get height(){return this._player.height}set height(e){this.resize({height:e})}get resizable(){return this._player.resizable}set resizable(e){this._player.resizable=e}get speed(){return this._player.speed}set speed(e){this._player.speed=e}get url(){return this._player.url}set url(e){this._player.url=e}get header(){return this._player.header}set header(e){this._player.header=e}get autoPlay(){return!1}set autoPlay(e){}resize(e,t){!this.resizable||(typeof e=="object"?this._player.resize(e):this._player.resize(e,t))}ready(){this._player.ready()}saveState(){return this._player.saveState()}loadState(e){this._player.loadState(e)}getController(e){return this._player.getController(e)}tick(e){this._player.tick(e)}}class or{get isLoading(){return this._state==me.Loading}get isPlaying(){return this._state==me.Playing}get isPaused(){return this._state==me.Pause}constructor(e,t,s){this._state=me.Idle,this._ui={},this._exports={},this._speed=1,this._physicsAccumulator=0,this._proxy=new ar(this),this._config=e,this._options=s,this._controllerBus=new Fs({player:this,inputController:e.inputController}),this._tickFromGame=this._tickFromGame.bind(this),this._options.onReady!==void 0&&(this._readyCallback=this._options.onReady),lr(t)&&(this._ui.element=t,this._options=Object.assign({},s),this._options.url===void 0&&t.dataset.url!==void 0&&(this._options.url=t.dataset.url),this._attach(),this.autoPlay&&this.play())}_attach(){if(this._ui.element!==void 0){{let e=document.createElement("div");this._ui.wrapper=e,e.addEventListener("mouseenter",()=>this._onMouseEnter()),e.addEventListener("mousemove",()=>this._onMouseMove()),e.addEventListener("mouseleave",()=>this._onMouseLeave()),e.style.position="relative",e.style.backgroundSize="cover",this._options.splashart!==void 0&&(e.style.backgroundImage=`url('${this._options.splashart}')`),this._ui.element.appendChild(e)}{let e=document.createElement("div");this._ui.base=e,e.style.width="100%",e.style.height="100%",e.style.position="absolute",e.style.left="0",e.style.top="0",this._ui.wrapper.appendChild(e)}this.resize({width:this._options.width,height:this._options.height}),this._ui.overlay=new Ks(this._ui.wrapper),this._ui.overlay.onPlay=()=>this.play(),this._ui.overlay.onSpeed=e=>this.speed=e,this._resizeListener=()=>this._onResize(),window.addEventListener("resize",this._resizeListener)}}_initGame(){return new Promise((e,t)=>this._ui.element===void 0?t("element is not an HTMLElement"):(console.log("start game server..."),this._startGameServer().then(()=>(console.log("game server started"),this._loadHeader().then(()=>this._loadGame().then(e))))))}_startGameServer(){return new Promise(e=>{if(this._options.url===void 0)return e();const t=rr(this._config,this._options.url);this._gameServer=new tr(t),this._gameServer.ready(e)})}_loadHeader(){return console.log("load header..."),new Promise((e,t)=>this._options.header!==void 0?e(this._options.header):this._gameServer===void 0?t("failed to get header"):this._gameServer.gameHeader().then(e)).then(e=>{console.log("header loaded"),console.log(e),this._options.header=e,this._proxy.resize({width:e.width,height:e.height})})}_getBootFunction(e){let t={},s={exports:{boot:void 0}};const i=new Function("exports","module","define",e)(t,s,void 0);if(t.boot!==void 0){this._exports.boot=t.boot;return}if(s.exports.boot!==void 0){this._exports.boot=s.exports.boot;return}if(i==="object"&&i.boot!==void 0){this._exports.boot=i.boot;return}}_loadBoot(){var e;console.log("load boot...");const t=this.header.boot;if(t!==void 0){if(!t.endsWith(".js"))return new Promise((s,i)=>{const r=window[t];return r===void 0||r.boot===void 0?i("invalid boot module"):(this._exports.boot=r.boot,s())});if(t.startsWith("http"))return fetch((e=this.header)===null||e===void 0?void 0:e.boot).then(s=>{if(!s.ok)throw new Error(s.statusText);return s.text()}).then(s=>(this._getBootFunction(s),Promise.resolve()));if(this._gameServer!==void 0)return this._gameServer.get(t).then(s=>(this._getBootFunction(s),Promise.resolve()))}return new Promise((s,i)=>i("failed to load boot"))}_loadGame(){return new Promise((e,t)=>{this._loadBoot().then(()=>this._exports.boot===void 0?t("missing boot"):(console.log("boot loaded"),this._game=this._exports.boot(this._proxy),this._game.ticker=this._tickFromGame,console.log(this._game),e()))})}_notifyReady(){this._playTask=void 0,this._readyCallback!==void 0&&this._readyCallback()}_play(e,t,s){if(e!==void 0||t!==void 0){this.stop(),this._options.url=e,this._options.header=t,(s===!0||this.autoPlay)&&this._play();return}if(this._state===me.Pause){this._state=me.Playing,this._ui.overlay&&this._ui.overlay.playing(),this._game!==void 0&&this._game.play();return}this._state===me.Idle&&(this._state=me.Loading,this._startLoadingDate=new Date,this._ui.overlay&&this._ui.overlay.loading(),this._playTask=this._initGame().catch(i=>{console.error(i),this._notifyReady()}))}_onMouseEnter(){this._ui.overlay&&this._ui.overlay.mouseEnter()}_onMouseMove(){this._ui.overlay&&this._ui.overlay.mouseMove()}_onMouseLeave(){this._ui.overlay&&this._ui.overlay.mouseLeave()}get root(){return this._ui.base}get gameServer(){return this._gameServer}resize(e,t){this._ui.wrapper!==void 0&&(typeof e!="number"&&(t=e.height,e=e.width),e!==void 0?this._ui.wrapper.style.width=`${e}px`:this._ui.wrapper.style.width="100%",t!==void 0?this._ui.wrapper.style.height=`${t}px`:this._ui.wrapper.style.height="100%",this._onResize())}_onResize(){this._game!==void 0&&this._game.resize()}get onReady(){return this._readyCallback}set onReady(e){this._readyCallback=e,this.isPlaying&&this._notifyReady()}_ready(){this._state===me.BecomePlaying&&(this._state=me.Playing,this._ui.overlay&&this._ui.overlay.playing(),this._game&&this._game.play(),this._notifyReady())}ready(){if(this._state!=me.Loading)return;this._state=me.BecomePlaying;const e=ir-(+new Date-+this._startLoadingDate);if(e>0){setTimeout(()=>this._ready(),e);return}this._ready()}controller(e){return this._controllerBus.get(e)}get width(){return this._ui.wrapper?this._ui.wrapper.clientWidth:0}set width(e){this.resize({width:e})}get height(){return this._ui.wrapper?this._ui.wrapper.clientHeight:0}set height(e){this.resize({height:e})}get resizable(){return this._options.resizable===!0}set resizable(e){this._options.resizable=e}get speed(){return this._speed}set speed(e){this._speed=e}get url(){return this._options.url}set url(e){this.play({url:e})}get header(){return this._options.header}set header(e){this.play({header:e})}get autoPlay(){return this._options.autoPlay===!0}set autoPlay(e){this._options.autoPlay=e}get simulated(){return this._options.simulated===!0}set simulated(e){this._options.simulated=e}play(e){if(typeof e=="object"){this._play(e.url,e.header,e.autoPlay);return}if(e!==void 0){this._play(e);return}this._play()}pause(){!this.isPlaying||(this._game!==void 0&&this._game.pause(),this._ui.overlay&&this._ui.overlay.paused(),this._state=me.Pause)}stop(){this._game!==void 0&&(this._game.stop(),this._game=void 0),this._ui.overlay&&this._ui.overlay.stopped(),this._gameServer!==void 0&&(this._gameServer.close(),this._gameServer=void 0),this._speed=1,this._state=me.Idle}reload(){this.stop(),this.play()}remove(){this.stop(),this._resizeListener!==void 0&&window.removeEventListener("resize",this._resizeListener),this._ui.overlay&&(this._ui.overlay.remove(),this._ui.overlay=void 0),this._ui.wrapper&&(this._ui.wrapper.remove(),this._ui.wrapper=void 0)}saveState(){return{physicsAccumulator:this._physicsAccumulator,game:this._game!==void 0?this._game.saveState():{},controllers:this._controllerBus.saveState()}}loadState(e){this._physicsAccumulator=e.physicsAccumulator!==void 0?e.physicsAccumulator:0,this._game!==void 0&&this._game.loadState(e.game!==void 0?e.game:{}),this._controllerBus.loadState(e.controllers!==void 0?e.controllers:[{},{}])}_tickFromGame(e){if(this.ticker!==void 0){this.ticker(e);return}this.simulated||this.tick(e)}tick(e){if(this._game!==void 0){for(this._physicsAccumulator+=e*this.speed;this._physicsAccumulator>qt;)this._tickOneFrame(qt),this._physicsAccumulator-=qt;this._tickOneFrame(qt)}}_tickOneFrame(e){const t=this._game.getStateForAgent();this._game.tick(this._controllerBus.inputs(t),e)}getController(e){return this._controllerBus.get(e)}}function Ls(){return{resizable:!0,speed:1}}function lr(n){return"dataset"in n}function xs(n){return"length"in n}function cr(n){return n!==void 0&&!xs(n)&&!("className"in n)}function Bs(n,e,t){return new or(n,e,t)}function ur(n,e,t){let s,i=Ls();return cr(e)?t=e:s=e,t!==void 0&&(i=Object.assign(Object.assign({},i),t)),s==null&&(i.element!==void 0?s=i.element:s=document.getElementsByClassName("moroboxai-player")),xs(s)?Array.prototype.map.call(s,r=>Bs(n,r,i)):Bs(n,s,i)}class fr{constructor(){this._inputs={left:!1,right:!1,up:!1,down:!1},this._keyDownListener=e=>this._onKey(e,!0),this._keyUpListener=e=>this._onKey(e,!1),document.addEventListener("keydown",this._keyDownListener,!1),document.addEventListener("keyup",this._keyUpListener,!1)}_onKey(e,t){e.code==="ArrowDown"||e.code==="KeyS"?(e.code==="ArrowDown"&&e.preventDefault(),this._inputs.down=t):e.code==="ArrowUp"||e.code==="KeyW"?(e.code==="ArrowUp"&&e.preventDefault(),this._inputs.up=t):e.code==="ArrowLeft"||e.code==="KeyA"?(e.code==="ArrowLeft"&&e.preventDefault(),this._inputs.left=t):(e.code==="ArrowRight"||e.code==="KeyD")&&(e.code==="ArrowRight"&&e.preventDefault(),this._inputs.right=t)}remove(){document.removeEventListener("keydown",this._keyDownListener),document.removeEventListener("keyup",this._keyUpListener)}get inputs(){return this._inputs}}var Vt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Zt(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var zs={exports:{}};/*!

    JSZip v3.10.1 - A JavaScript class for generating and reading zip files
    <http://stuartk.com/jszip>

    (c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
    Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

    JSZip uses the library pako released under the MIT license :
    https://github.com/nodeca/pako/blob/main/LICENSE
    */(function(n,e){(function(t){n.exports=t()})(function(){return function t(s,i,r){function a(h,b){if(!i[h]){if(!s[h]){var g=typeof Zt=="function"&&Zt;if(!b&&g)return g(h,!0);if(o)return o(h,!0);var _=new Error("Cannot find module '"+h+"'");throw _.code="MODULE_NOT_FOUND",_}var u=i[h]={exports:{}};s[h][0].call(u.exports,function(y){var f=s[h][1][y];return a(f||y)},u,u.exports,t,s,i,r)}return i[h].exports}for(var o=typeof Zt=="function"&&Zt,l=0;l<r.length;l++)a(r[l]);return a}({1:[function(t,s,i){var r=t("./utils"),a=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var h,b,g,_,u,y,f,m=[],p=0,w=l.length,S=w,O=r.getTypeOf(l)!=="string";p<l.length;)S=w-p,g=O?(h=l[p++],b=p<w?l[p++]:0,p<w?l[p++]:0):(h=l.charCodeAt(p++),b=p<w?l.charCodeAt(p++):0,p<w?l.charCodeAt(p++):0),_=h>>2,u=(3&h)<<4|b>>4,y=1<S?(15&b)<<2|g>>6:64,f=2<S?63&g:64,m.push(o.charAt(_)+o.charAt(u)+o.charAt(y)+o.charAt(f));return m.join("")},i.decode=function(l){var h,b,g,_,u,y,f=0,m=0,p="data:";if(l.substr(0,p.length)===p)throw new Error("Invalid base64 input, it looks like a data url.");var w,S=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===o.charAt(64)&&S--,l.charAt(l.length-2)===o.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(w=a.uint8array?new Uint8Array(0|S):new Array(0|S);f<l.length;)h=o.indexOf(l.charAt(f++))<<2|(_=o.indexOf(l.charAt(f++)))>>4,b=(15&_)<<4|(u=o.indexOf(l.charAt(f++)))>>2,g=(3&u)<<6|(y=o.indexOf(l.charAt(f++))),w[m++]=h,u!==64&&(w[m++]=b),y!==64&&(w[m++]=g);return w}},{"./support":30,"./utils":32}],2:[function(t,s,i){var r=t("./external"),a=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),l=t("./stream/DataLengthProbe");function h(b,g,_,u,y){this.compressedSize=b,this.uncompressedSize=g,this.crc32=_,this.compression=u,this.compressedContent=y}h.prototype={getContentWorker:function(){var b=new a(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),g=this;return b.on("end",function(){if(this.streamInfo.data_length!==g.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),b},getCompressedWorker:function(){return new a(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(b,g,_){return b.pipe(new o).pipe(new l("uncompressedSize")).pipe(g.compressWorker(_)).pipe(new l("compressedSize")).withStreamInfo("compression",g)},s.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,s,i){var r=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,s,i){var r=t("./utils"),a=function(){for(var o,l=[],h=0;h<256;h++){o=h;for(var b=0;b<8;b++)o=1&o?3988292384^o>>>1:o>>>1;l[h]=o}return l}();s.exports=function(o,l){return o!==void 0&&o.length?r.getTypeOf(o)!=="string"?function(h,b,g,_){var u=a,y=_+g;h^=-1;for(var f=_;f<y;f++)h=h>>>8^u[255&(h^b[f])];return-1^h}(0|l,o,o.length,0):function(h,b,g,_){var u=a,y=_+g;h^=-1;for(var f=_;f<y;f++)h=h>>>8^u[255&(h^b.charCodeAt(f))];return-1^h}(0|l,o,o.length,0):0}},{"./utils":32}],5:[function(t,s,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,s,i){var r=null;r=typeof Promise!="undefined"?Promise:t("lie"),s.exports={Promise:r}},{lie:37}],7:[function(t,s,i){var r=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined",a=t("pako"),o=t("./utils"),l=t("./stream/GenericWorker"),h=r?"uint8array":"array";function b(g,_){l.call(this,"FlateWorker/"+g),this._pako=null,this._pakoAction=g,this._pakoOptions=_,this.meta={}}i.magic="\b\0",o.inherits(b,l),b.prototype.processChunk=function(g){this.meta=g.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(h,g.data),!1)},b.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},b.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},b.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var g=this;this._pako.onData=function(_){g.push({data:_,meta:g.meta})}},i.compressWorker=function(g){return new b("Deflate",g)},i.uncompressWorker=function(){return new b("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,s,i){function r(u,y){var f,m="";for(f=0;f<y;f++)m+=String.fromCharCode(255&u),u>>>=8;return m}function a(u,y,f,m,p,w){var S,O,E=u.file,C=u.compression,x=w!==h.utf8encode,D=o.transformTo("string",w(E.name)),T=o.transformTo("string",h.utf8encode(E.name)),$=E.comment,Z=o.transformTo("string",w($)),A=o.transformTo("string",h.utf8encode($)),P=T.length!==E.name.length,d=A.length!==$.length,F="",X="",U="",te=E.dir,K=E.date,Q={crc32:0,compressedSize:0,uncompressedSize:0};y&&!f||(Q.crc32=u.crc32,Q.compressedSize=u.compressedSize,Q.uncompressedSize=u.uncompressedSize);var B=0;y&&(B|=8),x||!P&&!d||(B|=2048);var L=0,J=0;te&&(L|=16),p==="UNIX"?(J=798,L|=function(V,ue){var ge=V;return V||(ge=ue?16893:33204),(65535&ge)<<16}(E.unixPermissions,te)):(J=20,L|=function(V){return 63&(V||0)}(E.dosPermissions)),S=K.getUTCHours(),S<<=6,S|=K.getUTCMinutes(),S<<=5,S|=K.getUTCSeconds()/2,O=K.getUTCFullYear()-1980,O<<=4,O|=K.getUTCMonth()+1,O<<=5,O|=K.getUTCDate(),P&&(X=r(1,1)+r(b(D),4)+T,F+="up"+r(X.length,2)+X),d&&(U=r(1,1)+r(b(Z),4)+A,F+="uc"+r(U.length,2)+U);var G="";return G+=`
\0`,G+=r(B,2),G+=C.magic,G+=r(S,2),G+=r(O,2),G+=r(Q.crc32,4),G+=r(Q.compressedSize,4),G+=r(Q.uncompressedSize,4),G+=r(D.length,2),G+=r(F.length,2),{fileRecord:g.LOCAL_FILE_HEADER+G+D+F,dirRecord:g.CENTRAL_FILE_HEADER+r(J,2)+G+r(Z.length,2)+"\0\0\0\0"+r(L,4)+r(m,4)+D+F+Z}}var o=t("../utils"),l=t("../stream/GenericWorker"),h=t("../utf8"),b=t("../crc32"),g=t("../signature");function _(u,y,f,m){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=f,this.encodeFileName=m,this.streamFiles=u,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(_,l),_.prototype.push=function(u){var y=u.meta.percent||0,f=this.entriesCount,m=this._sources.length;this.accumulate?this.contentBuffer.push(u):(this.bytesWritten+=u.data.length,l.prototype.push.call(this,{data:u.data,meta:{currentFile:this.currentFile,percent:f?(y+100*(f-m-1))/f:100}}))},_.prototype.openedSource=function(u){this.currentSourceOffset=this.bytesWritten,this.currentFile=u.file.name;var y=this.streamFiles&&!u.file.dir;if(y){var f=a(u,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:f.fileRecord,meta:{percent:0}})}else this.accumulate=!0},_.prototype.closedSource=function(u){this.accumulate=!1;var y=this.streamFiles&&!u.file.dir,f=a(u,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(f.dirRecord),y)this.push({data:function(m){return g.DATA_DESCRIPTOR+r(m.crc32,4)+r(m.compressedSize,4)+r(m.uncompressedSize,4)}(u),meta:{percent:100}});else for(this.push({data:f.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},_.prototype.flush=function(){for(var u=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var f=this.bytesWritten-u,m=function(p,w,S,O,E){var C=o.transformTo("string",E(O));return g.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(p,2)+r(p,2)+r(w,4)+r(S,4)+r(C.length,2)+C}(this.dirRecords.length,f,u,this.zipComment,this.encodeFileName);this.push({data:m,meta:{percent:100}})},_.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},_.prototype.registerPrevious=function(u){this._sources.push(u);var y=this;return u.on("data",function(f){y.processChunk(f)}),u.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),u.on("error",function(f){y.error(f)}),this},_.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},_.prototype.error=function(u){var y=this._sources;if(!l.prototype.error.call(this,u))return!1;for(var f=0;f<y.length;f++)try{y[f].error(u)}catch{}return!0},_.prototype.lock=function(){l.prototype.lock.call(this);for(var u=this._sources,y=0;y<u.length;y++)u[y].lock()},s.exports=_},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,s,i){var r=t("../compressions"),a=t("./ZipFileWorker");i.generateWorker=function(o,l,h){var b=new a(l.streamFiles,h,l.platform,l.encodeFileName),g=0;try{o.forEach(function(_,u){g++;var y=function(w,S){var O=w||S,E=r[O];if(!E)throw new Error(O+" is not a valid compression method !");return E}(u.options.compression,l.compression),f=u.options.compressionOptions||l.compressionOptions||{},m=u.dir,p=u.date;u._compressWorker(y,f).withStreamInfo("file",{name:_,dir:m,date:p,comment:u.comment||"",unixPermissions:u.unixPermissions,dosPermissions:u.dosPermissions}).pipe(b)}),b.entriesCount=g}catch(_){b.error(_)}return b}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,s,i){function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new r;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(r.prototype=t("./object")).loadAsync=t("./load"),r.support=t("./support"),r.defaults=t("./defaults"),r.version="3.10.1",r.loadAsync=function(a,o){return new r().loadAsync(a,o)},r.external=t("./external"),s.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,s,i){var r=t("./utils"),a=t("./external"),o=t("./utf8"),l=t("./zipEntries"),h=t("./stream/Crc32Probe"),b=t("./nodejsUtils");function g(_){return new a.Promise(function(u,y){var f=_.decompressed.getContentWorker().pipe(new h);f.on("error",function(m){y(m)}).on("end",function(){f.streamInfo.crc32!==_.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):u()}).resume()})}s.exports=function(_,u){var y=this;return u=r.extend(u||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),b.isNode&&b.isStream(_)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",_,!0,u.optimizedBinaryString,u.base64).then(function(f){var m=new l(u);return m.load(f),m}).then(function(f){var m=[a.Promise.resolve(f)],p=f.files;if(u.checkCRC32)for(var w=0;w<p.length;w++)m.push(g(p[w]));return a.Promise.all(m)}).then(function(f){for(var m=f.shift(),p=m.files,w=0;w<p.length;w++){var S=p[w],O=S.fileNameStr,E=r.resolve(S.fileNameStr);y.file(E,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:u.createFolders}),S.dir||(y.file(E).unsafeOriginalName=O)}return m.zipComment.length&&(y.comment=m.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,s,i){var r=t("../utils"),a=t("../stream/GenericWorker");function o(l,h){a.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(h)}r.inherits(o,a),o.prototype._bindStream=function(l){var h=this;(this._stream=l).pause(),l.on("data",function(b){h.push({data:b,meta:{percent:0}})}).on("error",function(b){h.isPaused?this.generatedError=b:h.error(b)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},s.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,s,i){var r=t("readable-stream").Readable;function a(o,l,h){r.call(this,l),this._helper=o;var b=this;o.on("data",function(g,_){b.push(g)||b._helper.pause(),h&&h(_)}).on("error",function(g){b.emit("error",g)}).on("end",function(){b.push(null)})}t("../utils").inherits(a,r),a.prototype._read=function(){this._helper.resume()},s.exports=a},{"../utils":32,"readable-stream":16}],14:[function(t,s,i){s.exports={isNode:typeof Buffer!="undefined",newBufferFrom:function(r,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(r,a);if(typeof r=="number")throw new Error('The "data" argument must not be a number');return new Buffer(r,a)},allocBuffer:function(r){if(Buffer.alloc)return Buffer.alloc(r);var a=new Buffer(r);return a.fill(0),a},isBuffer:function(r){return Buffer.isBuffer(r)},isStream:function(r){return r&&typeof r.on=="function"&&typeof r.pause=="function"&&typeof r.resume=="function"}}},{}],15:[function(t,s,i){function r(E,C,x){var D,T=o.getTypeOf(C),$=o.extend(x||{},b);$.date=$.date||new Date,$.compression!==null&&($.compression=$.compression.toUpperCase()),typeof $.unixPermissions=="string"&&($.unixPermissions=parseInt($.unixPermissions,8)),$.unixPermissions&&16384&$.unixPermissions&&($.dir=!0),$.dosPermissions&&16&$.dosPermissions&&($.dir=!0),$.dir&&(E=p(E)),$.createFolders&&(D=m(E))&&w.call(this,D,!0);var Z=T==="string"&&$.binary===!1&&$.base64===!1;x&&x.binary!==void 0||($.binary=!Z),(C instanceof g&&C.uncompressedSize===0||$.dir||!C||C.length===0)&&($.base64=!1,$.binary=!0,C="",$.compression="STORE",T="string");var A=null;A=C instanceof g||C instanceof l?C:y.isNode&&y.isStream(C)?new f(E,C):o.prepareContent(E,C,$.binary,$.optimizedBinaryString,$.base64);var P=new _(E,A,$);this.files[E]=P}var a=t("./utf8"),o=t("./utils"),l=t("./stream/GenericWorker"),h=t("./stream/StreamHelper"),b=t("./defaults"),g=t("./compressedObject"),_=t("./zipObject"),u=t("./generate"),y=t("./nodejsUtils"),f=t("./nodejs/NodejsStreamInputAdapter"),m=function(E){E.slice(-1)==="/"&&(E=E.substring(0,E.length-1));var C=E.lastIndexOf("/");return 0<C?E.substring(0,C):""},p=function(E){return E.slice(-1)!=="/"&&(E+="/"),E},w=function(E,C){return C=C!==void 0?C:b.createFolders,E=p(E),this.files[E]||r.call(this,E,null,{dir:!0,createFolders:C}),this.files[E]};function S(E){return Object.prototype.toString.call(E)==="[object RegExp]"}var O={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(E){var C,x,D;for(C in this.files)D=this.files[C],(x=C.slice(this.root.length,C.length))&&C.slice(0,this.root.length)===this.root&&E(x,D)},filter:function(E){var C=[];return this.forEach(function(x,D){E(x,D)&&C.push(D)}),C},file:function(E,C,x){if(arguments.length!==1)return E=this.root+E,r.call(this,E,C,x),this;if(S(E)){var D=E;return this.filter(function($,Z){return!Z.dir&&D.test($)})}var T=this.files[this.root+E];return T&&!T.dir?T:null},folder:function(E){if(!E)return this;if(S(E))return this.filter(function(T,$){return $.dir&&E.test(T)});var C=this.root+E,x=w.call(this,C),D=this.clone();return D.root=x.name,D},remove:function(E){E=this.root+E;var C=this.files[E];if(C||(E.slice(-1)!=="/"&&(E+="/"),C=this.files[E]),C&&!C.dir)delete this.files[E];else for(var x=this.filter(function(T,$){return $.name.slice(0,E.length)===E}),D=0;D<x.length;D++)delete this.files[x[D].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(E){var C,x={};try{if((x=o.extend(E||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=x.type.toLowerCase(),x.compression=x.compression.toUpperCase(),x.type==="binarystring"&&(x.type="string"),!x.type)throw new Error("No output type specified.");o.checkSupport(x.type),x.platform!=="darwin"&&x.platform!=="freebsd"&&x.platform!=="linux"&&x.platform!=="sunos"||(x.platform="UNIX"),x.platform==="win32"&&(x.platform="DOS");var D=x.comment||this.comment||"";C=u.generateWorker(this,x,D)}catch(T){(C=new l("error")).error(T)}return new h(C,x.type||"string",x.mimeType)},generateAsync:function(E,C){return this.generateInternalStream(E).accumulate(C)},generateNodeStream:function(E,C){return(E=E||{}).type||(E.type="nodebuffer"),this.generateInternalStream(E).toNodejsStream(C)}};s.exports=O},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,s,i){s.exports=t("stream")},{stream:void 0}],17:[function(t,s,i){var r=t("./DataReader");function a(o){r.call(this,o);for(var l=0;l<this.data.length;l++)o[l]=255&o[l]}t("../utils").inherits(a,r),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var l=o.charCodeAt(0),h=o.charCodeAt(1),b=o.charCodeAt(2),g=o.charCodeAt(3),_=this.length-4;0<=_;--_)if(this.data[_]===l&&this.data[_+1]===h&&this.data[_+2]===b&&this.data[_+3]===g)return _-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var l=o.charCodeAt(0),h=o.charCodeAt(1),b=o.charCodeAt(2),g=o.charCodeAt(3),_=this.readData(4);return l===_[0]&&h===_[1]&&b===_[2]&&g===_[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},s.exports=a},{"../utils":32,"./DataReader":18}],18:[function(t,s,i){var r=t("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l,h=0;for(this.checkOffset(o),l=this.index+o-1;l>=this.index;l--)h=(h<<8)+this.byteAt(l);return this.index+=o,h},readString:function(o){return r.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},s.exports=a},{"../utils":32}],19:[function(t,s,i){var r=t("./Uint8ArrayReader");function a(o){r.call(this,o)}t("../utils").inherits(a,r),a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},s.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,s,i){var r=t("./DataReader");function a(o){r.call(this,o)}t("../utils").inherits(a,r),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},s.exports=a},{"../utils":32,"./DataReader":18}],21:[function(t,s,i){var r=t("./ArrayReader");function a(o){r.call(this,o)}t("../utils").inherits(a,r),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},s.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(t,s,i){var r=t("../utils"),a=t("../support"),o=t("./ArrayReader"),l=t("./StringReader"),h=t("./NodeBufferReader"),b=t("./Uint8ArrayReader");s.exports=function(g){var _=r.getTypeOf(g);return r.checkSupport(_),_!=="string"||a.uint8array?_==="nodebuffer"?new h(g):a.uint8array?new b(r.transformTo("uint8array",g)):new o(r.transformTo("array",g)):new l(g)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,s,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,s,i){var r=t("./GenericWorker"),a=t("../utils");function o(l){r.call(this,"ConvertWorker to "+l),this.destType=l}a.inherits(o,r),o.prototype.processChunk=function(l){this.push({data:a.transformTo(this.destType,l.data),meta:l.meta})},s.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,s,i){var r=t("./GenericWorker"),a=t("../crc32");function o(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,r),o.prototype.processChunk=function(l){this.streamInfo.crc32=a(l.data,this.streamInfo.crc32||0),this.push(l)},s.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,s,i){var r=t("../utils"),a=t("./GenericWorker");function o(l){a.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}r.inherits(o,a),o.prototype.processChunk=function(l){if(l){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+l.data.length}a.prototype.processChunk.call(this,l)},s.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,s,i){var r=t("../utils"),a=t("./GenericWorker");function o(l){a.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(b){h.dataIsReady=!0,h.data=b,h.max=b&&b.length||0,h.type=r.getTypeOf(b),h.isPaused||h._tickAndRepeat()},function(b){h.error(b)})}r.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,h);break;case"uint8array":l=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":l=this.data.slice(this.index,h)}return this.index=h,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},s.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,s,i){function r(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var l=0;l<this._listeners[a].length;l++)this._listeners[a][l].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(l){o.processChunk(l)}),a.on("end",function(){o.end()}),a.on("error",function(l){o.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},s.exports=r},{}],29:[function(t,s,i){var r=t("../utils"),a=t("./ConvertWorker"),o=t("./GenericWorker"),l=t("../base64"),h=t("../support"),b=t("../external"),g=null;if(h.nodestream)try{g=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function _(y,f){return new b.Promise(function(m,p){var w=[],S=y._internalType,O=y._outputType,E=y._mimeType;y.on("data",function(C,x){w.push(C),f&&f(x)}).on("error",function(C){w=[],p(C)}).on("end",function(){try{var C=function(x,D,T){switch(x){case"blob":return r.newBlob(r.transformTo("arraybuffer",D),T);case"base64":return l.encode(D);default:return r.transformTo(x,D)}}(O,function(x,D){var T,$=0,Z=null,A=0;for(T=0;T<D.length;T++)A+=D[T].length;switch(x){case"string":return D.join("");case"array":return Array.prototype.concat.apply([],D);case"uint8array":for(Z=new Uint8Array(A),T=0;T<D.length;T++)Z.set(D[T],$),$+=D[T].length;return Z;case"nodebuffer":return Buffer.concat(D);default:throw new Error("concat : unsupported type '"+x+"'")}}(S,w),E);m(C)}catch(x){p(x)}w=[]}).resume()})}function u(y,f,m){var p=f;switch(f){case"blob":case"arraybuffer":p="uint8array";break;case"base64":p="string"}try{this._internalType=p,this._outputType=f,this._mimeType=m,r.checkSupport(p),this._worker=y.pipe(new a(p)),y.lock()}catch(w){this._worker=new o("error"),this._worker.error(w)}}u.prototype={accumulate:function(y){return _(this,y)},on:function(y,f){var m=this;return y==="data"?this._worker.on(y,function(p){f.call(m,p.data,p.meta)}):this._worker.on(y,function(){r.delay(f,arguments,m)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(r.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},y)}},s.exports=u},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,s,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined",i.nodebuffer=typeof Buffer!="undefined",i.uint8array=typeof Uint8Array!="undefined",typeof ArrayBuffer=="undefined")i.blob=!1;else{var r=new ArrayBuffer(0);try{i.blob=new Blob([r],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(r),i.blob=a.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(t,s,i){for(var r=t("./utils"),a=t("./support"),o=t("./nodejsUtils"),l=t("./stream/GenericWorker"),h=new Array(256),b=0;b<256;b++)h[b]=252<=b?6:248<=b?5:240<=b?4:224<=b?3:192<=b?2:1;h[254]=h[254]=1;function g(){l.call(this,"utf-8 decode"),this.leftOver=null}function _(){l.call(this,"utf-8 encode")}i.utf8encode=function(u){return a.nodebuffer?o.newBufferFrom(u,"utf-8"):function(y){var f,m,p,w,S,O=y.length,E=0;for(w=0;w<O;w++)(64512&(m=y.charCodeAt(w)))==55296&&w+1<O&&(64512&(p=y.charCodeAt(w+1)))==56320&&(m=65536+(m-55296<<10)+(p-56320),w++),E+=m<128?1:m<2048?2:m<65536?3:4;for(f=a.uint8array?new Uint8Array(E):new Array(E),w=S=0;S<E;w++)(64512&(m=y.charCodeAt(w)))==55296&&w+1<O&&(64512&(p=y.charCodeAt(w+1)))==56320&&(m=65536+(m-55296<<10)+(p-56320),w++),m<128?f[S++]=m:(m<2048?f[S++]=192|m>>>6:(m<65536?f[S++]=224|m>>>12:(f[S++]=240|m>>>18,f[S++]=128|m>>>12&63),f[S++]=128|m>>>6&63),f[S++]=128|63&m);return f}(u)},i.utf8decode=function(u){return a.nodebuffer?r.transformTo("nodebuffer",u).toString("utf-8"):function(y){var f,m,p,w,S=y.length,O=new Array(2*S);for(f=m=0;f<S;)if((p=y[f++])<128)O[m++]=p;else if(4<(w=h[p]))O[m++]=65533,f+=w-1;else{for(p&=w===2?31:w===3?15:7;1<w&&f<S;)p=p<<6|63&y[f++],w--;1<w?O[m++]=65533:p<65536?O[m++]=p:(p-=65536,O[m++]=55296|p>>10&1023,O[m++]=56320|1023&p)}return O.length!==m&&(O.subarray?O=O.subarray(0,m):O.length=m),r.applyFromCharCode(O)}(u=r.transformTo(a.uint8array?"uint8array":"array",u))},r.inherits(g,l),g.prototype.processChunk=function(u){var y=r.transformTo(a.uint8array?"uint8array":"array",u.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var f=y;(y=new Uint8Array(f.length+this.leftOver.length)).set(this.leftOver,0),y.set(f,this.leftOver.length)}else y=this.leftOver.concat(y);this.leftOver=null}var m=function(w,S){var O;for((S=S||w.length)>w.length&&(S=w.length),O=S-1;0<=O&&(192&w[O])==128;)O--;return O<0||O===0?S:O+h[w[O]]>S?O:S}(y),p=y;m!==y.length&&(a.uint8array?(p=y.subarray(0,m),this.leftOver=y.subarray(m,y.length)):(p=y.slice(0,m),this.leftOver=y.slice(m,y.length))),this.push({data:i.utf8decode(p),meta:u.meta})},g.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=g,r.inherits(_,l),_.prototype.processChunk=function(u){this.push({data:i.utf8encode(u.data),meta:u.meta})},i.Utf8EncodeWorker=_},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,s,i){var r=t("./support"),a=t("./base64"),o=t("./nodejsUtils"),l=t("./external");function h(f){return f}function b(f,m){for(var p=0;p<f.length;++p)m[p]=255&f.charCodeAt(p);return m}t("setimmediate"),i.newBlob=function(f,m){i.checkSupport("blob");try{return new Blob([f],{type:m})}catch{try{var p=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return p.append(f),p.getBlob(m)}catch{throw new Error("Bug : can't construct the Blob.")}}};var g={stringifyByChunk:function(f,m,p){var w=[],S=0,O=f.length;if(O<=p)return String.fromCharCode.apply(null,f);for(;S<O;)m==="array"||m==="nodebuffer"?w.push(String.fromCharCode.apply(null,f.slice(S,Math.min(S+p,O)))):w.push(String.fromCharCode.apply(null,f.subarray(S,Math.min(S+p,O)))),S+=p;return w.join("")},stringifyByChar:function(f){for(var m="",p=0;p<f.length;p++)m+=String.fromCharCode(f[p]);return m},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function _(f){var m=65536,p=i.getTypeOf(f),w=!0;if(p==="uint8array"?w=g.applyCanBeUsed.uint8array:p==="nodebuffer"&&(w=g.applyCanBeUsed.nodebuffer),w)for(;1<m;)try{return g.stringifyByChunk(f,p,m)}catch{m=Math.floor(m/2)}return g.stringifyByChar(f)}function u(f,m){for(var p=0;p<f.length;p++)m[p]=f[p];return m}i.applyFromCharCode=_;var y={};y.string={string:h,array:function(f){return b(f,new Array(f.length))},arraybuffer:function(f){return y.string.uint8array(f).buffer},uint8array:function(f){return b(f,new Uint8Array(f.length))},nodebuffer:function(f){return b(f,o.allocBuffer(f.length))}},y.array={string:_,array:h,arraybuffer:function(f){return new Uint8Array(f).buffer},uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return o.newBufferFrom(f)}},y.arraybuffer={string:function(f){return _(new Uint8Array(f))},array:function(f){return u(new Uint8Array(f),new Array(f.byteLength))},arraybuffer:h,uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return o.newBufferFrom(new Uint8Array(f))}},y.uint8array={string:_,array:function(f){return u(f,new Array(f.length))},arraybuffer:function(f){return f.buffer},uint8array:h,nodebuffer:function(f){return o.newBufferFrom(f)}},y.nodebuffer={string:_,array:function(f){return u(f,new Array(f.length))},arraybuffer:function(f){return y.nodebuffer.uint8array(f).buffer},uint8array:function(f){return u(f,new Uint8Array(f.length))},nodebuffer:h},i.transformTo=function(f,m){if(m=m||"",!f)return m;i.checkSupport(f);var p=i.getTypeOf(m);return y[p][f](m)},i.resolve=function(f){for(var m=f.split("/"),p=[],w=0;w<m.length;w++){var S=m[w];S==="."||S===""&&w!==0&&w!==m.length-1||(S===".."?p.pop():p.push(S))}return p.join("/")},i.getTypeOf=function(f){return typeof f=="string"?"string":Object.prototype.toString.call(f)==="[object Array]"?"array":r.nodebuffer&&o.isBuffer(f)?"nodebuffer":r.uint8array&&f instanceof Uint8Array?"uint8array":r.arraybuffer&&f instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(f){if(!r[f.toLowerCase()])throw new Error(f+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(f){var m,p,w="";for(p=0;p<(f||"").length;p++)w+="\\x"+((m=f.charCodeAt(p))<16?"0":"")+m.toString(16).toUpperCase();return w},i.delay=function(f,m,p){setImmediate(function(){f.apply(p||null,m||[])})},i.inherits=function(f,m){function p(){}p.prototype=m.prototype,f.prototype=new p},i.extend=function(){var f,m,p={};for(f=0;f<arguments.length;f++)for(m in arguments[f])Object.prototype.hasOwnProperty.call(arguments[f],m)&&p[m]===void 0&&(p[m]=arguments[f][m]);return p},i.prepareContent=function(f,m,p,w,S){return l.Promise.resolve(m).then(function(O){return r.blob&&(O instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(O))!==-1)&&typeof FileReader!="undefined"?new l.Promise(function(E,C){var x=new FileReader;x.onload=function(D){E(D.target.result)},x.onerror=function(D){C(D.target.error)},x.readAsArrayBuffer(O)}):O}).then(function(O){var E=i.getTypeOf(O);return E?(E==="arraybuffer"?O=i.transformTo("uint8array",O):E==="string"&&(S?O=a.decode(O):p&&w!==!0&&(O=function(C){return b(C,r.uint8array?new Uint8Array(C.length):new Array(C.length))}(O))),O):l.Promise.reject(new Error("Can't read the data of '"+f+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,s,i){var r=t("./reader/readerFor"),a=t("./utils"),o=t("./signature"),l=t("./zipEntry"),h=t("./support");function b(g){this.files=[],this.loadOptions=g}b.prototype={checkSignature:function(g){if(!this.reader.readAndCheckSignature(g)){this.reader.index-=4;var _=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(_)+", expected "+a.pretty(g)+")")}},isSignature:function(g,_){var u=this.reader.index;this.reader.setIndex(g);var y=this.reader.readString(4)===_;return this.reader.setIndex(u),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var g=this.reader.readData(this.zipCommentLength),_=h.uint8array?"uint8array":"array",u=a.transformTo(_,g);this.zipComment=this.loadOptions.decodeFileName(u)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var g,_,u,y=this.zip64EndOfCentralSize-44;0<y;)g=this.reader.readInt(2),_=this.reader.readInt(4),u=this.reader.readData(_),this.zip64ExtensibleData[g]={id:g,length:_,value:u}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var g,_;for(g=0;g<this.files.length;g++)_=this.files[g],this.reader.setIndex(_.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),_.readLocalPart(this.reader),_.handleUTF8(),_.processAttributes()},readCentralDir:function(){var g;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(g=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(g);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var g=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(g<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(g);var _=g;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(g=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(g),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var u=this.centralDirOffset+this.centralDirSize;this.zip64&&(u+=20,u+=12+this.zip64EndOfCentralSize);var y=_-u;if(0<y)this.isSignature(_,o.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(g){this.reader=r(g)},load:function(g){this.prepareReader(g),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},s.exports=b},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,s,i){var r=t("./reader/readerFor"),a=t("./utils"),o=t("./compressedObject"),l=t("./crc32"),h=t("./utf8"),b=t("./compressions"),g=t("./support");function _(u,y){this.options=u,this.loadOptions=y}_.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(u){var y,f;if(u.skip(22),this.fileNameLength=u.readInt(2),f=u.readInt(2),this.fileName=u.readData(this.fileNameLength),u.skip(f),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((y=function(m){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p)&&b[p].magic===m)return b[p];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,y,u.readData(this.compressedSize))},readCentralPart:function(u){this.versionMadeBy=u.readInt(2),u.skip(2),this.bitFlag=u.readInt(2),this.compressionMethod=u.readString(2),this.date=u.readDate(),this.crc32=u.readInt(4),this.compressedSize=u.readInt(4),this.uncompressedSize=u.readInt(4);var y=u.readInt(2);if(this.extraFieldsLength=u.readInt(2),this.fileCommentLength=u.readInt(2),this.diskNumberStart=u.readInt(2),this.internalFileAttributes=u.readInt(2),this.externalFileAttributes=u.readInt(4),this.localHeaderOffset=u.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");u.skip(y),this.readExtraFields(u),this.parseZIP64ExtraField(u),this.fileComment=u.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var u=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),u==0&&(this.dosPermissions=63&this.externalFileAttributes),u==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var u=r(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=u.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=u.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=u.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=u.readInt(4))}},readExtraFields:function(u){var y,f,m,p=u.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});u.index+4<p;)y=u.readInt(2),f=u.readInt(2),m=u.readData(f),this.extraFields[y]={id:y,length:f,value:m};u.setIndex(p)},handleUTF8:function(){var u=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var y=this.findExtraFieldUnicodePath();if(y!==null)this.fileNameStr=y;else{var f=a.transformTo(u,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(f)}var m=this.findExtraFieldUnicodeComment();if(m!==null)this.fileCommentStr=m;else{var p=a.transformTo(u,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(p)}}},findExtraFieldUnicodePath:function(){var u=this.extraFields[28789];if(u){var y=r(u.value);return y.readInt(1)!==1||l(this.fileName)!==y.readInt(4)?null:h.utf8decode(y.readData(u.length-5))}return null},findExtraFieldUnicodeComment:function(){var u=this.extraFields[25461];if(u){var y=r(u.value);return y.readInt(1)!==1||l(this.fileComment)!==y.readInt(4)?null:h.utf8decode(y.readData(u.length-5))}return null}},s.exports=_},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,s,i){function r(y,f,m){this.name=y,this.dir=m.dir,this.date=m.date,this.comment=m.comment,this.unixPermissions=m.unixPermissions,this.dosPermissions=m.dosPermissions,this._data=f,this._dataBinary=m.binary,this.options={compression:m.compression,compressionOptions:m.compressionOptions}}var a=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),l=t("./utf8"),h=t("./compressedObject"),b=t("./stream/GenericWorker");r.prototype={internalStream:function(y){var f=null,m="string";try{if(!y)throw new Error("No output type specified.");var p=(m=y.toLowerCase())==="string"||m==="text";m!=="binarystring"&&m!=="text"||(m="string"),f=this._decompressWorker();var w=!this._dataBinary;w&&!p&&(f=f.pipe(new l.Utf8EncodeWorker)),!w&&p&&(f=f.pipe(new l.Utf8DecodeWorker))}catch(S){(f=new b("error")).error(S)}return new a(f,m,"")},async:function(y,f){return this.internalStream(y).accumulate(f)},nodeStream:function(y,f){return this.internalStream(y||"nodebuffer").toNodejsStream(f)},_compressWorker:function(y,f){if(this._data instanceof h&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var m=this._decompressWorker();return this._dataBinary||(m=m.pipe(new l.Utf8EncodeWorker)),h.createWorkerFrom(m,y,f)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof b?this._data:new o(this._data)}};for(var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],_=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},u=0;u<g.length;u++)r.prototype[g[u]]=_;s.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,s,i){(function(r){var a,o,l=r.MutationObserver||r.WebKitMutationObserver;if(l){var h=0,b=new l(y),g=r.document.createTextNode("");b.observe(g,{characterData:!0}),a=function(){g.data=h=++h%2}}else if(r.setImmediate||r.MessageChannel===void 0)a="document"in r&&"onreadystatechange"in r.document.createElement("script")?function(){var f=r.document.createElement("script");f.onreadystatechange=function(){y(),f.onreadystatechange=null,f.parentNode.removeChild(f),f=null},r.document.documentElement.appendChild(f)}:function(){setTimeout(y,0)};else{var _=new r.MessageChannel;_.port1.onmessage=y,a=function(){_.port2.postMessage(0)}}var u=[];function y(){var f,m;o=!0;for(var p=u.length;p;){for(m=u,u=[],f=-1;++f<p;)m[f]();p=u.length}o=!1}s.exports=function(f){u.push(f)!==1||o||a()}}).call(this,typeof Vt!="undefined"?Vt:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],37:[function(t,s,i){var r=t("immediate");function a(){}var o={},l=["REJECTED"],h=["FULFILLED"],b=["PENDING"];function g(p){if(typeof p!="function")throw new TypeError("resolver must be a function");this.state=b,this.queue=[],this.outcome=void 0,p!==a&&f(this,p)}function _(p,w,S){this.promise=p,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function u(p,w,S){r(function(){var O;try{O=w(S)}catch(E){return o.reject(p,E)}O===p?o.reject(p,new TypeError("Cannot resolve promise with itself")):o.resolve(p,O)})}function y(p){var w=p&&p.then;if(p&&(typeof p=="object"||typeof p=="function")&&typeof w=="function")return function(){w.apply(p,arguments)}}function f(p,w){var S=!1;function O(x){S||(S=!0,o.reject(p,x))}function E(x){S||(S=!0,o.resolve(p,x))}var C=m(function(){w(E,O)});C.status==="error"&&O(C.value)}function m(p,w){var S={};try{S.value=p(w),S.status="success"}catch(O){S.status="error",S.value=O}return S}(s.exports=g).prototype.finally=function(p){if(typeof p!="function")return this;var w=this.constructor;return this.then(function(S){return w.resolve(p()).then(function(){return S})},function(S){return w.resolve(p()).then(function(){throw S})})},g.prototype.catch=function(p){return this.then(null,p)},g.prototype.then=function(p,w){if(typeof p!="function"&&this.state===h||typeof w!="function"&&this.state===l)return this;var S=new this.constructor(a);return this.state!==b?u(S,this.state===h?p:w,this.outcome):this.queue.push(new _(S,p,w)),S},_.prototype.callFulfilled=function(p){o.resolve(this.promise,p)},_.prototype.otherCallFulfilled=function(p){u(this.promise,this.onFulfilled,p)},_.prototype.callRejected=function(p){o.reject(this.promise,p)},_.prototype.otherCallRejected=function(p){u(this.promise,this.onRejected,p)},o.resolve=function(p,w){var S=m(y,w);if(S.status==="error")return o.reject(p,S.value);var O=S.value;if(O)f(p,O);else{p.state=h,p.outcome=w;for(var E=-1,C=p.queue.length;++E<C;)p.queue[E].callFulfilled(w)}return p},o.reject=function(p,w){p.state=l,p.outcome=w;for(var S=-1,O=p.queue.length;++S<O;)p.queue[S].callRejected(w);return p},g.resolve=function(p){return p instanceof this?p:o.resolve(new this(a),p)},g.reject=function(p){var w=new this(a);return o.reject(w,p)},g.all=function(p){var w=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=p.length,O=!1;if(!S)return this.resolve([]);for(var E=new Array(S),C=0,x=-1,D=new this(a);++x<S;)T(p[x],x);return D;function T($,Z){w.resolve($).then(function(A){E[Z]=A,++C!==S||O||(O=!0,o.resolve(D,E))},function(A){O||(O=!0,o.reject(D,A))})}},g.race=function(p){var w=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=p.length,O=!1;if(!S)return this.resolve([]);for(var E=-1,C=new this(a);++E<S;)x=p[E],w.resolve(x).then(function(D){O||(O=!0,o.resolve(C,D))},function(D){O||(O=!0,o.reject(C,D))});var x;return C}},{immediate:36}],38:[function(t,s,i){var r={};(0,t("./lib/utils/common").assign)(r,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),s.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,s,i){var r=t("./zlib/deflate"),a=t("./utils/common"),o=t("./utils/strings"),l=t("./zlib/messages"),h=t("./zlib/zstream"),b=Object.prototype.toString,g=0,_=-1,u=0,y=8;function f(p){if(!(this instanceof f))return new f(p);this.options=a.assign({level:_,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:u,to:""},p||{});var w=this.options;w.raw&&0<w.windowBits?w.windowBits=-w.windowBits:w.gzip&&0<w.windowBits&&w.windowBits<16&&(w.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var S=r.deflateInit2(this.strm,w.level,w.method,w.windowBits,w.memLevel,w.strategy);if(S!==g)throw new Error(l[S]);if(w.header&&r.deflateSetHeader(this.strm,w.header),w.dictionary){var O;if(O=typeof w.dictionary=="string"?o.string2buf(w.dictionary):b.call(w.dictionary)==="[object ArrayBuffer]"?new Uint8Array(w.dictionary):w.dictionary,(S=r.deflateSetDictionary(this.strm,O))!==g)throw new Error(l[S]);this._dict_set=!0}}function m(p,w){var S=new f(w);if(S.push(p,!0),S.err)throw S.msg||l[S.err];return S.result}f.prototype.push=function(p,w){var S,O,E=this.strm,C=this.options.chunkSize;if(this.ended)return!1;O=w===~~w?w:w===!0?4:0,typeof p=="string"?E.input=o.string2buf(p):b.call(p)==="[object ArrayBuffer]"?E.input=new Uint8Array(p):E.input=p,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new a.Buf8(C),E.next_out=0,E.avail_out=C),(S=r.deflate(E,O))!==1&&S!==g)return this.onEnd(S),!(this.ended=!0);E.avail_out!==0&&(E.avail_in!==0||O!==4&&O!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(E.output,E.next_out))):this.onData(a.shrinkBuf(E.output,E.next_out)))}while((0<E.avail_in||E.avail_out===0)&&S!==1);return O===4?(S=r.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===g):O!==2||(this.onEnd(g),!(E.avail_out=0))},f.prototype.onData=function(p){this.chunks.push(p)},f.prototype.onEnd=function(p){p===g&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},i.Deflate=f,i.deflate=m,i.deflateRaw=function(p,w){return(w=w||{}).raw=!0,m(p,w)},i.gzip=function(p,w){return(w=w||{}).gzip=!0,m(p,w)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,s,i){var r=t("./zlib/inflate"),a=t("./utils/common"),o=t("./utils/strings"),l=t("./zlib/constants"),h=t("./zlib/messages"),b=t("./zlib/zstream"),g=t("./zlib/gzheader"),_=Object.prototype.toString;function u(f){if(!(this instanceof u))return new u(f);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},f||{});var m=this.options;m.raw&&0<=m.windowBits&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),!(0<=m.windowBits&&m.windowBits<16)||f&&f.windowBits||(m.windowBits+=32),15<m.windowBits&&m.windowBits<48&&(15&m.windowBits)==0&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new b,this.strm.avail_out=0;var p=r.inflateInit2(this.strm,m.windowBits);if(p!==l.Z_OK)throw new Error(h[p]);this.header=new g,r.inflateGetHeader(this.strm,this.header)}function y(f,m){var p=new u(m);if(p.push(f,!0),p.err)throw p.msg||h[p.err];return p.result}u.prototype.push=function(f,m){var p,w,S,O,E,C,x=this.strm,D=this.options.chunkSize,T=this.options.dictionary,$=!1;if(this.ended)return!1;w=m===~~m?m:m===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof f=="string"?x.input=o.binstring2buf(f):_.call(f)==="[object ArrayBuffer]"?x.input=new Uint8Array(f):x.input=f,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new a.Buf8(D),x.next_out=0,x.avail_out=D),(p=r.inflate(x,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&T&&(C=typeof T=="string"?o.string2buf(T):_.call(T)==="[object ArrayBuffer]"?new Uint8Array(T):T,p=r.inflateSetDictionary(this.strm,C)),p===l.Z_BUF_ERROR&&$===!0&&(p=l.Z_OK,$=!1),p!==l.Z_STREAM_END&&p!==l.Z_OK)return this.onEnd(p),!(this.ended=!0);x.next_out&&(x.avail_out!==0&&p!==l.Z_STREAM_END&&(x.avail_in!==0||w!==l.Z_FINISH&&w!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=o.utf8border(x.output,x.next_out),O=x.next_out-S,E=o.buf2string(x.output,S),x.next_out=O,x.avail_out=D-O,O&&a.arraySet(x.output,x.output,S,O,0),this.onData(E)):this.onData(a.shrinkBuf(x.output,x.next_out)))),x.avail_in===0&&x.avail_out===0&&($=!0)}while((0<x.avail_in||x.avail_out===0)&&p!==l.Z_STREAM_END);return p===l.Z_STREAM_END&&(w=l.Z_FINISH),w===l.Z_FINISH?(p=r.inflateEnd(this.strm),this.onEnd(p),this.ended=!0,p===l.Z_OK):w!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(x.avail_out=0))},u.prototype.onData=function(f){this.chunks.push(f)},u.prototype.onEnd=function(f){f===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=f,this.msg=this.strm.msg},i.Inflate=u,i.inflate=y,i.inflateRaw=function(f,m){return(m=m||{}).raw=!0,y(f,m)},i.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,s,i){var r=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";i.assign=function(l){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var b=h.shift();if(b){if(typeof b!="object")throw new TypeError(b+"must be non-object");for(var g in b)b.hasOwnProperty(g)&&(l[g]=b[g])}}return l},i.shrinkBuf=function(l,h){return l.length===h?l:l.subarray?l.subarray(0,h):(l.length=h,l)};var a={arraySet:function(l,h,b,g,_){if(h.subarray&&l.subarray)l.set(h.subarray(b,b+g),_);else for(var u=0;u<g;u++)l[_+u]=h[b+u]},flattenChunks:function(l){var h,b,g,_,u,y;for(h=g=0,b=l.length;h<b;h++)g+=l[h].length;for(y=new Uint8Array(g),h=_=0,b=l.length;h<b;h++)u=l[h],y.set(u,_),_+=u.length;return y}},o={arraySet:function(l,h,b,g,_){for(var u=0;u<g;u++)l[_+u]=h[b+u]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,a)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(r)},{}],42:[function(t,s,i){var r=t("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new r.Buf8(256),h=0;h<256;h++)l[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function b(g,_){if(_<65537&&(g.subarray&&o||!g.subarray&&a))return String.fromCharCode.apply(null,r.shrinkBuf(g,_));for(var u="",y=0;y<_;y++)u+=String.fromCharCode(g[y]);return u}l[254]=l[254]=1,i.string2buf=function(g){var _,u,y,f,m,p=g.length,w=0;for(f=0;f<p;f++)(64512&(u=g.charCodeAt(f)))==55296&&f+1<p&&(64512&(y=g.charCodeAt(f+1)))==56320&&(u=65536+(u-55296<<10)+(y-56320),f++),w+=u<128?1:u<2048?2:u<65536?3:4;for(_=new r.Buf8(w),f=m=0;m<w;f++)(64512&(u=g.charCodeAt(f)))==55296&&f+1<p&&(64512&(y=g.charCodeAt(f+1)))==56320&&(u=65536+(u-55296<<10)+(y-56320),f++),u<128?_[m++]=u:(u<2048?_[m++]=192|u>>>6:(u<65536?_[m++]=224|u>>>12:(_[m++]=240|u>>>18,_[m++]=128|u>>>12&63),_[m++]=128|u>>>6&63),_[m++]=128|63&u);return _},i.buf2binstring=function(g){return b(g,g.length)},i.binstring2buf=function(g){for(var _=new r.Buf8(g.length),u=0,y=_.length;u<y;u++)_[u]=g.charCodeAt(u);return _},i.buf2string=function(g,_){var u,y,f,m,p=_||g.length,w=new Array(2*p);for(u=y=0;u<p;)if((f=g[u++])<128)w[y++]=f;else if(4<(m=l[f]))w[y++]=65533,u+=m-1;else{for(f&=m===2?31:m===3?15:7;1<m&&u<p;)f=f<<6|63&g[u++],m--;1<m?w[y++]=65533:f<65536?w[y++]=f:(f-=65536,w[y++]=55296|f>>10&1023,w[y++]=56320|1023&f)}return b(w,y)},i.utf8border=function(g,_){var u;for((_=_||g.length)>g.length&&(_=g.length),u=_-1;0<=u&&(192&g[u])==128;)u--;return u<0||u===0?_:u+l[g[u]]>_?u:_}},{"./common":41}],43:[function(t,s,i){s.exports=function(r,a,o,l){for(var h=65535&r|0,b=r>>>16&65535|0,g=0;o!==0;){for(o-=g=2e3<o?2e3:o;b=b+(h=h+a[l++]|0)|0,--g;);h%=65521,b%=65521}return h|b<<16|0}},{}],44:[function(t,s,i){s.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,s,i){var r=function(){for(var a,o=[],l=0;l<256;l++){a=l;for(var h=0;h<8;h++)a=1&a?3988292384^a>>>1:a>>>1;o[l]=a}return o}();s.exports=function(a,o,l,h){var b=r,g=h+l;a^=-1;for(var _=h;_<g;_++)a=a>>>8^b[255&(a^o[_])];return-1^a}},{}],46:[function(t,s,i){var r,a=t("../utils/common"),o=t("./trees"),l=t("./adler32"),h=t("./crc32"),b=t("./messages"),g=0,_=4,u=0,y=-2,f=-1,m=4,p=2,w=8,S=9,O=286,E=30,C=19,x=2*O+1,D=15,T=3,$=258,Z=$+T+1,A=42,P=113,d=1,F=2,X=3,U=4;function te(c,R){return c.msg=b[R],R}function K(c){return(c<<1)-(4<c?9:0)}function Q(c){for(var R=c.length;0<=--R;)c[R]=0}function B(c){var R=c.state,z=R.pending;z>c.avail_out&&(z=c.avail_out),z!==0&&(a.arraySet(c.output,R.pending_buf,R.pending_out,z,c.next_out),c.next_out+=z,R.pending_out+=z,c.total_out+=z,c.avail_out-=z,R.pending-=z,R.pending===0&&(R.pending_out=0))}function L(c,R){o._tr_flush_block(c,0<=c.block_start?c.block_start:-1,c.strstart-c.block_start,R),c.block_start=c.strstart,B(c.strm)}function J(c,R){c.pending_buf[c.pending++]=R}function G(c,R){c.pending_buf[c.pending++]=R>>>8&255,c.pending_buf[c.pending++]=255&R}function V(c,R){var z,k,v=c.max_chain_length,I=c.strstart,M=c.prev_length,j=c.nice_match,N=c.strstart>c.w_size-Z?c.strstart-(c.w_size-Z):0,W=c.window,H=c.w_mask,q=c.prev,Y=c.strstart+$,ae=W[I+M-1],se=W[I+M];c.prev_length>=c.good_match&&(v>>=2),j>c.lookahead&&(j=c.lookahead);do if(W[(z=R)+M]===se&&W[z+M-1]===ae&&W[z]===W[I]&&W[++z]===W[I+1]){I+=2,z++;do;while(W[++I]===W[++z]&&W[++I]===W[++z]&&W[++I]===W[++z]&&W[++I]===W[++z]&&W[++I]===W[++z]&&W[++I]===W[++z]&&W[++I]===W[++z]&&W[++I]===W[++z]&&I<Y);if(k=$-(Y-I),I=Y-$,M<k){if(c.match_start=R,j<=(M=k))break;ae=W[I+M-1],se=W[I+M]}}while((R=q[R&H])>N&&--v!=0);return M<=c.lookahead?M:c.lookahead}function ue(c){var R,z,k,v,I,M,j,N,W,H,q=c.w_size;do{if(v=c.window_size-c.lookahead-c.strstart,c.strstart>=q+(q-Z)){for(a.arraySet(c.window,c.window,q,q,0),c.match_start-=q,c.strstart-=q,c.block_start-=q,R=z=c.hash_size;k=c.head[--R],c.head[R]=q<=k?k-q:0,--z;);for(R=z=q;k=c.prev[--R],c.prev[R]=q<=k?k-q:0,--z;);v+=q}if(c.strm.avail_in===0)break;if(M=c.strm,j=c.window,N=c.strstart+c.lookahead,W=v,H=void 0,H=M.avail_in,W<H&&(H=W),z=H===0?0:(M.avail_in-=H,a.arraySet(j,M.input,M.next_in,H,N),M.state.wrap===1?M.adler=l(M.adler,j,H,N):M.state.wrap===2&&(M.adler=h(M.adler,j,H,N)),M.next_in+=H,M.total_in+=H,H),c.lookahead+=z,c.lookahead+c.insert>=T)for(I=c.strstart-c.insert,c.ins_h=c.window[I],c.ins_h=(c.ins_h<<c.hash_shift^c.window[I+1])&c.hash_mask;c.insert&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[I+T-1])&c.hash_mask,c.prev[I&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=I,I++,c.insert--,!(c.lookahead+c.insert<T)););}while(c.lookahead<Z&&c.strm.avail_in!==0)}function ge(c,R){for(var z,k;;){if(c.lookahead<Z){if(ue(c),c.lookahead<Z&&R===g)return d;if(c.lookahead===0)break}if(z=0,c.lookahead>=T&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+T-1])&c.hash_mask,z=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart),z!==0&&c.strstart-z<=c.w_size-Z&&(c.match_length=V(c,z)),c.match_length>=T)if(k=o._tr_tally(c,c.strstart-c.match_start,c.match_length-T),c.lookahead-=c.match_length,c.match_length<=c.max_lazy_match&&c.lookahead>=T){for(c.match_length--;c.strstart++,c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+T-1])&c.hash_mask,z=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart,--c.match_length!=0;);c.strstart++}else c.strstart+=c.match_length,c.match_length=0,c.ins_h=c.window[c.strstart],c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+1])&c.hash_mask;else k=o._tr_tally(c,0,c.window[c.strstart]),c.lookahead--,c.strstart++;if(k&&(L(c,!1),c.strm.avail_out===0))return d}return c.insert=c.strstart<T-1?c.strstart:T-1,R===_?(L(c,!0),c.strm.avail_out===0?X:U):c.last_lit&&(L(c,!1),c.strm.avail_out===0)?d:F}function ne(c,R){for(var z,k,v;;){if(c.lookahead<Z){if(ue(c),c.lookahead<Z&&R===g)return d;if(c.lookahead===0)break}if(z=0,c.lookahead>=T&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+T-1])&c.hash_mask,z=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart),c.prev_length=c.match_length,c.prev_match=c.match_start,c.match_length=T-1,z!==0&&c.prev_length<c.max_lazy_match&&c.strstart-z<=c.w_size-Z&&(c.match_length=V(c,z),c.match_length<=5&&(c.strategy===1||c.match_length===T&&4096<c.strstart-c.match_start)&&(c.match_length=T-1)),c.prev_length>=T&&c.match_length<=c.prev_length){for(v=c.strstart+c.lookahead-T,k=o._tr_tally(c,c.strstart-1-c.prev_match,c.prev_length-T),c.lookahead-=c.prev_length-1,c.prev_length-=2;++c.strstart<=v&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+T-1])&c.hash_mask,z=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart),--c.prev_length!=0;);if(c.match_available=0,c.match_length=T-1,c.strstart++,k&&(L(c,!1),c.strm.avail_out===0))return d}else if(c.match_available){if((k=o._tr_tally(c,0,c.window[c.strstart-1]))&&L(c,!1),c.strstart++,c.lookahead--,c.strm.avail_out===0)return d}else c.match_available=1,c.strstart++,c.lookahead--}return c.match_available&&(k=o._tr_tally(c,0,c.window[c.strstart-1]),c.match_available=0),c.insert=c.strstart<T-1?c.strstart:T-1,R===_?(L(c,!0),c.strm.avail_out===0?X:U):c.last_lit&&(L(c,!1),c.strm.avail_out===0)?d:F}function ie(c,R,z,k,v){this.good_length=c,this.max_lazy=R,this.nice_length=z,this.max_chain=k,this.func=v}function de(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=w,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*x),this.dyn_dtree=new a.Buf16(2*(2*E+1)),this.bl_tree=new a.Buf16(2*(2*C+1)),Q(this.dyn_ltree),Q(this.dyn_dtree),Q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(D+1),this.heap=new a.Buf16(2*O+1),Q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*O+1),Q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function fe(c){var R;return c&&c.state?(c.total_in=c.total_out=0,c.data_type=p,(R=c.state).pending=0,R.pending_out=0,R.wrap<0&&(R.wrap=-R.wrap),R.status=R.wrap?A:P,c.adler=R.wrap===2?0:1,R.last_flush=g,o._tr_init(R),u):te(c,y)}function Ne(c){var R=fe(c);return R===u&&function(z){z.window_size=2*z.w_size,Q(z.head),z.max_lazy_match=r[z.level].max_lazy,z.good_match=r[z.level].good_length,z.nice_match=r[z.level].nice_length,z.max_chain_length=r[z.level].max_chain,z.strstart=0,z.block_start=0,z.lookahead=0,z.insert=0,z.match_length=z.prev_length=T-1,z.match_available=0,z.ins_h=0}(c.state),R}function Oe(c,R,z,k,v,I){if(!c)return y;var M=1;if(R===f&&(R=6),k<0?(M=0,k=-k):15<k&&(M=2,k-=16),v<1||S<v||z!==w||k<8||15<k||R<0||9<R||I<0||m<I)return te(c,y);k===8&&(k=9);var j=new de;return(c.state=j).strm=c,j.wrap=M,j.gzhead=null,j.w_bits=k,j.w_size=1<<j.w_bits,j.w_mask=j.w_size-1,j.hash_bits=v+7,j.hash_size=1<<j.hash_bits,j.hash_mask=j.hash_size-1,j.hash_shift=~~((j.hash_bits+T-1)/T),j.window=new a.Buf8(2*j.w_size),j.head=new a.Buf16(j.hash_size),j.prev=new a.Buf16(j.w_size),j.lit_bufsize=1<<v+6,j.pending_buf_size=4*j.lit_bufsize,j.pending_buf=new a.Buf8(j.pending_buf_size),j.d_buf=1*j.lit_bufsize,j.l_buf=3*j.lit_bufsize,j.level=R,j.strategy=I,j.method=z,Ne(c)}r=[new ie(0,0,0,0,function(c,R){var z=65535;for(z>c.pending_buf_size-5&&(z=c.pending_buf_size-5);;){if(c.lookahead<=1){if(ue(c),c.lookahead===0&&R===g)return d;if(c.lookahead===0)break}c.strstart+=c.lookahead,c.lookahead=0;var k=c.block_start+z;if((c.strstart===0||c.strstart>=k)&&(c.lookahead=c.strstart-k,c.strstart=k,L(c,!1),c.strm.avail_out===0)||c.strstart-c.block_start>=c.w_size-Z&&(L(c,!1),c.strm.avail_out===0))return d}return c.insert=0,R===_?(L(c,!0),c.strm.avail_out===0?X:U):(c.strstart>c.block_start&&(L(c,!1),c.strm.avail_out),d)}),new ie(4,4,8,4,ge),new ie(4,5,16,8,ge),new ie(4,6,32,32,ge),new ie(4,4,16,16,ne),new ie(8,16,32,32,ne),new ie(8,16,128,128,ne),new ie(8,32,128,256,ne),new ie(32,128,258,1024,ne),new ie(32,258,258,4096,ne)],i.deflateInit=function(c,R){return Oe(c,R,w,15,8,0)},i.deflateInit2=Oe,i.deflateReset=Ne,i.deflateResetKeep=fe,i.deflateSetHeader=function(c,R){return c&&c.state?c.state.wrap!==2?y:(c.state.gzhead=R,u):y},i.deflate=function(c,R){var z,k,v,I;if(!c||!c.state||5<R||R<0)return c?te(c,y):y;if(k=c.state,!c.output||!c.input&&c.avail_in!==0||k.status===666&&R!==_)return te(c,c.avail_out===0?-5:y);if(k.strm=c,z=k.last_flush,k.last_flush=R,k.status===A)if(k.wrap===2)c.adler=0,J(k,31),J(k,139),J(k,8),k.gzhead?(J(k,(k.gzhead.text?1:0)+(k.gzhead.hcrc?2:0)+(k.gzhead.extra?4:0)+(k.gzhead.name?8:0)+(k.gzhead.comment?16:0)),J(k,255&k.gzhead.time),J(k,k.gzhead.time>>8&255),J(k,k.gzhead.time>>16&255),J(k,k.gzhead.time>>24&255),J(k,k.level===9?2:2<=k.strategy||k.level<2?4:0),J(k,255&k.gzhead.os),k.gzhead.extra&&k.gzhead.extra.length&&(J(k,255&k.gzhead.extra.length),J(k,k.gzhead.extra.length>>8&255)),k.gzhead.hcrc&&(c.adler=h(c.adler,k.pending_buf,k.pending,0)),k.gzindex=0,k.status=69):(J(k,0),J(k,0),J(k,0),J(k,0),J(k,0),J(k,k.level===9?2:2<=k.strategy||k.level<2?4:0),J(k,3),k.status=P);else{var M=w+(k.w_bits-8<<4)<<8;M|=(2<=k.strategy||k.level<2?0:k.level<6?1:k.level===6?2:3)<<6,k.strstart!==0&&(M|=32),M+=31-M%31,k.status=P,G(k,M),k.strstart!==0&&(G(k,c.adler>>>16),G(k,65535&c.adler)),c.adler=1}if(k.status===69)if(k.gzhead.extra){for(v=k.pending;k.gzindex<(65535&k.gzhead.extra.length)&&(k.pending!==k.pending_buf_size||(k.gzhead.hcrc&&k.pending>v&&(c.adler=h(c.adler,k.pending_buf,k.pending-v,v)),B(c),v=k.pending,k.pending!==k.pending_buf_size));)J(k,255&k.gzhead.extra[k.gzindex]),k.gzindex++;k.gzhead.hcrc&&k.pending>v&&(c.adler=h(c.adler,k.pending_buf,k.pending-v,v)),k.gzindex===k.gzhead.extra.length&&(k.gzindex=0,k.status=73)}else k.status=73;if(k.status===73)if(k.gzhead.name){v=k.pending;do{if(k.pending===k.pending_buf_size&&(k.gzhead.hcrc&&k.pending>v&&(c.adler=h(c.adler,k.pending_buf,k.pending-v,v)),B(c),v=k.pending,k.pending===k.pending_buf_size)){I=1;break}I=k.gzindex<k.gzhead.name.length?255&k.gzhead.name.charCodeAt(k.gzindex++):0,J(k,I)}while(I!==0);k.gzhead.hcrc&&k.pending>v&&(c.adler=h(c.adler,k.pending_buf,k.pending-v,v)),I===0&&(k.gzindex=0,k.status=91)}else k.status=91;if(k.status===91)if(k.gzhead.comment){v=k.pending;do{if(k.pending===k.pending_buf_size&&(k.gzhead.hcrc&&k.pending>v&&(c.adler=h(c.adler,k.pending_buf,k.pending-v,v)),B(c),v=k.pending,k.pending===k.pending_buf_size)){I=1;break}I=k.gzindex<k.gzhead.comment.length?255&k.gzhead.comment.charCodeAt(k.gzindex++):0,J(k,I)}while(I!==0);k.gzhead.hcrc&&k.pending>v&&(c.adler=h(c.adler,k.pending_buf,k.pending-v,v)),I===0&&(k.status=103)}else k.status=103;if(k.status===103&&(k.gzhead.hcrc?(k.pending+2>k.pending_buf_size&&B(c),k.pending+2<=k.pending_buf_size&&(J(k,255&c.adler),J(k,c.adler>>8&255),c.adler=0,k.status=P)):k.status=P),k.pending!==0){if(B(c),c.avail_out===0)return k.last_flush=-1,u}else if(c.avail_in===0&&K(R)<=K(z)&&R!==_)return te(c,-5);if(k.status===666&&c.avail_in!==0)return te(c,-5);if(c.avail_in!==0||k.lookahead!==0||R!==g&&k.status!==666){var j=k.strategy===2?function(N,W){for(var H;;){if(N.lookahead===0&&(ue(N),N.lookahead===0)){if(W===g)return d;break}if(N.match_length=0,H=o._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++,H&&(L(N,!1),N.strm.avail_out===0))return d}return N.insert=0,W===_?(L(N,!0),N.strm.avail_out===0?X:U):N.last_lit&&(L(N,!1),N.strm.avail_out===0)?d:F}(k,R):k.strategy===3?function(N,W){for(var H,q,Y,ae,se=N.window;;){if(N.lookahead<=$){if(ue(N),N.lookahead<=$&&W===g)return d;if(N.lookahead===0)break}if(N.match_length=0,N.lookahead>=T&&0<N.strstart&&(q=se[Y=N.strstart-1])===se[++Y]&&q===se[++Y]&&q===se[++Y]){ae=N.strstart+$;do;while(q===se[++Y]&&q===se[++Y]&&q===se[++Y]&&q===se[++Y]&&q===se[++Y]&&q===se[++Y]&&q===se[++Y]&&q===se[++Y]&&Y<ae);N.match_length=$-(ae-Y),N.match_length>N.lookahead&&(N.match_length=N.lookahead)}if(N.match_length>=T?(H=o._tr_tally(N,1,N.match_length-T),N.lookahead-=N.match_length,N.strstart+=N.match_length,N.match_length=0):(H=o._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++),H&&(L(N,!1),N.strm.avail_out===0))return d}return N.insert=0,W===_?(L(N,!0),N.strm.avail_out===0?X:U):N.last_lit&&(L(N,!1),N.strm.avail_out===0)?d:F}(k,R):r[k.level].func(k,R);if(j!==X&&j!==U||(k.status=666),j===d||j===X)return c.avail_out===0&&(k.last_flush=-1),u;if(j===F&&(R===1?o._tr_align(k):R!==5&&(o._tr_stored_block(k,0,0,!1),R===3&&(Q(k.head),k.lookahead===0&&(k.strstart=0,k.block_start=0,k.insert=0))),B(c),c.avail_out===0))return k.last_flush=-1,u}return R!==_?u:k.wrap<=0?1:(k.wrap===2?(J(k,255&c.adler),J(k,c.adler>>8&255),J(k,c.adler>>16&255),J(k,c.adler>>24&255),J(k,255&c.total_in),J(k,c.total_in>>8&255),J(k,c.total_in>>16&255),J(k,c.total_in>>24&255)):(G(k,c.adler>>>16),G(k,65535&c.adler)),B(c),0<k.wrap&&(k.wrap=-k.wrap),k.pending!==0?u:1)},i.deflateEnd=function(c){var R;return c&&c.state?(R=c.state.status)!==A&&R!==69&&R!==73&&R!==91&&R!==103&&R!==P&&R!==666?te(c,y):(c.state=null,R===P?te(c,-3):u):y},i.deflateSetDictionary=function(c,R){var z,k,v,I,M,j,N,W,H=R.length;if(!c||!c.state||(I=(z=c.state).wrap)===2||I===1&&z.status!==A||z.lookahead)return y;for(I===1&&(c.adler=l(c.adler,R,H,0)),z.wrap=0,H>=z.w_size&&(I===0&&(Q(z.head),z.strstart=0,z.block_start=0,z.insert=0),W=new a.Buf8(z.w_size),a.arraySet(W,R,H-z.w_size,z.w_size,0),R=W,H=z.w_size),M=c.avail_in,j=c.next_in,N=c.input,c.avail_in=H,c.next_in=0,c.input=R,ue(z);z.lookahead>=T;){for(k=z.strstart,v=z.lookahead-(T-1);z.ins_h=(z.ins_h<<z.hash_shift^z.window[k+T-1])&z.hash_mask,z.prev[k&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=k,k++,--v;);z.strstart=k,z.lookahead=T-1,ue(z)}return z.strstart+=z.lookahead,z.block_start=z.strstart,z.insert=z.lookahead,z.lookahead=0,z.match_length=z.prev_length=T-1,z.match_available=0,c.next_in=j,c.input=N,c.avail_in=M,z.wrap=I,u},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,s,i){s.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,s,i){s.exports=function(r,a){var o,l,h,b,g,_,u,y,f,m,p,w,S,O,E,C,x,D,T,$,Z,A,P,d,F;o=r.state,l=r.next_in,d=r.input,h=l+(r.avail_in-5),b=r.next_out,F=r.output,g=b-(a-r.avail_out),_=b+(r.avail_out-257),u=o.dmax,y=o.wsize,f=o.whave,m=o.wnext,p=o.window,w=o.hold,S=o.bits,O=o.lencode,E=o.distcode,C=(1<<o.lenbits)-1,x=(1<<o.distbits)-1;e:do{S<15&&(w+=d[l++]<<S,S+=8,w+=d[l++]<<S,S+=8),D=O[w&C];t:for(;;){if(w>>>=T=D>>>24,S-=T,(T=D>>>16&255)===0)F[b++]=65535&D;else{if(!(16&T)){if((64&T)==0){D=O[(65535&D)+(w&(1<<T)-1)];continue t}if(32&T){o.mode=12;break e}r.msg="invalid literal/length code",o.mode=30;break e}$=65535&D,(T&=15)&&(S<T&&(w+=d[l++]<<S,S+=8),$+=w&(1<<T)-1,w>>>=T,S-=T),S<15&&(w+=d[l++]<<S,S+=8,w+=d[l++]<<S,S+=8),D=E[w&x];n:for(;;){if(w>>>=T=D>>>24,S-=T,!(16&(T=D>>>16&255))){if((64&T)==0){D=E[(65535&D)+(w&(1<<T)-1)];continue n}r.msg="invalid distance code",o.mode=30;break e}if(Z=65535&D,S<(T&=15)&&(w+=d[l++]<<S,(S+=8)<T&&(w+=d[l++]<<S,S+=8)),u<(Z+=w&(1<<T)-1)){r.msg="invalid distance too far back",o.mode=30;break e}if(w>>>=T,S-=T,(T=b-g)<Z){if(f<(T=Z-T)&&o.sane){r.msg="invalid distance too far back",o.mode=30;break e}if(P=p,(A=0)===m){if(A+=y-T,T<$){for($-=T;F[b++]=p[A++],--T;);A=b-Z,P=F}}else if(m<T){if(A+=y+m-T,(T-=m)<$){for($-=T;F[b++]=p[A++],--T;);if(A=0,m<$){for($-=T=m;F[b++]=p[A++],--T;);A=b-Z,P=F}}}else if(A+=m-T,T<$){for($-=T;F[b++]=p[A++],--T;);A=b-Z,P=F}for(;2<$;)F[b++]=P[A++],F[b++]=P[A++],F[b++]=P[A++],$-=3;$&&(F[b++]=P[A++],1<$&&(F[b++]=P[A++]))}else{for(A=b-Z;F[b++]=F[A++],F[b++]=F[A++],F[b++]=F[A++],2<($-=3););$&&(F[b++]=F[A++],1<$&&(F[b++]=F[A++]))}break}}break}}while(l<h&&b<_);l-=$=S>>3,w&=(1<<(S-=$<<3))-1,r.next_in=l,r.next_out=b,r.avail_in=l<h?h-l+5:5-(l-h),r.avail_out=b<_?_-b+257:257-(b-_),o.hold=w,o.bits=S}},{}],49:[function(t,s,i){var r=t("../utils/common"),a=t("./adler32"),o=t("./crc32"),l=t("./inffast"),h=t("./inftrees"),b=1,g=2,_=0,u=-2,y=1,f=852,m=592;function p(A){return(A>>>24&255)+(A>>>8&65280)+((65280&A)<<8)+((255&A)<<24)}function w(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(A){var P;return A&&A.state?(P=A.state,A.total_in=A.total_out=P.total=0,A.msg="",P.wrap&&(A.adler=1&P.wrap),P.mode=y,P.last=0,P.havedict=0,P.dmax=32768,P.head=null,P.hold=0,P.bits=0,P.lencode=P.lendyn=new r.Buf32(f),P.distcode=P.distdyn=new r.Buf32(m),P.sane=1,P.back=-1,_):u}function O(A){var P;return A&&A.state?((P=A.state).wsize=0,P.whave=0,P.wnext=0,S(A)):u}function E(A,P){var d,F;return A&&A.state?(F=A.state,P<0?(d=0,P=-P):(d=1+(P>>4),P<48&&(P&=15)),P&&(P<8||15<P)?u:(F.window!==null&&F.wbits!==P&&(F.window=null),F.wrap=d,F.wbits=P,O(A))):u}function C(A,P){var d,F;return A?(F=new w,(A.state=F).window=null,(d=E(A,P))!==_&&(A.state=null),d):u}var x,D,T=!0;function $(A){if(T){var P;for(x=new r.Buf32(512),D=new r.Buf32(32),P=0;P<144;)A.lens[P++]=8;for(;P<256;)A.lens[P++]=9;for(;P<280;)A.lens[P++]=7;for(;P<288;)A.lens[P++]=8;for(h(b,A.lens,0,288,x,0,A.work,{bits:9}),P=0;P<32;)A.lens[P++]=5;h(g,A.lens,0,32,D,0,A.work,{bits:5}),T=!1}A.lencode=x,A.lenbits=9,A.distcode=D,A.distbits=5}function Z(A,P,d,F){var X,U=A.state;return U.window===null&&(U.wsize=1<<U.wbits,U.wnext=0,U.whave=0,U.window=new r.Buf8(U.wsize)),F>=U.wsize?(r.arraySet(U.window,P,d-U.wsize,U.wsize,0),U.wnext=0,U.whave=U.wsize):(F<(X=U.wsize-U.wnext)&&(X=F),r.arraySet(U.window,P,d-F,X,U.wnext),(F-=X)?(r.arraySet(U.window,P,d-F,F,0),U.wnext=F,U.whave=U.wsize):(U.wnext+=X,U.wnext===U.wsize&&(U.wnext=0),U.whave<U.wsize&&(U.whave+=X))),0}i.inflateReset=O,i.inflateReset2=E,i.inflateResetKeep=S,i.inflateInit=function(A){return C(A,15)},i.inflateInit2=C,i.inflate=function(A,P){var d,F,X,U,te,K,Q,B,L,J,G,V,ue,ge,ne,ie,de,fe,Ne,Oe,c,R,z,k,v=0,I=new r.Buf8(4),M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!A||!A.state||!A.output||!A.input&&A.avail_in!==0)return u;(d=A.state).mode===12&&(d.mode=13),te=A.next_out,X=A.output,Q=A.avail_out,U=A.next_in,F=A.input,K=A.avail_in,B=d.hold,L=d.bits,J=K,G=Q,R=_;e:for(;;)switch(d.mode){case y:if(d.wrap===0){d.mode=13;break}for(;L<16;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}if(2&d.wrap&&B===35615){I[d.check=0]=255&B,I[1]=B>>>8&255,d.check=o(d.check,I,2,0),L=B=0,d.mode=2;break}if(d.flags=0,d.head&&(d.head.done=!1),!(1&d.wrap)||(((255&B)<<8)+(B>>8))%31){A.msg="incorrect header check",d.mode=30;break}if((15&B)!=8){A.msg="unknown compression method",d.mode=30;break}if(L-=4,c=8+(15&(B>>>=4)),d.wbits===0)d.wbits=c;else if(c>d.wbits){A.msg="invalid window size",d.mode=30;break}d.dmax=1<<c,A.adler=d.check=1,d.mode=512&B?10:12,L=B=0;break;case 2:for(;L<16;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}if(d.flags=B,(255&d.flags)!=8){A.msg="unknown compression method",d.mode=30;break}if(57344&d.flags){A.msg="unknown header flags set",d.mode=30;break}d.head&&(d.head.text=B>>8&1),512&d.flags&&(I[0]=255&B,I[1]=B>>>8&255,d.check=o(d.check,I,2,0)),L=B=0,d.mode=3;case 3:for(;L<32;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}d.head&&(d.head.time=B),512&d.flags&&(I[0]=255&B,I[1]=B>>>8&255,I[2]=B>>>16&255,I[3]=B>>>24&255,d.check=o(d.check,I,4,0)),L=B=0,d.mode=4;case 4:for(;L<16;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}d.head&&(d.head.xflags=255&B,d.head.os=B>>8),512&d.flags&&(I[0]=255&B,I[1]=B>>>8&255,d.check=o(d.check,I,2,0)),L=B=0,d.mode=5;case 5:if(1024&d.flags){for(;L<16;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}d.length=B,d.head&&(d.head.extra_len=B),512&d.flags&&(I[0]=255&B,I[1]=B>>>8&255,d.check=o(d.check,I,2,0)),L=B=0}else d.head&&(d.head.extra=null);d.mode=6;case 6:if(1024&d.flags&&(K<(V=d.length)&&(V=K),V&&(d.head&&(c=d.head.extra_len-d.length,d.head.extra||(d.head.extra=new Array(d.head.extra_len)),r.arraySet(d.head.extra,F,U,V,c)),512&d.flags&&(d.check=o(d.check,F,V,U)),K-=V,U+=V,d.length-=V),d.length))break e;d.length=0,d.mode=7;case 7:if(2048&d.flags){if(K===0)break e;for(V=0;c=F[U+V++],d.head&&c&&d.length<65536&&(d.head.name+=String.fromCharCode(c)),c&&V<K;);if(512&d.flags&&(d.check=o(d.check,F,V,U)),K-=V,U+=V,c)break e}else d.head&&(d.head.name=null);d.length=0,d.mode=8;case 8:if(4096&d.flags){if(K===0)break e;for(V=0;c=F[U+V++],d.head&&c&&d.length<65536&&(d.head.comment+=String.fromCharCode(c)),c&&V<K;);if(512&d.flags&&(d.check=o(d.check,F,V,U)),K-=V,U+=V,c)break e}else d.head&&(d.head.comment=null);d.mode=9;case 9:if(512&d.flags){for(;L<16;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}if(B!==(65535&d.check)){A.msg="header crc mismatch",d.mode=30;break}L=B=0}d.head&&(d.head.hcrc=d.flags>>9&1,d.head.done=!0),A.adler=d.check=0,d.mode=12;break;case 10:for(;L<32;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}A.adler=d.check=p(B),L=B=0,d.mode=11;case 11:if(d.havedict===0)return A.next_out=te,A.avail_out=Q,A.next_in=U,A.avail_in=K,d.hold=B,d.bits=L,2;A.adler=d.check=1,d.mode=12;case 12:if(P===5||P===6)break e;case 13:if(d.last){B>>>=7&L,L-=7&L,d.mode=27;break}for(;L<3;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}switch(d.last=1&B,L-=1,3&(B>>>=1)){case 0:d.mode=14;break;case 1:if($(d),d.mode=20,P!==6)break;B>>>=2,L-=2;break e;case 2:d.mode=17;break;case 3:A.msg="invalid block type",d.mode=30}B>>>=2,L-=2;break;case 14:for(B>>>=7&L,L-=7&L;L<32;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}if((65535&B)!=(B>>>16^65535)){A.msg="invalid stored block lengths",d.mode=30;break}if(d.length=65535&B,L=B=0,d.mode=15,P===6)break e;case 15:d.mode=16;case 16:if(V=d.length){if(K<V&&(V=K),Q<V&&(V=Q),V===0)break e;r.arraySet(X,F,U,V,te),K-=V,U+=V,Q-=V,te+=V,d.length-=V;break}d.mode=12;break;case 17:for(;L<14;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}if(d.nlen=257+(31&B),B>>>=5,L-=5,d.ndist=1+(31&B),B>>>=5,L-=5,d.ncode=4+(15&B),B>>>=4,L-=4,286<d.nlen||30<d.ndist){A.msg="too many length or distance symbols",d.mode=30;break}d.have=0,d.mode=18;case 18:for(;d.have<d.ncode;){for(;L<3;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}d.lens[M[d.have++]]=7&B,B>>>=3,L-=3}for(;d.have<19;)d.lens[M[d.have++]]=0;if(d.lencode=d.lendyn,d.lenbits=7,z={bits:d.lenbits},R=h(0,d.lens,0,19,d.lencode,0,d.work,z),d.lenbits=z.bits,R){A.msg="invalid code lengths set",d.mode=30;break}d.have=0,d.mode=19;case 19:for(;d.have<d.nlen+d.ndist;){for(;ie=(v=d.lencode[B&(1<<d.lenbits)-1])>>>16&255,de=65535&v,!((ne=v>>>24)<=L);){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}if(de<16)B>>>=ne,L-=ne,d.lens[d.have++]=de;else{if(de===16){for(k=ne+2;L<k;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}if(B>>>=ne,L-=ne,d.have===0){A.msg="invalid bit length repeat",d.mode=30;break}c=d.lens[d.have-1],V=3+(3&B),B>>>=2,L-=2}else if(de===17){for(k=ne+3;L<k;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}L-=ne,c=0,V=3+(7&(B>>>=ne)),B>>>=3,L-=3}else{for(k=ne+7;L<k;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}L-=ne,c=0,V=11+(127&(B>>>=ne)),B>>>=7,L-=7}if(d.have+V>d.nlen+d.ndist){A.msg="invalid bit length repeat",d.mode=30;break}for(;V--;)d.lens[d.have++]=c}}if(d.mode===30)break;if(d.lens[256]===0){A.msg="invalid code -- missing end-of-block",d.mode=30;break}if(d.lenbits=9,z={bits:d.lenbits},R=h(b,d.lens,0,d.nlen,d.lencode,0,d.work,z),d.lenbits=z.bits,R){A.msg="invalid literal/lengths set",d.mode=30;break}if(d.distbits=6,d.distcode=d.distdyn,z={bits:d.distbits},R=h(g,d.lens,d.nlen,d.ndist,d.distcode,0,d.work,z),d.distbits=z.bits,R){A.msg="invalid distances set",d.mode=30;break}if(d.mode=20,P===6)break e;case 20:d.mode=21;case 21:if(6<=K&&258<=Q){A.next_out=te,A.avail_out=Q,A.next_in=U,A.avail_in=K,d.hold=B,d.bits=L,l(A,G),te=A.next_out,X=A.output,Q=A.avail_out,U=A.next_in,F=A.input,K=A.avail_in,B=d.hold,L=d.bits,d.mode===12&&(d.back=-1);break}for(d.back=0;ie=(v=d.lencode[B&(1<<d.lenbits)-1])>>>16&255,de=65535&v,!((ne=v>>>24)<=L);){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}if(ie&&(240&ie)==0){for(fe=ne,Ne=ie,Oe=de;ie=(v=d.lencode[Oe+((B&(1<<fe+Ne)-1)>>fe)])>>>16&255,de=65535&v,!(fe+(ne=v>>>24)<=L);){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}B>>>=fe,L-=fe,d.back+=fe}if(B>>>=ne,L-=ne,d.back+=ne,d.length=de,ie===0){d.mode=26;break}if(32&ie){d.back=-1,d.mode=12;break}if(64&ie){A.msg="invalid literal/length code",d.mode=30;break}d.extra=15&ie,d.mode=22;case 22:if(d.extra){for(k=d.extra;L<k;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}d.length+=B&(1<<d.extra)-1,B>>>=d.extra,L-=d.extra,d.back+=d.extra}d.was=d.length,d.mode=23;case 23:for(;ie=(v=d.distcode[B&(1<<d.distbits)-1])>>>16&255,de=65535&v,!((ne=v>>>24)<=L);){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}if((240&ie)==0){for(fe=ne,Ne=ie,Oe=de;ie=(v=d.distcode[Oe+((B&(1<<fe+Ne)-1)>>fe)])>>>16&255,de=65535&v,!(fe+(ne=v>>>24)<=L);){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}B>>>=fe,L-=fe,d.back+=fe}if(B>>>=ne,L-=ne,d.back+=ne,64&ie){A.msg="invalid distance code",d.mode=30;break}d.offset=de,d.extra=15&ie,d.mode=24;case 24:if(d.extra){for(k=d.extra;L<k;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}d.offset+=B&(1<<d.extra)-1,B>>>=d.extra,L-=d.extra,d.back+=d.extra}if(d.offset>d.dmax){A.msg="invalid distance too far back",d.mode=30;break}d.mode=25;case 25:if(Q===0)break e;if(V=G-Q,d.offset>V){if((V=d.offset-V)>d.whave&&d.sane){A.msg="invalid distance too far back",d.mode=30;break}ue=V>d.wnext?(V-=d.wnext,d.wsize-V):d.wnext-V,V>d.length&&(V=d.length),ge=d.window}else ge=X,ue=te-d.offset,V=d.length;for(Q<V&&(V=Q),Q-=V,d.length-=V;X[te++]=ge[ue++],--V;);d.length===0&&(d.mode=21);break;case 26:if(Q===0)break e;X[te++]=d.length,Q--,d.mode=21;break;case 27:if(d.wrap){for(;L<32;){if(K===0)break e;K--,B|=F[U++]<<L,L+=8}if(G-=Q,A.total_out+=G,d.total+=G,G&&(A.adler=d.check=d.flags?o(d.check,X,G,te-G):a(d.check,X,G,te-G)),G=Q,(d.flags?B:p(B))!==d.check){A.msg="incorrect data check",d.mode=30;break}L=B=0}d.mode=28;case 28:if(d.wrap&&d.flags){for(;L<32;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}if(B!==(4294967295&d.total)){A.msg="incorrect length check",d.mode=30;break}L=B=0}d.mode=29;case 29:R=1;break e;case 30:R=-3;break e;case 31:return-4;case 32:default:return u}return A.next_out=te,A.avail_out=Q,A.next_in=U,A.avail_in=K,d.hold=B,d.bits=L,(d.wsize||G!==A.avail_out&&d.mode<30&&(d.mode<27||P!==4))&&Z(A,A.output,A.next_out,G-A.avail_out)?(d.mode=31,-4):(J-=A.avail_in,G-=A.avail_out,A.total_in+=J,A.total_out+=G,d.total+=G,d.wrap&&G&&(A.adler=d.check=d.flags?o(d.check,X,G,A.next_out-G):a(d.check,X,G,A.next_out-G)),A.data_type=d.bits+(d.last?64:0)+(d.mode===12?128:0)+(d.mode===20||d.mode===15?256:0),(J==0&&G===0||P===4)&&R===_&&(R=-5),R)},i.inflateEnd=function(A){if(!A||!A.state)return u;var P=A.state;return P.window&&(P.window=null),A.state=null,_},i.inflateGetHeader=function(A,P){var d;return A&&A.state?(2&(d=A.state).wrap)==0?u:((d.head=P).done=!1,_):u},i.inflateSetDictionary=function(A,P){var d,F=P.length;return A&&A.state?(d=A.state).wrap!==0&&d.mode!==11?u:d.mode===11&&a(1,P,F,0)!==d.check?-3:Z(A,P,F,F)?(d.mode=31,-4):(d.havedict=1,_):u},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,s,i){var r=t("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];s.exports=function(b,g,_,u,y,f,m,p){var w,S,O,E,C,x,D,T,$,Z=p.bits,A=0,P=0,d=0,F=0,X=0,U=0,te=0,K=0,Q=0,B=0,L=null,J=0,G=new r.Buf16(16),V=new r.Buf16(16),ue=null,ge=0;for(A=0;A<=15;A++)G[A]=0;for(P=0;P<u;P++)G[g[_+P]]++;for(X=Z,F=15;1<=F&&G[F]===0;F--);if(F<X&&(X=F),F===0)return y[f++]=20971520,y[f++]=20971520,p.bits=1,0;for(d=1;d<F&&G[d]===0;d++);for(X<d&&(X=d),A=K=1;A<=15;A++)if(K<<=1,(K-=G[A])<0)return-1;if(0<K&&(b===0||F!==1))return-1;for(V[1]=0,A=1;A<15;A++)V[A+1]=V[A]+G[A];for(P=0;P<u;P++)g[_+P]!==0&&(m[V[g[_+P]]++]=P);if(x=b===0?(L=ue=m,19):b===1?(L=a,J-=257,ue=o,ge-=257,256):(L=l,ue=h,-1),A=d,C=f,te=P=B=0,O=-1,E=(Q=1<<(U=X))-1,b===1&&852<Q||b===2&&592<Q)return 1;for(;;){for(D=A-te,$=m[P]<x?(T=0,m[P]):m[P]>x?(T=ue[ge+m[P]],L[J+m[P]]):(T=96,0),w=1<<A-te,d=S=1<<U;y[C+(B>>te)+(S-=w)]=D<<24|T<<16|$|0,S!==0;);for(w=1<<A-1;B&w;)w>>=1;if(w!==0?(B&=w-1,B+=w):B=0,P++,--G[A]==0){if(A===F)break;A=g[_+m[P]]}if(X<A&&(B&E)!==O){for(te===0&&(te=X),C+=d,K=1<<(U=A-te);U+te<F&&!((K-=G[U+te])<=0);)U++,K<<=1;if(Q+=1<<U,b===1&&852<Q||b===2&&592<Q)return 1;y[O=B&E]=X<<24|U<<16|C-f|0}}return B!==0&&(y[C+B]=A-te<<24|64<<16|0),p.bits=X,0}},{"../utils/common":41}],51:[function(t,s,i){s.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,s,i){var r=t("../utils/common"),a=0,o=1;function l(v){for(var I=v.length;0<=--I;)v[I]=0}var h=0,b=29,g=256,_=g+1+b,u=30,y=19,f=2*_+1,m=15,p=16,w=7,S=256,O=16,E=17,C=18,x=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],D=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Z=new Array(2*(_+2));l(Z);var A=new Array(2*u);l(A);var P=new Array(512);l(P);var d=new Array(256);l(d);var F=new Array(b);l(F);var X,U,te,K=new Array(u);function Q(v,I,M,j,N){this.static_tree=v,this.extra_bits=I,this.extra_base=M,this.elems=j,this.max_length=N,this.has_stree=v&&v.length}function B(v,I){this.dyn_tree=v,this.max_code=0,this.stat_desc=I}function L(v){return v<256?P[v]:P[256+(v>>>7)]}function J(v,I){v.pending_buf[v.pending++]=255&I,v.pending_buf[v.pending++]=I>>>8&255}function G(v,I,M){v.bi_valid>p-M?(v.bi_buf|=I<<v.bi_valid&65535,J(v,v.bi_buf),v.bi_buf=I>>p-v.bi_valid,v.bi_valid+=M-p):(v.bi_buf|=I<<v.bi_valid&65535,v.bi_valid+=M)}function V(v,I,M){G(v,M[2*I],M[2*I+1])}function ue(v,I){for(var M=0;M|=1&v,v>>>=1,M<<=1,0<--I;);return M>>>1}function ge(v,I,M){var j,N,W=new Array(m+1),H=0;for(j=1;j<=m;j++)W[j]=H=H+M[j-1]<<1;for(N=0;N<=I;N++){var q=v[2*N+1];q!==0&&(v[2*N]=ue(W[q]++,q))}}function ne(v){var I;for(I=0;I<_;I++)v.dyn_ltree[2*I]=0;for(I=0;I<u;I++)v.dyn_dtree[2*I]=0;for(I=0;I<y;I++)v.bl_tree[2*I]=0;v.dyn_ltree[2*S]=1,v.opt_len=v.static_len=0,v.last_lit=v.matches=0}function ie(v){8<v.bi_valid?J(v,v.bi_buf):0<v.bi_valid&&(v.pending_buf[v.pending++]=v.bi_buf),v.bi_buf=0,v.bi_valid=0}function de(v,I,M,j){var N=2*I,W=2*M;return v[N]<v[W]||v[N]===v[W]&&j[I]<=j[M]}function fe(v,I,M){for(var j=v.heap[M],N=M<<1;N<=v.heap_len&&(N<v.heap_len&&de(I,v.heap[N+1],v.heap[N],v.depth)&&N++,!de(I,j,v.heap[N],v.depth));)v.heap[M]=v.heap[N],M=N,N<<=1;v.heap[M]=j}function Ne(v,I,M){var j,N,W,H,q=0;if(v.last_lit!==0)for(;j=v.pending_buf[v.d_buf+2*q]<<8|v.pending_buf[v.d_buf+2*q+1],N=v.pending_buf[v.l_buf+q],q++,j===0?V(v,N,I):(V(v,(W=d[N])+g+1,I),(H=x[W])!==0&&G(v,N-=F[W],H),V(v,W=L(--j),M),(H=D[W])!==0&&G(v,j-=K[W],H)),q<v.last_lit;);V(v,S,I)}function Oe(v,I){var M,j,N,W=I.dyn_tree,H=I.stat_desc.static_tree,q=I.stat_desc.has_stree,Y=I.stat_desc.elems,ae=-1;for(v.heap_len=0,v.heap_max=f,M=0;M<Y;M++)W[2*M]!==0?(v.heap[++v.heap_len]=ae=M,v.depth[M]=0):W[2*M+1]=0;for(;v.heap_len<2;)W[2*(N=v.heap[++v.heap_len]=ae<2?++ae:0)]=1,v.depth[N]=0,v.opt_len--,q&&(v.static_len-=H[2*N+1]);for(I.max_code=ae,M=v.heap_len>>1;1<=M;M--)fe(v,W,M);for(N=Y;M=v.heap[1],v.heap[1]=v.heap[v.heap_len--],fe(v,W,1),j=v.heap[1],v.heap[--v.heap_max]=M,v.heap[--v.heap_max]=j,W[2*N]=W[2*M]+W[2*j],v.depth[N]=(v.depth[M]>=v.depth[j]?v.depth[M]:v.depth[j])+1,W[2*M+1]=W[2*j+1]=N,v.heap[1]=N++,fe(v,W,1),2<=v.heap_len;);v.heap[--v.heap_max]=v.heap[1],function(se,Se){var mt,Te,gt,he,Gt,Cn,Be=Se.dyn_tree,Ds=Se.max_code,wr=Se.stat_desc.static_tree,vr=Se.stat_desc.has_stree,kr=Se.stat_desc.extra_bits,Rs=Se.stat_desc.extra_base,yt=Se.stat_desc.max_length,Ht=0;for(he=0;he<=m;he++)se.bl_count[he]=0;for(Be[2*se.heap[se.heap_max]+1]=0,mt=se.heap_max+1;mt<f;mt++)yt<(he=Be[2*Be[2*(Te=se.heap[mt])+1]+1]+1)&&(he=yt,Ht++),Be[2*Te+1]=he,Ds<Te||(se.bl_count[he]++,Gt=0,Rs<=Te&&(Gt=kr[Te-Rs]),Cn=Be[2*Te],se.opt_len+=Cn*(he+Gt),vr&&(se.static_len+=Cn*(wr[2*Te+1]+Gt)));if(Ht!==0){do{for(he=yt-1;se.bl_count[he]===0;)he--;se.bl_count[he]--,se.bl_count[he+1]+=2,se.bl_count[yt]--,Ht-=2}while(0<Ht);for(he=yt;he!==0;he--)for(Te=se.bl_count[he];Te!==0;)Ds<(gt=se.heap[--mt])||(Be[2*gt+1]!==he&&(se.opt_len+=(he-Be[2*gt+1])*Be[2*gt],Be[2*gt+1]=he),Te--)}}(v,I),ge(W,ae,v.bl_count)}function c(v,I,M){var j,N,W=-1,H=I[1],q=0,Y=7,ae=4;for(H===0&&(Y=138,ae=3),I[2*(M+1)+1]=65535,j=0;j<=M;j++)N=H,H=I[2*(j+1)+1],++q<Y&&N===H||(q<ae?v.bl_tree[2*N]+=q:N!==0?(N!==W&&v.bl_tree[2*N]++,v.bl_tree[2*O]++):q<=10?v.bl_tree[2*E]++:v.bl_tree[2*C]++,W=N,ae=(q=0)===H?(Y=138,3):N===H?(Y=6,3):(Y=7,4))}function R(v,I,M){var j,N,W=-1,H=I[1],q=0,Y=7,ae=4;for(H===0&&(Y=138,ae=3),j=0;j<=M;j++)if(N=H,H=I[2*(j+1)+1],!(++q<Y&&N===H)){if(q<ae)for(;V(v,N,v.bl_tree),--q!=0;);else N!==0?(N!==W&&(V(v,N,v.bl_tree),q--),V(v,O,v.bl_tree),G(v,q-3,2)):q<=10?(V(v,E,v.bl_tree),G(v,q-3,3)):(V(v,C,v.bl_tree),G(v,q-11,7));W=N,ae=(q=0)===H?(Y=138,3):N===H?(Y=6,3):(Y=7,4)}}l(K);var z=!1;function k(v,I,M,j){G(v,(h<<1)+(j?1:0),3),function(N,W,H,q){ie(N),q&&(J(N,H),J(N,~H)),r.arraySet(N.pending_buf,N.window,W,H,N.pending),N.pending+=H}(v,I,M,!0)}i._tr_init=function(v){z||(function(){var I,M,j,N,W,H=new Array(m+1);for(N=j=0;N<b-1;N++)for(F[N]=j,I=0;I<1<<x[N];I++)d[j++]=N;for(d[j-1]=N,N=W=0;N<16;N++)for(K[N]=W,I=0;I<1<<D[N];I++)P[W++]=N;for(W>>=7;N<u;N++)for(K[N]=W<<7,I=0;I<1<<D[N]-7;I++)P[256+W++]=N;for(M=0;M<=m;M++)H[M]=0;for(I=0;I<=143;)Z[2*I+1]=8,I++,H[8]++;for(;I<=255;)Z[2*I+1]=9,I++,H[9]++;for(;I<=279;)Z[2*I+1]=7,I++,H[7]++;for(;I<=287;)Z[2*I+1]=8,I++,H[8]++;for(ge(Z,_+1,H),I=0;I<u;I++)A[2*I+1]=5,A[2*I]=ue(I,5);X=new Q(Z,x,g+1,_,m),U=new Q(A,D,0,u,m),te=new Q(new Array(0),T,0,y,w)}(),z=!0),v.l_desc=new B(v.dyn_ltree,X),v.d_desc=new B(v.dyn_dtree,U),v.bl_desc=new B(v.bl_tree,te),v.bi_buf=0,v.bi_valid=0,ne(v)},i._tr_stored_block=k,i._tr_flush_block=function(v,I,M,j){var N,W,H=0;0<v.level?(v.strm.data_type===2&&(v.strm.data_type=function(q){var Y,ae=4093624447;for(Y=0;Y<=31;Y++,ae>>>=1)if(1&ae&&q.dyn_ltree[2*Y]!==0)return a;if(q.dyn_ltree[18]!==0||q.dyn_ltree[20]!==0||q.dyn_ltree[26]!==0)return o;for(Y=32;Y<g;Y++)if(q.dyn_ltree[2*Y]!==0)return o;return a}(v)),Oe(v,v.l_desc),Oe(v,v.d_desc),H=function(q){var Y;for(c(q,q.dyn_ltree,q.l_desc.max_code),c(q,q.dyn_dtree,q.d_desc.max_code),Oe(q,q.bl_desc),Y=y-1;3<=Y&&q.bl_tree[2*$[Y]+1]===0;Y--);return q.opt_len+=3*(Y+1)+5+5+4,Y}(v),N=v.opt_len+3+7>>>3,(W=v.static_len+3+7>>>3)<=N&&(N=W)):N=W=M+5,M+4<=N&&I!==-1?k(v,I,M,j):v.strategy===4||W===N?(G(v,2+(j?1:0),3),Ne(v,Z,A)):(G(v,4+(j?1:0),3),function(q,Y,ae,se){var Se;for(G(q,Y-257,5),G(q,ae-1,5),G(q,se-4,4),Se=0;Se<se;Se++)G(q,q.bl_tree[2*$[Se]+1],3);R(q,q.dyn_ltree,Y-1),R(q,q.dyn_dtree,ae-1)}(v,v.l_desc.max_code+1,v.d_desc.max_code+1,H+1),Ne(v,v.dyn_ltree,v.dyn_dtree)),ne(v),j&&ie(v)},i._tr_tally=function(v,I,M){return v.pending_buf[v.d_buf+2*v.last_lit]=I>>>8&255,v.pending_buf[v.d_buf+2*v.last_lit+1]=255&I,v.pending_buf[v.l_buf+v.last_lit]=255&M,v.last_lit++,I===0?v.dyn_ltree[2*M]++:(v.matches++,I--,v.dyn_ltree[2*(d[M]+g+1)]++,v.dyn_dtree[2*L(I)]++),v.last_lit===v.lit_bufsize-1},i._tr_align=function(v){G(v,2,3),V(v,S,Z),function(I){I.bi_valid===16?(J(I,I.bi_buf),I.bi_buf=0,I.bi_valid=0):8<=I.bi_valid&&(I.pending_buf[I.pending++]=255&I.bi_buf,I.bi_buf>>=8,I.bi_valid-=8)}(v)}},{"../utils/common":41}],53:[function(t,s,i){s.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,s,i){(function(r){(function(a,o){if(!a.setImmediate){var l,h,b,g,_=1,u={},y=!1,f=a.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(a);m=m&&m.setTimeout?m:a,l={}.toString.call(a.process)==="[object process]"?function(O){process.nextTick(function(){w(O)})}:function(){if(a.postMessage&&!a.importScripts){var O=!0,E=a.onmessage;return a.onmessage=function(){O=!1},a.postMessage("","*"),a.onmessage=E,O}}()?(g="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",S,!1):a.attachEvent("onmessage",S),function(O){a.postMessage(g+O,"*")}):a.MessageChannel?((b=new MessageChannel).port1.onmessage=function(O){w(O.data)},function(O){b.port2.postMessage(O)}):f&&"onreadystatechange"in f.createElement("script")?(h=f.documentElement,function(O){var E=f.createElement("script");E.onreadystatechange=function(){w(O),E.onreadystatechange=null,h.removeChild(E),E=null},h.appendChild(E)}):function(O){setTimeout(w,0,O)},m.setImmediate=function(O){typeof O!="function"&&(O=new Function(""+O));for(var E=new Array(arguments.length-1),C=0;C<E.length;C++)E[C]=arguments[C+1];var x={callback:O,args:E};return u[_]=x,l(_),_++},m.clearImmediate=p}function p(O){delete u[O]}function w(O){if(y)setTimeout(w,0,O);else{var E=u[O];if(E){y=!0;try{(function(C){var x=C.callback,D=C.args;switch(D.length){case 0:x();break;case 1:x(D[0]);break;case 2:x(D[0],D[1]);break;case 3:x(D[0],D[1],D[2]);break;default:x.apply(o,D)}})(E)}finally{p(O),y=!1}}}}function S(O){O.source===a&&typeof O.data=="string"&&O.data.indexOf(g)===0&&w(+O.data.slice(g.length))}})(typeof self=="undefined"?r===void 0?this:r:self)}).call(this,typeof Vt!="undefined"?Vt:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[10])(10)})})(zs);var hr=zs.exports;function Ps(n){return fetch(n).then(e=>e.ok?e.blob():Promise.reject(e.status)).then(e=>e.text())}class dr{constructor(e){this.baseUrl=e}href(e){return`${this.baseUrl}/${e}`}get(e){return Ps(this.href(e))}ready(e){e&&e()}close(e){e&&e(null)}}class pr{ready(e){throw new Error("Method not implemented.")}close(e){throw new Error("Method not implemented.")}}class mr extends pr{constructor(e){super(),this._zip=void 0,this._isClosed=!1,this._task=Ps(e).then(hr.loadAsync).then(t=>{this._isClosed||(this._zip=t,this._task=void 0,this._notifyReady())})}href(e){return e}get(e){return new Promise((t,s)=>{if(this._zip===void 0){s(void 0);return}const i=this._zip.file(e);if(!i){s(void 0);return}i.async("string").then(r=>{t(r)}).catch(s)})}ready(e){this._readyCallback=e,this._task===void 0&&this._notifyReady()}_notifyReady(){this._readyCallback!==void 0&&this._readyCallback()}close(e){this._isClosed=!0,this._task=void 0,this._zip=void 0,e!==void 0&&e(null)}}const gr="0.1.0-alpha.24",yr={inputController:()=>new fr,fileServer:n=>new dr(n),zipServer:n=>new mr(n)};function _r(){return Ls()}function br(n,e){return ur(yr,n,e)}Ce.GAME_SDK_VERSION=nr,Ce.PLAYER_SDK_VERSION=sr,Ce.VERSION=gr,Ce.defaultOptions=_r,Ce.init=br,Object.defineProperties(Ce,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
