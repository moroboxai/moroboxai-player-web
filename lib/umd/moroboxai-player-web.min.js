(function(Oe,Je){typeof exports=="object"&&typeof module!="undefined"?Je(exports):typeof define=="function"&&define.amd?define(["exports"],Je):(Oe=typeof globalThis!="undefined"?globalThis:Oe||self,Je(Oe.MoroboxAIPlayer={}))})(this,function(Oe){"use strict";class Je{constructor(){this._context={}}get id(){return 0}get isBound(){return this._context.inputs!==void 0}get label(){return this._context.LABEL!==void 0?this._context.LABEL:"Agent"}loadAgent(e){return new Promise(t=>{function n(r){return"javascript"}const i=(r,a)=>{const o={};new Function("exports",`${a} 
                if (typeof LABEL !== "undefined") {
                    exports.LABEL = LABEL;
                }
                
                if (typeof saveState !== "undefined") {
                    exports.saveState = saveState;
                }
                
                if (typeof loadState !== "undefined") {
                    exports.loadState = loadState;
                }
                
                if (typeof inputs !== "undefined") {
                    exports.inputs = inputs;
                }`)(o),this.unloadAgent(),this._context=o,t()};e.url!==void 0?fetch(e.url).then(r=>r.text()).then(r=>i(e.type!==void 0?e.type:n(e.url),r)):e.code!==void 0&&i(e.type!==void 0?e.type:"javascript",e.code)})}unloadAgent(){this._context={}}inputs(e){return this._context.inputs===void 0?{}:this._context.inputs(e)}saveState(){return this._context.saveState!==void 0?this._context.saveState():{}}loadState(e){this._context.loadState!==void 0&&this._context.loadState(e)}}class pn{get id(){return this._id}get isBound(){return!1}get label(){return this._agentController.isBound?this._agentController.label:this._inputController!==void 0?"human":"<>"}constructor(e,t){this._id=e,this._inputController=t,this._agentController=new Je}inputs(e){return this._agentController.isBound?this._agentController.inputs(e):this._inputController!==void 0?this._inputController.inputs:{}}loadAgent(e){return this._agentController.loadAgent(e)}unloadAgent(){this._agentController.unloadAgent()}saveState(){return this._agentController.saveState()}loadState(e){this._agentController.loadState(e)}}class ms{get ids(){return[...this._controllers.keys()]}get controllers(){return this._controllers}constructor(e){this._controllers=new Map,this._controllers.set(0,new pn(0,e.inputController())),this._controllers.set(1,new pn(1))}get(e){return this._controllers.get(e)}inputs(e){return[this._controllers.get(0).inputs(e),this._controllers.get(1).inputs(e)]}saveState(){return[this._controllers.get(0).saveState(),this._controllers.get(1).saveState()]}loadState(e){this._controllers.get(0).loadState(e),this._controllers.get(1).loadState(e)}}class ft{constructor(e,t){this._el=document.createElement("div"),this._el.style.boxSizing="border-box",this._el.style.display="block",this._el.style.position="absolute",this._el.style.width="32px",this._el.style.height="32px",this._el.style.margin="4px",this._el.style.border="4px solid #fff",this._el.style.borderRadius="50%",this._el.style.animation="moroboxai-spinner-rotate 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite",this._el.style.borderColor="#fff transparent transparent transparent",t!==void 0&&(this._el.style.animationDelay=`-${t}s`),e.appendChild(this._el)}}class gs{constructor(e){this._el=document.createElement("div"),this._el.style.display="inline-block",this._el.style.position="relative",this._el.style.width="40px",this._el.style.height="40px",new ft(this._el,.45),new ft(this._el,.3),new ft(this._el,.15),new ft(this._el),e.appendChild(this._el);let t=document.getElementById("moroboxai-dynamic-style");t||(t=document.createElement("style"),t.id="moroboxai-dynamic-style",document.body.appendChild(t)),t.innerHTML=`@keyframes moroboxai-spinner-rotate {
   0% {
      transform: rotate(0deg);
   }
   100% {
      transform: rotate(360deg);
   }
}`}remove(){this._el.remove()}}class Rt{get style(){return this.el.style}constructor(e){this.el=document.createElement("div"),this.el.style.width="100%",this.el.style.height="100%",this.el.style.position="absolute",this.el.style.left="0",this.el.style.top="0",this.el.style.display="flex",this.el.style.flexDirection="column",this.el.style.justifyContent="center",this.el.style.alignItems="center",e.appendChild(this.el)}show(){this.el.style.display="flex"}hide(){this.el.style.display="none"}remove(){this.el.remove()}}class ys{constructor(e){this._overlay=new Rt(e),this._input=document.createElement("input"),this._input.type="button",this._input.value="Play",this._input.onclick=()=>{this.onPlay&&this.onPlay()},this._overlay.el.appendChild(this._input),e.appendChild(this._overlay.el)}show(){this._overlay.show()}hide(){this._overlay.hide()}mouseEnter(){}mouseMove(){}mouseLeave(){}remove(){this._overlay.remove()}}class _s{constructor(e){this._overlay=new Rt(e),this._overlay.style.backgroundColor="black",new gs(this._overlay.el),e.appendChild(this._overlay.el)}show(){this._overlay.show()}hide(){this._overlay.hide()}mouseEnter(){}mouseMove(){}mouseLeave(){}remove(){this._overlay.remove()}}class bs{constructor(e){this._overlay=new Rt(e),this._speed1=document.createElement("input"),this._speed1.type="button",this._speed1.value="x1",this._speed1.onclick=()=>{this.onSpeed&&this.onSpeed(1)},this._speed2=document.createElement("input"),this._speed2.type="button",this._speed2.value="x2",this._speed2.onclick=()=>{this.onSpeed&&this.onSpeed(2)},this._speed4=document.createElement("input"),this._speed4.type="button",this._speed4.value="x4",this._speed4.onclick=()=>{this.onSpeed&&this.onSpeed(4)},this._overlay.el.appendChild(this._speed1),this._overlay.el.appendChild(this._speed2),this._overlay.el.appendChild(this._speed4),this._overlay.hide(),e.appendChild(this._overlay.el)}playing(){}paused(){}show(){this._overlay.show()}hide(){this._overlay.hide()}mouseEnter(){this.show()}mouseMove(){}mouseLeave(){this.hide()}remove(){this._overlay.remove()}}class ws{constructor(e){this._root=e,this._playOverlay=new ys(e),this._selectedOverlay=this._playOverlay,this._playOverlay.onPlay=()=>{this.onPlay&&this.onPlay()},this._loadingOverlay=new _s(this._root),this._loadingOverlay.hide(),this._settingsOverlay=new bs(this._root),this._settingsOverlay.hide(),this._settingsOverlay.onSpeed=t=>{this.onSpeed&&this.onSpeed(t)}}stopped(){this._selectedOverlay.hide(),this._selectedOverlay=this._playOverlay,this._playOverlay.show()}loading(){this._playOverlay.hide(),this._selectedOverlay=this._loadingOverlay,this._loadingOverlay.show()}playing(){this._loadingOverlay.hide(),this._selectedOverlay=this._settingsOverlay,this._settingsOverlay.hide(),this._settingsOverlay.playing()}paused(){this._settingsOverlay.paused()}show(){}hide(){}mouseEnter(){this._selectedOverlay.mouseEnter()}mouseMove(){this._selectedOverlay.mouseMove()}mouseLeave(){this._selectedOverlay.mouseLeave()}remove(){this._playOverlay.remove(),this._loadingOverlay.remove(),this._settingsOverlay.remove()}}const Ft=Symbol.for("yaml.alias"),$t=Symbol.for("yaml.document"),xe=Symbol.for("yaml.map"),mn=Symbol.for("yaml.pair"),Ne=Symbol.for("yaml.scalar"),Fe=Symbol.for("yaml.seq"),_e=Symbol.for("yaml.node.type"),$e=s=>!!s&&typeof s=="object"&&s[_e]===Ft,dt=s=>!!s&&typeof s=="object"&&s[_e]===$t,Xe=s=>!!s&&typeof s=="object"&&s[_e]===xe,oe=s=>!!s&&typeof s=="object"&&s[_e]===mn,ae=s=>!!s&&typeof s=="object"&&s[_e]===Ne,Qe=s=>!!s&&typeof s=="object"&&s[_e]===Fe;function le(s){if(s&&typeof s=="object")switch(s[_e]){case xe:case Fe:return!0}return!1}function fe(s){if(s&&typeof s=="object")switch(s[_e]){case Ft:case xe:case Ne:case Fe:return!0}return!1}const vs=s=>(ae(s)||le(s))&&!!s.anchor,ze=Symbol("break visit"),ks=Symbol("skip children"),et=Symbol("remove node");function Pe(s,e){const t=Ss(e);dt(s)?Me(null,s.contents,t,Object.freeze([s]))===et&&(s.contents=null):Me(null,s,t,Object.freeze([]))}Pe.BREAK=ze,Pe.SKIP=ks,Pe.REMOVE=et;function Me(s,e,t,n){const i=As(s,e,t,n);if(fe(i)||oe(i))return Es(s,n,i),Me(s,i,t,n);if(typeof i!="symbol"){if(le(e)){n=Object.freeze(n.concat(e));for(let r=0;r<e.items.length;++r){const a=Me(r,e.items[r],t,n);if(typeof a=="number")r=a-1;else{if(a===ze)return ze;a===et&&(e.items.splice(r,1),r-=1)}}}else if(oe(e)){n=Object.freeze(n.concat(e));const r=Me("key",e.key,t,n);if(r===ze)return ze;r===et&&(e.key=null);const a=Me("value",e.value,t,n);if(a===ze)return ze;a===et&&(e.value=null)}}return i}function Ss(s){return typeof s=="object"&&(s.Collection||s.Node||s.Value)?Object.assign({Alias:s.Node,Map:s.Node,Scalar:s.Node,Seq:s.Node},s.Value&&{Map:s.Value,Scalar:s.Value,Seq:s.Value},s.Collection&&{Map:s.Collection,Seq:s.Collection},s):s}function As(s,e,t,n){var i,r,a,o,l;if(typeof t=="function")return t(s,e,n);if(Xe(e))return(i=t.Map)==null?void 0:i.call(t,s,e,n);if(Qe(e))return(r=t.Seq)==null?void 0:r.call(t,s,e,n);if(oe(e))return(a=t.Pair)==null?void 0:a.call(t,s,e,n);if(ae(e))return(o=t.Scalar)==null?void 0:o.call(t,s,e,n);if($e(e))return(l=t.Alias)==null?void 0:l.call(t,s,e,n)}function Es(s,e,t){const n=e[e.length-1];if(le(n))n.items[s]=t;else if(oe(n))s==="key"?n.key=t:n.value=t;else if(dt(n))n.contents=t;else{const i=$e(n)?"alias":"scalar";throw new Error(`Cannot replace node with ${i} parent`)}}const Os={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},Cs=s=>s.replace(/[!,[\]{}]/g,e=>Os[e]);class ge{constructor(e,t){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},ge.defaultYaml,e),this.tags=Object.assign({},ge.defaultTags,t)}clone(){const e=new ge(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new ge(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:ge.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},ge.defaultTags);break}return e}add(e,t){this.atNextDocument&&(this.yaml={explicit:ge.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},ge.defaultTags),this.atNextDocument=!1);const n=e.trim().split(/[ \t]+/),i=n.shift();switch(i){case"%TAG":{if(n.length!==2&&(t(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;const[r,a]=n;return this.tags[r]=a,!0}case"%YAML":{if(this.yaml.explicit=!0,n.length!==1)return t(0,"%YAML directive should contain exactly one part"),!1;const[r]=n;if(r==="1.1"||r==="1.2")return this.yaml.version=r,!0;{const a=/^\d+\.\d+$/.test(r);return t(6,`Unsupported YAML version ${r}`,a),!1}}default:return t(0,`Unknown directive ${i}`,!0),!1}}tagName(e,t){if(e==="!")return"!";if(e[0]!=="!")return t(`Not a valid tag: ${e}`),null;if(e[1]==="<"){const a=e.slice(2,-1);return a==="!"||a==="!!"?(t(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&t("Verbatim tags must end with a >"),a)}const[,n,i]=e.match(/^(.*!)([^!]*)$/);i||t(`The ${e} tag has no suffix`);const r=this.tags[n];return r?r+decodeURIComponent(i):n==="!"?e:(t(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[t,n]of Object.entries(this.tags))if(e.startsWith(n))return t+Cs(e.substring(n.length));return e[0]==="!"?e:`!<${e}>`}toString(e){const t=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags);let i;if(e&&n.length>0&&fe(e.contents)){const r={};Pe(e.contents,(a,o)=>{fe(o)&&o.tag&&(r[o.tag]=!0)}),i=Object.keys(r)}else i=[];for(const[r,a]of n)r==="!!"&&a==="tag:yaml.org,2002:"||(!e||i.some(o=>o.startsWith(a)))&&t.push(`%TAG ${r} ${a}`);return t.join(`
`)}}ge.defaultYaml={explicit:!1,version:"1.2"},ge.defaultTags={"!!":"tag:yaml.org,2002:"};function gn(s){if(/[\x00-\x19\s,[\]{}]/.test(s)){const t=`Anchor must not contain whitespace or control characters: ${JSON.stringify(s)}`;throw new Error(t)}return!0}function yn(s){const e=new Set;return Pe(s,{Value(t,n){n.anchor&&e.add(n.anchor)}}),e}function _n(s,e){for(let t=1;;++t){const n=`${s}${t}`;if(!e.has(n))return n}}function Is(s,e){const t=[],n=new Map;let i=null;return{onAnchor:r=>{t.push(r),i||(i=yn(s));const a=_n(e,i);return i.add(a),a},setAnchors:()=>{for(const r of t){const a=n.get(r);if(typeof a=="object"&&a.anchor&&(ae(a.node)||le(a.node)))a.node.anchor=a.anchor;else{const o=new Error("Failed to resolve repeated object (this should not happen)");throw o.source=r,o}}},sourceObjects:n}}function je(s,e,t,n){if(n&&typeof n=="object")if(Array.isArray(n))for(let i=0,r=n.length;i<r;++i){const a=n[i],o=je(s,n,String(i),a);o===void 0?delete n[i]:o!==a&&(n[i]=o)}else if(n instanceof Map)for(const i of Array.from(n.keys())){const r=n.get(i),a=je(s,n,i,r);a===void 0?n.delete(i):a!==r&&n.set(i,a)}else if(n instanceof Set)for(const i of Array.from(n)){const r=je(s,n,i,i);r===void 0?n.delete(i):r!==i&&(n.delete(i),n.add(r))}else for(const[i,r]of Object.entries(n)){const a=je(s,n,i,r);a===void 0?delete n[i]:a!==r&&(n[i]=a)}return s.call(e,t,n)}function be(s,e,t){if(Array.isArray(s))return s.map((n,i)=>be(n,String(i),t));if(s&&typeof s.toJSON=="function"){if(!t||!vs(s))return s.toJSON(e,t);const n={aliasCount:0,count:1,res:void 0};t.anchors.set(s,n),t.onCreate=r=>{n.res=r,delete t.onCreate};const i=s.toJSON(e,t);return t.onCreate&&t.onCreate(i),i}return typeof s=="bigint"&&!(t!=null&&t.keep)?Number(s):s}class Mt{constructor(e){Object.defineProperty(this,_e,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:t,maxAliasCount:n,onAnchor:i,reviver:r}={}){if(!dt(e))throw new TypeError("A document argument is required");const a={anchors:new Map,doc:e,keep:!0,mapAsMap:t===!0,mapKeyWarned:!1,maxAliasCount:typeof n=="number"?n:100},o=be(this,"",a);if(typeof i=="function")for(const{count:l,res:f}of a.anchors.values())i(f,l);return typeof r=="function"?je(r,{"":o},"",o):o}}class jt extends Mt{constructor(e){super(Ft),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e){let t;return Pe(e,{Node:(n,i)=>{if(i===this)return Pe.BREAK;i.anchor===this.source&&(t=i)}}),t}toJSON(e,t){if(!t)return{source:this.source};const{anchors:n,doc:i,maxAliasCount:r}=t,a=this.resolve(i);if(!a){const l=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(l)}let o=n.get(a);if(o||(be(a,null,t),o=n.get(a)),!o||o.res===void 0){const l="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(l)}if(r>=0&&(o.count+=1,o.aliasCount===0&&(o.aliasCount=pt(i,a,n)),o.count*o.aliasCount>r)){const l="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(l)}return o.res}toString(e,t,n){const i=`*${this.source}`;if(e){if(gn(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const r=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(r)}if(e.implicitKey)return`${i} `}return i}}function pt(s,e,t){if($e(e)){const n=e.resolve(s),i=t&&n&&t.get(n);return i?i.count*i.aliasCount:0}else if(le(e)){let n=0;for(const i of e.items){const r=pt(s,i,t);r>n&&(n=r)}return n}else if(oe(e)){const n=pt(s,e.key,t),i=pt(s,e.value,t);return Math.max(n,i)}return 1}const bn=s=>!s||typeof s!="function"&&typeof s!="object";class ee extends Mt{constructor(e){super(Ne),this.value=e}toJSON(e,t){return t!=null&&t.keep?this.value:be(this.value,e,t)}toString(){return String(this.value)}}ee.BLOCK_FOLDED="BLOCK_FOLDED",ee.BLOCK_LITERAL="BLOCK_LITERAL",ee.PLAIN="PLAIN",ee.QUOTE_DOUBLE="QUOTE_DOUBLE",ee.QUOTE_SINGLE="QUOTE_SINGLE";const Ns="tag:yaml.org,2002:";function Ts(s,e,t){var n;if(e){const i=t.filter(a=>a.tag===e),r=(n=i.find(a=>!a.format))!=null?n:i[0];if(!r)throw new Error(`Tag ${e} not found`);return r}return t.find(i=>{var r;return((r=i.identify)==null?void 0:r.call(i,s))&&!i.format})}function tt(s,e,t){var g,_,u;if(dt(s)&&(s=s.contents),fe(s))return s;if(oe(s)){const y=(_=(g=t.schema[xe]).createNode)==null?void 0:_.call(g,t.schema,null,t);return y.items.push(s),y}(s instanceof String||s instanceof Number||s instanceof Boolean||typeof BigInt!="undefined"&&s instanceof BigInt)&&(s=s.valueOf());const{aliasDuplicateObjects:n,onAnchor:i,onTagObj:r,schema:a,sourceObjects:o}=t;let l;if(n&&s&&typeof s=="object"){if(l=o.get(s),l)return l.anchor||(l.anchor=i(s)),new jt(l.anchor);l={anchor:null,node:null},o.set(s,l)}e!=null&&e.startsWith("!!")&&(e=Ns+e.slice(2));let f=Ts(s,e,a.tags);if(!f){if(s&&typeof s.toJSON=="function"&&(s=s.toJSON()),!s||typeof s!="object"){const y=new ee(s);return l&&(l.node=y),y}f=s instanceof Map?a[xe]:Symbol.iterator in Object(s)?a[Fe]:a[xe]}r&&(r(f),delete t.onTagObj);const b=f!=null&&f.createNode?f.createNode(t.schema,s,t):typeof((u=f==null?void 0:f.nodeClass)==null?void 0:u.from)=="function"?f.nodeClass.from(t.schema,s,t):new ee(s);return e?b.tag=e:f.default||(b.tag=f.tag),l&&(l.node=b),b}function mt(s,e,t){let n=t;for(let i=e.length-1;i>=0;--i){const r=e[i];if(typeof r=="number"&&Number.isInteger(r)&&r>=0){const a=[];a[r]=n,n=a}else n=new Map([[r,n]])}return tt(n,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:s,sourceObjects:new Map})}const nt=s=>s==null||typeof s=="object"&&!!s[Symbol.iterator]().next().done;class gt extends Mt{constructor(e,t){super(e),Object.defineProperty(this,"schema",{value:t,configurable:!0,enumerable:!1,writable:!0})}clone(e){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(t.schema=e),t.items=t.items.map(n=>fe(n)||oe(n)?n.clone(e):n),this.range&&(t.range=this.range.slice()),t}addIn(e,t){if(nt(e))this.add(t);else{const[n,...i]=e,r=this.get(n,!0);if(le(r))r.addIn(i,t);else if(r===void 0&&this.schema)this.set(n,mt(this.schema,i,t));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${i}`)}}deleteIn(e){const[t,...n]=e;if(n.length===0)return this.delete(t);const i=this.get(t,!0);if(le(i))return i.deleteIn(n);throw new Error(`Expected YAML collection at ${t}. Remaining path: ${n}`)}getIn(e,t){const[n,...i]=e,r=this.get(n,!0);return i.length===0?!t&&ae(r)?r.value:r:le(r)?r.getIn(i,t):void 0}hasAllNullValues(e){return this.items.every(t=>{if(!oe(t))return!1;const n=t.value;return n==null||e&&ae(n)&&n.value==null&&!n.commentBefore&&!n.comment&&!n.tag})}hasIn(e){const[t,...n]=e;if(n.length===0)return this.has(t);const i=this.get(t,!0);return le(i)?i.hasIn(n):!1}setIn(e,t){const[n,...i]=e;if(i.length===0)this.set(n,t);else{const r=this.get(n,!0);if(le(r))r.setIn(i,t);else if(r===void 0&&this.schema)this.set(n,mt(this.schema,i,t));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${i}`)}}}gt.maxFlowStringSingleLineLength=60;const Ls=s=>s.replace(/^(?!$)(?: $)?/gm,"#");function Te(s,e){return/^\n+$/.test(s)?s.substring(1):e?s.replace(/^(?! *$)/gm,e):s}const Be=(s,e,t)=>s.endsWith(`
`)?Te(t,e):t.includes(`
`)?`
`+Te(t,e):(s.endsWith(" ")?"":" ")+t,wn="flow",Ut="block",yt="quoted";function _t(s,e,t="flow",{indentAtStart:n,lineWidth:i=80,minContentWidth:r=20,onFold:a,onOverflow:o}={}){if(!i||i<0)return s;const l=Math.max(1+r,1+i-e.length);if(s.length<=l)return s;const f=[],b={};let g=i-e.length;typeof n=="number"&&(n>i-Math.max(2,r)?f.push(0):g=i-n);let _,u,y=!1,h=-1,m=-1,p=-1;t===Ut&&(h=vn(s,h),h!==-1&&(g=h+l));for(let S;S=s[h+=1];){if(t===yt&&S==="\\"){switch(m=h,s[h+1]){case"x":h+=3;break;case"u":h+=5;break;case"U":h+=9;break;default:h+=1}p=h}if(S===`
`)t===Ut&&(h=vn(s,h)),g=h+l,_=void 0;else{if(S===" "&&u&&u!==" "&&u!==`
`&&u!=="	"){const O=s[h+1];O&&O!==" "&&O!==`
`&&O!=="	"&&(_=h)}if(h>=g)if(_)f.push(_),g=_+l,_=void 0;else if(t===yt){for(;u===" "||u==="	";)u=S,S=s[h+=1],y=!0;const O=h>p+1?h-2:m-1;if(b[O])return s;f.push(O),b[O]=!0,g=O+l,_=void 0}else y=!0}u=S}if(y&&o&&o(),f.length===0)return s;a&&a();let w=s.slice(0,f[0]);for(let S=0;S<f.length;++S){const O=f[S],E=f[S+1]||s.length;O===0?w=`
${e}${s.slice(0,E)}`:(t===yt&&b[O]&&(w+=`${s[O]}\\`),w+=`
${e}${s.slice(O+1,E)}`)}return w}function vn(s,e){let t=s[e+1];for(;t===" "||t==="	";){do t=s[e+=1];while(t&&t!==`
`);t=s[e+1]}return e}const bt=(s,e)=>({indentAtStart:e?s.indent.length:s.indentAtStart,lineWidth:s.options.lineWidth,minContentWidth:s.options.minContentWidth}),wt=s=>/^(%|---|\.\.\.)/m.test(s);function xs(s,e,t){if(!e||e<0)return!1;const n=e-t,i=s.length;if(i<=n)return!1;for(let r=0,a=0;r<i;++r)if(s[r]===`
`){if(r-a>n)return!0;if(a=r+1,i-a<=n)return!1}return!0}function st(s,e){const t=JSON.stringify(s);if(e.options.doubleQuotedAsJSON)return t;const{implicitKey:n}=e,i=e.options.doubleQuotedMinMultiLineLength,r=e.indent||(wt(s)?"  ":"");let a="",o=0;for(let l=0,f=t[l];f;f=t[++l])if(f===" "&&t[l+1]==="\\"&&t[l+2]==="n"&&(a+=t.slice(o,l)+"\\ ",l+=1,o=l,f="\\"),f==="\\")switch(t[l+1]){case"u":{a+=t.slice(o,l);const b=t.substr(l+2,4);switch(b){case"0000":a+="\\0";break;case"0007":a+="\\a";break;case"000b":a+="\\v";break;case"001b":a+="\\e";break;case"0085":a+="\\N";break;case"00a0":a+="\\_";break;case"2028":a+="\\L";break;case"2029":a+="\\P";break;default:b.substr(0,2)==="00"?a+="\\x"+b.substr(2):a+=t.substr(l,6)}l+=5,o=l+1}break;case"n":if(n||t[l+2]==='"'||t.length<i)l+=1;else{for(a+=t.slice(o,l)+`

`;t[l+2]==="\\"&&t[l+3]==="n"&&t[l+4]!=='"';)a+=`
`,l+=2;a+=r,t[l+2]===" "&&(a+="\\"),l+=1,o=l+1}break;default:l+=1}return a=o?a+t.slice(o):t,n?a:_t(a,r,yt,bt(e,!1))}function Kt(s,e){if(e.options.singleQuote===!1||e.implicitKey&&s.includes(`
`)||/[ \t]\n|\n[ \t]/.test(s))return st(s,e);const t=e.indent||(wt(s)?"  ":""),n="'"+s.replace(/'/g,"''").replace(/\n+/g,`$&
${t}`)+"'";return e.implicitKey?n:_t(n,t,wn,bt(e,!1))}function Ue(s,e){const{singleQuote:t}=e.options;let n;if(t===!1)n=st;else{const i=s.includes('"'),r=s.includes("'");i&&!r?n=Kt:r&&!i?n=st:n=t?Kt:st}return n(s,e)}let Wt;try{Wt=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{Wt=/\n+(?!\n|$)/g}function vt({comment:s,type:e,value:t},n,i,r){const{blockQuote:a,commentString:o,lineWidth:l}=n.options;if(!a||/\n[\t ]+$/.test(t)||/^\s*$/.test(t))return Ue(t,n);const f=n.indent||(n.forceBlockIndent||wt(t)?"  ":""),b=a==="literal"?!0:a==="folded"||e===ee.BLOCK_FOLDED?!1:e===ee.BLOCK_LITERAL?!0:!xs(t,l,f.length);if(!t)return b?`|
`:`>
`;let g,_;for(_=t.length;_>0;--_){const C=t[_-1];if(C!==`
`&&C!=="	"&&C!==" ")break}let u=t.substring(_);const y=u.indexOf(`
`);y===-1?g="-":t===u||y!==u.length-1?(g="+",r&&r()):g="",u&&(t=t.slice(0,-u.length),u[u.length-1]===`
`&&(u=u.slice(0,-1)),u=u.replace(Wt,`$&${f}`));let h=!1,m,p=-1;for(m=0;m<t.length;++m){const C=t[m];if(C===" ")h=!0;else if(C===`
`)p=m;else break}let w=t.substring(0,p<m?p+1:m);w&&(t=t.substring(w.length),w=w.replace(/\n+/g,`$&${f}`));let O=(b?"|":">")+(h?f?"2":"1":"")+g;if(s&&(O+=" "+o(s.replace(/ ?[\r\n]+/g," ")),i&&i()),b)return t=t.replace(/\n+/g,`$&${f}`),`${O}
${f}${w}${t}${u}`;t=t.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${f}`);const E=_t(`${w}${t}${u}`,f,Ut,bt(n,!0));return`${O}
${f}${E}`}function Bs(s,e,t,n){const{type:i,value:r}=s,{actualString:a,implicitKey:o,indent:l,indentStep:f,inFlow:b}=e;if(o&&r.includes(`
`)||b&&/[[\]{},]/.test(r))return Ue(r,e);if(!r||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(r))return o||b||!r.includes(`
`)?Ue(r,e):vt(s,e,t,n);if(!o&&!b&&i!==ee.PLAIN&&r.includes(`
`))return vt(s,e,t,n);if(wt(r)){if(l==="")return e.forceBlockIndent=!0,vt(s,e,t,n);if(o&&l===f)return Ue(r,e)}const g=r.replace(/\n+/g,`$&
${l}`);if(a){const _=h=>{var m;return h.default&&h.tag!=="tag:yaml.org,2002:str"&&((m=h.test)==null?void 0:m.test(g))},{compat:u,tags:y}=e.doc.schema;if(y.some(_)||(u==null?void 0:u.some(_)))return Ue(r,e)}return o?g:_t(g,l,wn,bt(e,!1))}function qt(s,e,t,n){const{implicitKey:i,inFlow:r}=e,a=typeof s.value=="string"?s:Object.assign({},s,{value:String(s.value)});let{type:o}=s;o!==ee.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(a.value)&&(o=ee.QUOTE_DOUBLE);const l=b=>{switch(b){case ee.BLOCK_FOLDED:case ee.BLOCK_LITERAL:return i||r?Ue(a.value,e):vt(a,e,t,n);case ee.QUOTE_DOUBLE:return st(a.value,e);case ee.QUOTE_SINGLE:return Kt(a.value,e);case ee.PLAIN:return Bs(a,e,t,n);default:return null}};let f=l(o);if(f===null){const{defaultKeyType:b,defaultStringType:g}=e.options,_=i&&b||g;if(f=l(_),f===null)throw new Error(`Unsupported default string type ${_}`)}return f}function kn(s,e){const t=Object.assign({blockQuote:!0,commentString:Ls,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},s.schema.toStringOptions,e);let n;switch(t.collectionStyle){case"block":n=!1;break;case"flow":n=!0;break;default:n=null}return{anchors:new Set,doc:s,flowCollectionPadding:t.flowCollectionPadding?" ":"",indent:"",indentStep:typeof t.indent=="number"?" ".repeat(t.indent):"  ",inFlow:n,options:t}}function zs(s,e){var i,r,a,o;if(e.tag){const l=s.filter(f=>f.tag===e.tag);if(l.length>0)return(i=l.find(f=>f.format===e.format))!=null?i:l[0]}let t,n;if(ae(e)){n=e.value;const l=s.filter(f=>{var b;return(b=f.identify)==null?void 0:b.call(f,n)});t=(r=l.find(f=>f.format===e.format))!=null?r:l.find(f=>!f.format)}else n=e,t=s.find(l=>l.nodeClass&&n instanceof l.nodeClass);if(!t){const l=(o=(a=n==null?void 0:n.constructor)==null?void 0:a.name)!=null?o:typeof n;throw new Error(`Tag not resolved for ${l} value`)}return t}function Ps(s,e,{anchors:t,doc:n}){if(!n.directives)return"";const i=[],r=(ae(s)||le(s))&&s.anchor;r&&gn(r)&&(t.add(r),i.push(`&${r}`));const a=s.tag?s.tag:e.default?null:e.tag;return a&&i.push(n.directives.tagString(a)),i.join(" ")}function Ke(s,e,t,n){var l,f;if(oe(s))return s.toString(e,t,n);if($e(s)){if(e.doc.directives)return s.toString(e);if((l=e.resolvedAliases)!=null&&l.has(s))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(s):e.resolvedAliases=new Set([s]),s=s.resolve(e.doc)}let i;const r=fe(s)?s:e.doc.createNode(s,{onTagObj:b=>i=b});i||(i=zs(e.doc.schema.tags,r));const a=Ps(r,i,e);a.length>0&&(e.indentAtStart=((f=e.indentAtStart)!=null?f:0)+a.length+1);const o=typeof i.stringify=="function"?i.stringify(r,e,t,n):ae(r)?qt(r,e,t,n):r.toString(e,t,n);return a?ae(r)||o[0]==="{"||o[0]==="["?`${a} ${o}`:`${a}
${e.indent}${o}`:o}function Ds({key:s,value:e},t,n,i){var x,D;const{allNullValues:r,doc:a,indent:o,indentStep:l,options:{commentString:f,indentSeq:b,simpleKeys:g}}=t;let _=fe(s)&&s.comment||null;if(g){if(_)throw new Error("With simple keys, key nodes cannot have comments");if(le(s)){const T="With simple keys, collection cannot be used as a key value";throw new Error(T)}}let u=!g&&(!s||_&&e==null&&!t.inFlow||le(s)||(ae(s)?s.type===ee.BLOCK_FOLDED||s.type===ee.BLOCK_LITERAL:typeof s=="object"));t=Object.assign({},t,{allNullValues:!1,implicitKey:!u&&(g||!r),indent:o+l});let y=!1,h=!1,m=Ke(s,t,()=>y=!0,()=>h=!0);if(!u&&!t.inFlow&&m.length>1024){if(g)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");u=!0}if(t.inFlow){if(r||e==null)return y&&n&&n(),m===""?"?":u?`? ${m}`:m}else if(r&&!g||e==null&&u)return m=`? ${m}`,_&&!y?m+=Be(m,t.indent,f(_)):h&&i&&i(),m;y&&(_=null),u?(_&&(m+=Be(m,t.indent,f(_))),m=`? ${m}
${o}:`):(m=`${m}:`,_&&(m+=Be(m,t.indent,f(_))));let p,w,S;fe(e)?(p=!!e.spaceBefore,w=e.commentBefore,S=e.comment):(p=!1,w=null,S=null,e&&typeof e=="object"&&(e=a.createNode(e))),t.implicitKey=!1,!u&&!_&&ae(e)&&(t.indentAtStart=m.length+1),h=!1,!b&&l.length>=2&&!t.inFlow&&!u&&Qe(e)&&!e.flow&&!e.tag&&!e.anchor&&(t.indent=t.indent.substring(2));let O=!1;const E=Ke(e,t,()=>O=!0,()=>h=!0);let C=" ";if(_||p||w){if(C=p?`
`:"",w){const T=f(w);C+=`
${Te(T,t.indent)}`}E===""&&!t.inFlow?C===`
`&&(C=`

`):C+=`
${t.indent}`}else if(!u&&le(e)){const T=E[0],$=E.indexOf(`
`),G=$!==-1,A=(D=(x=t.inFlow)!=null?x:e.flow)!=null?D:e.items.length===0;if(G||!A){let P=!1;if(G&&(T==="&"||T==="!")){let d=E.indexOf(" ");T==="&"&&d!==-1&&d<$&&E[d+1]==="!"&&(d=E.indexOf(" ",d+1)),(d===-1||$<d)&&(P=!0)}P||(C=`
${t.indent}`)}}else(E===""||E[0]===`
`)&&(C="");return m+=C+E,t.inFlow?O&&n&&n():S&&!O?m+=Be(m,t.indent,f(S)):h&&i&&i(),m}function Sn(s,e){(s==="debug"||s==="warn")&&(typeof process!="undefined"&&process.emitWarning?process.emitWarning(e):console.warn(e))}const An="<<";function En(s,e,{key:t,value:n}){if((s==null?void 0:s.doc.schema.merge)&&Rs(t))if(n=$e(n)?n.resolve(s.doc):n,Qe(n))for(const i of n.items)Zt(s,e,i);else if(Array.isArray(n))for(const i of n)Zt(s,e,i);else Zt(s,e,n);else{const i=be(t,"",s);if(e instanceof Map)e.set(i,be(n,i,s));else if(e instanceof Set)e.add(i);else{const r=Fs(t,i,s),a=be(n,r,s);r in e?Object.defineProperty(e,r,{value:a,writable:!0,enumerable:!0,configurable:!0}):e[r]=a}}return e}const Rs=s=>s===An||ae(s)&&s.value===An&&(!s.type||s.type===ee.PLAIN);function Zt(s,e,t){const n=s&&$e(t)?t.resolve(s.doc):t;if(!Xe(n))throw new Error("Merge sources must be maps or map aliases");const i=n.toJSON(null,s,Map);for(const[r,a]of i)e instanceof Map?e.has(r)||e.set(r,a):e instanceof Set?e.add(r):Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(e,r,{value:a,writable:!0,enumerable:!0,configurable:!0});return e}function Fs(s,e,t){if(e===null)return"";if(typeof e!="object")return String(e);if(fe(s)&&(t==null?void 0:t.doc)){const n=kn(t.doc,{});n.anchors=new Set;for(const r of t.anchors.keys())n.anchors.add(r.anchor);n.inFlow=!0,n.inStringifyKey=!0;const i=s.toString(n);if(!t.mapKeyWarned){let r=JSON.stringify(i);r.length>40&&(r=r.substring(0,36)+'..."'),Sn(t.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${r}. Set mapAsMap: true to use object keys.`),t.mapKeyWarned=!0}return i}return JSON.stringify(e)}function Gt(s,e,t){const n=tt(s,void 0,t),i=tt(e,void 0,t);return new ye(n,i)}class ye{constructor(e,t=null){Object.defineProperty(this,_e,{value:mn}),this.key=e,this.value=t}clone(e){let{key:t,value:n}=this;return fe(t)&&(t=t.clone(e)),fe(n)&&(n=n.clone(e)),new ye(t,n)}toJSON(e,t){const n=t!=null&&t.mapAsMap?new Map:{};return En(t,n,this)}toString(e,t,n){return e!=null&&e.doc?Ds(this,e,t,n):JSON.stringify(this)}}function On(s,e,t){var r;return(((r=e.inFlow)!=null?r:s.flow)?Ms:$s)(s,e,t)}function $s({comment:s,items:e},t,{blockItemPrefix:n,flowChars:i,itemIndent:r,onChompKeep:a,onComment:o}){const{indent:l,options:{commentString:f}}=t,b=Object.assign({},t,{indent:r,type:null});let g=!1;const _=[];for(let y=0;y<e.length;++y){const h=e[y];let m=null;if(fe(h))!g&&h.spaceBefore&&_.push(""),kt(t,_,h.commentBefore,g),h.comment&&(m=h.comment);else if(oe(h)){const w=fe(h.key)?h.key:null;w&&(!g&&w.spaceBefore&&_.push(""),kt(t,_,w.commentBefore,g))}g=!1;let p=Ke(h,b,()=>m=null,()=>g=!0);m&&(p+=Be(p,r,f(m))),g&&m&&(g=!1),_.push(n+p)}let u;if(_.length===0)u=i.start+i.end;else{u=_[0];for(let y=1;y<_.length;++y){const h=_[y];u+=h?`
${l}${h}`:`
`}}return s?(u+=`
`+Te(f(s),l),o&&o()):g&&a&&a(),u}function Ms({comment:s,items:e},t,{flowChars:n,itemIndent:i,onComment:r}){const{indent:a,indentStep:o,flowCollectionPadding:l,options:{commentString:f}}=t;i+=o;const b=Object.assign({},t,{indent:i,inFlow:!0,type:null});let g=!1,_=0;const u=[];for(let p=0;p<e.length;++p){const w=e[p];let S=null;if(fe(w))w.spaceBefore&&u.push(""),kt(t,u,w.commentBefore,!1),w.comment&&(S=w.comment);else if(oe(w)){const E=fe(w.key)?w.key:null;E&&(E.spaceBefore&&u.push(""),kt(t,u,E.commentBefore,!1),E.comment&&(g=!0));const C=fe(w.value)?w.value:null;C?(C.comment&&(S=C.comment),C.commentBefore&&(g=!0)):w.value==null&&(E==null?void 0:E.comment)&&(S=E.comment)}S&&(g=!0);let O=Ke(w,b,()=>S=null);p<e.length-1&&(O+=","),S&&(O+=Be(O,i,f(S))),!g&&(u.length>_||O.includes(`
`))&&(g=!0),u.push(O),_=u.length}let y;const{start:h,end:m}=n;if(u.length===0)y=h+m;else if(g||(g=u.reduce((w,S)=>w+S.length+2,2)>gt.maxFlowStringSingleLineLength),g){y=h;for(const p of u)y+=p?`
${o}${a}${p}`:`
`;y+=`
${a}${m}`}else y=`${h}${l}${u.join(" ")}${l}${m}`;return s&&(y+=Be(y,a,f(s)),r&&r()),y}function kt({indent:s,options:{commentString:e}},t,n,i){if(n&&i&&(n=n.replace(/^\n+/,"")),n){const r=Te(e(n),s);t.push(r.trimStart())}}function De(s,e){const t=ae(e)?e.value:e;for(const n of s)if(oe(n)&&(n.key===e||n.key===t||ae(n.key)&&n.key.value===t))return n}class we extends gt{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(xe,e),this.items=[]}static from(e,t,n){const{keepUndefined:i,replacer:r}=n,a=new this(e),o=(l,f)=>{if(typeof r=="function")f=r.call(t,l,f);else if(Array.isArray(r)&&!r.includes(l))return;(f!==void 0||i)&&a.items.push(Gt(l,f,n))};if(t instanceof Map)for(const[l,f]of t)o(l,f);else if(t&&typeof t=="object")for(const l of Object.keys(t))o(l,t[l]);return typeof e.sortMapEntries=="function"&&a.items.sort(e.sortMapEntries),a}add(e,t){var a;let n;oe(e)?n=e:!e||typeof e!="object"||!("key"in e)?n=new ye(e,e==null?void 0:e.value):n=new ye(e.key,e.value);const i=De(this.items,n.key),r=(a=this.schema)==null?void 0:a.sortMapEntries;if(i){if(!t)throw new Error(`Key ${n.key} already set`);ae(i.value)&&bn(n.value)?i.value.value=n.value:i.value=n.value}else if(r){const o=this.items.findIndex(l=>r(n,l)<0);o===-1?this.items.push(n):this.items.splice(o,0,n)}else this.items.push(n)}delete(e){const t=De(this.items,e);return t?this.items.splice(this.items.indexOf(t),1).length>0:!1}get(e,t){var r;const n=De(this.items,e),i=n==null?void 0:n.value;return(r=!t&&ae(i)?i.value:i)!=null?r:void 0}has(e){return!!De(this.items,e)}set(e,t){this.add(new ye(e,t),!0)}toJSON(e,t,n){const i=n?new n:t!=null&&t.mapAsMap?new Map:{};t!=null&&t.onCreate&&t.onCreate(i);for(const r of this.items)En(t,i,r);return i}toString(e,t,n){if(!e)return JSON.stringify(this);for(const i of this.items)if(!oe(i))throw new Error(`Map items must all be pairs; found ${JSON.stringify(i)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),On(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:n,onComment:t})}}const We={collection:"map",default:!0,nodeClass:we,tag:"tag:yaml.org,2002:map",resolve(s,e){return Xe(s)||e("Expected a mapping for this tag"),s},createNode:(s,e,t)=>we.from(s,e,t)};class Re extends gt{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(Fe,e),this.items=[]}add(e){this.items.push(e)}delete(e){const t=St(e);return typeof t!="number"?!1:this.items.splice(t,1).length>0}get(e,t){const n=St(e);if(typeof n!="number")return;const i=this.items[n];return!t&&ae(i)?i.value:i}has(e){const t=St(e);return typeof t=="number"&&t<this.items.length}set(e,t){const n=St(e);if(typeof n!="number")throw new Error(`Expected a valid index, not ${e}.`);const i=this.items[n];ae(i)&&bn(t)?i.value=t:this.items[n]=t}toJSON(e,t){const n=[];t!=null&&t.onCreate&&t.onCreate(n);let i=0;for(const r of this.items)n.push(be(r,String(i++),t));return n}toString(e,t,n){return e?On(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:n,onComment:t}):JSON.stringify(this)}static from(e,t,n){const{replacer:i}=n,r=new this(e);if(t&&Symbol.iterator in Object(t)){let a=0;for(let o of t){if(typeof i=="function"){const l=t instanceof Set?o:String(a++);o=i.call(t,l,o)}r.items.push(tt(o,void 0,n))}}return r}}function St(s){let e=ae(s)?s.value:s;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}const qe={collection:"seq",default:!0,nodeClass:Re,tag:"tag:yaml.org,2002:seq",resolve(s,e){return Qe(s)||e("Expected a sequence for this tag"),s},createNode:(s,e,t)=>Re.from(s,e,t)},At={identify:s=>typeof s=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:s=>s,stringify(s,e,t,n){return e=Object.assign({actualString:!0},e),qt(s,e,t,n)}},Et={identify:s=>s==null,createNode:()=>new ee(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new ee(null),stringify:({source:s},e)=>typeof s=="string"&&Et.test.test(s)?s:e.options.nullStr},Vt={identify:s=>typeof s=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:s=>new ee(s[0]==="t"||s[0]==="T"),stringify({source:s,value:e},t){if(s&&Vt.test.test(s)){const n=s[0]==="t"||s[0]==="T";if(e===n)return s}return e?t.options.trueStr:t.options.falseStr}};function Se({format:s,minFractionDigits:e,tag:t,value:n}){if(typeof n=="bigint")return String(n);const i=typeof n=="number"?n:Number(n);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let r=JSON.stringify(n);if(!s&&e&&(!t||t==="tag:yaml.org,2002:float")&&/^\d/.test(r)){let a=r.indexOf(".");a<0&&(a=r.length,r+=".");let o=e-(r.length-a-1);for(;o-- >0;)r+="0"}return r}const Cn={identify:s=>typeof s=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:s=>s.slice(-3).toLowerCase()==="nan"?NaN:s[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Se},In={identify:s=>typeof s=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:s=>parseFloat(s),stringify(s){const e=Number(s.value);return isFinite(e)?e.toExponential():Se(s)}},Nn={identify:s=>typeof s=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(s){const e=new ee(parseFloat(s)),t=s.indexOf(".");return t!==-1&&s[s.length-1]==="0"&&(e.minFractionDigits=s.length-t-1),e},stringify:Se},Ot=s=>typeof s=="bigint"||Number.isInteger(s),Ht=(s,e,t,{intAsBigInt:n})=>n?BigInt(s):parseInt(s.substring(e),t);function Tn(s,e,t){const{value:n}=s;return Ot(n)&&n>=0?t+n.toString(e):Se(s)}const Ln={identify:s=>Ot(s)&&s>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(s,e,t)=>Ht(s,2,8,t),stringify:s=>Tn(s,8,"0o")},xn={identify:Ot,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(s,e,t)=>Ht(s,0,10,t),stringify:Se},Bn={identify:s=>Ot(s)&&s>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(s,e,t)=>Ht(s,2,16,t),stringify:s=>Tn(s,16,"0x")},js=[We,qe,At,Et,Vt,Ln,xn,Bn,Cn,In,Nn];function zn(s){return typeof s=="bigint"||Number.isInteger(s)}const Ct=({value:s})=>JSON.stringify(s),Us=[{identify:s=>typeof s=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:s=>s,stringify:Ct},{identify:s=>s==null,createNode:()=>new ee(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:Ct},{identify:s=>typeof s=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:s=>s==="true",stringify:Ct},{identify:zn,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(s,e,{intAsBigInt:t})=>t?BigInt(s):parseInt(s,10),stringify:({value:s})=>zn(s)?s.toString():JSON.stringify(s)},{identify:s=>typeof s=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:s=>parseFloat(s),stringify:Ct}],Ks={default:!0,tag:"",test:/^/,resolve(s,e){return e(`Unresolved plain scalar ${JSON.stringify(s)}`),s}},Ws=[We,qe].concat(Us,Ks),Yt={identify:s=>s instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(s,e){if(typeof Buffer=="function")return Buffer.from(s,"base64");if(typeof atob=="function"){const t=atob(s.replace(/[\n\r]/g,"")),n=new Uint8Array(t.length);for(let i=0;i<t.length;++i)n[i]=t.charCodeAt(i);return n}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),s},stringify({comment:s,type:e,value:t},n,i,r){const a=t;let o;if(typeof Buffer=="function")o=a instanceof Buffer?a.toString("base64"):Buffer.from(a.buffer).toString("base64");else if(typeof btoa=="function"){let l="";for(let f=0;f<a.length;++f)l+=String.fromCharCode(a[f]);o=btoa(l)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e||(e=ee.BLOCK_LITERAL),e!==ee.QUOTE_DOUBLE){const l=Math.max(n.options.lineWidth-n.indent.length,n.options.minContentWidth),f=Math.ceil(o.length/l),b=new Array(f);for(let g=0,_=0;g<f;++g,_+=l)b[g]=o.substr(_,l);o=b.join(e===ee.BLOCK_LITERAL?`
`:" ")}return qt({comment:s,type:e,value:o},n,i,r)}};function Pn(s,e){var t;if(Qe(s))for(let n=0;n<s.items.length;++n){let i=s.items[n];if(!oe(i)){if(Xe(i)){i.items.length>1&&e("Each pair must have its own sequence indicator");const r=i.items[0]||new ye(new ee(null));if(i.commentBefore&&(r.key.commentBefore=r.key.commentBefore?`${i.commentBefore}
${r.key.commentBefore}`:i.commentBefore),i.comment){const a=(t=r.value)!=null?t:r.key;a.comment=a.comment?`${i.comment}
${a.comment}`:i.comment}i=r}s.items[n]=oe(i)?i:new ye(i)}}else e("Expected a sequence for this tag");return s}function Dn(s,e,t){const{replacer:n}=t,i=new Re(s);i.tag="tag:yaml.org,2002:pairs";let r=0;if(e&&Symbol.iterator in Object(e))for(let a of e){typeof n=="function"&&(a=n.call(e,String(r++),a));let o,l;if(Array.isArray(a))if(a.length===2)o=a[0],l=a[1];else throw new TypeError(`Expected [key, value] tuple: ${a}`);else if(a&&a instanceof Object){const f=Object.keys(a);if(f.length===1)o=f[0],l=a[o];else throw new TypeError(`Expected tuple with one key, not ${f.length} keys`)}else o=a;i.items.push(Gt(o,l,t))}return i}const Jt={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:Pn,createNode:Dn};class Ze extends Re{constructor(){super(),this.add=we.prototype.add.bind(this),this.delete=we.prototype.delete.bind(this),this.get=we.prototype.get.bind(this),this.has=we.prototype.has.bind(this),this.set=we.prototype.set.bind(this),this.tag=Ze.tag}toJSON(e,t){if(!t)return super.toJSON(e);const n=new Map;t!=null&&t.onCreate&&t.onCreate(n);for(const i of this.items){let r,a;if(oe(i)?(r=be(i.key,"",t),a=be(i.value,r,t)):r=be(i,"",t),n.has(r))throw new Error("Ordered maps must not include duplicate keys");n.set(r,a)}return n}static from(e,t,n){const i=Dn(e,t,n),r=new this;return r.items=i.items,r}}Ze.tag="tag:yaml.org,2002:omap";const Xt={collection:"seq",identify:s=>s instanceof Map,nodeClass:Ze,default:!1,tag:"tag:yaml.org,2002:omap",resolve(s,e){const t=Pn(s,e),n=[];for(const{key:i}of t.items)ae(i)&&(n.includes(i.value)?e(`Ordered maps must not include duplicate keys: ${i.value}`):n.push(i.value));return Object.assign(new Ze,t)},createNode:(s,e,t)=>Ze.from(s,e,t)};function Rn({value:s,source:e},t){return e&&(s?Fn:$n).test.test(e)?e:s?t.options.trueStr:t.options.falseStr}const Fn={identify:s=>s===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new ee(!0),stringify:Rn},$n={identify:s=>s===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>new ee(!1),stringify:Rn},qs={identify:s=>typeof s=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:s=>s.slice(-3).toLowerCase()==="nan"?NaN:s[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Se},Zs={identify:s=>typeof s=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:s=>parseFloat(s.replace(/_/g,"")),stringify(s){const e=Number(s.value);return isFinite(e)?e.toExponential():Se(s)}},Gs={identify:s=>typeof s=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(s){const e=new ee(parseFloat(s.replace(/_/g,""))),t=s.indexOf(".");if(t!==-1){const n=s.substring(t+1).replace(/_/g,"");n[n.length-1]==="0"&&(e.minFractionDigits=n.length)}return e},stringify:Se},it=s=>typeof s=="bigint"||Number.isInteger(s);function It(s,e,t,{intAsBigInt:n}){const i=s[0];if((i==="-"||i==="+")&&(e+=1),s=s.substring(e).replace(/_/g,""),n){switch(t){case 2:s=`0b${s}`;break;case 8:s=`0o${s}`;break;case 16:s=`0x${s}`;break}const a=BigInt(s);return i==="-"?BigInt(-1)*a:a}const r=parseInt(s,t);return i==="-"?-1*r:r}function Qt(s,e,t){const{value:n}=s;if(it(n)){const i=n.toString(e);return n<0?"-"+t+i.substr(1):t+i}return Se(s)}const Vs={identify:it,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(s,e,t)=>It(s,2,2,t),stringify:s=>Qt(s,2,"0b")},Hs={identify:it,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(s,e,t)=>It(s,1,8,t),stringify:s=>Qt(s,8,"0")},Ys={identify:it,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(s,e,t)=>It(s,0,10,t),stringify:Se},Js={identify:it,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(s,e,t)=>It(s,2,16,t),stringify:s=>Qt(s,16,"0x")};class Ge extends we{constructor(e){super(e),this.tag=Ge.tag}add(e){let t;oe(e)?t=e:e&&typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?t=new ye(e.key,null):t=new ye(e,null),De(this.items,t.key)||this.items.push(t)}get(e,t){const n=De(this.items,e);return!t&&oe(n)?ae(n.key)?n.key.value:n.key:n}set(e,t){if(typeof t!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof t}`);const n=De(this.items,e);n&&!t?this.items.splice(this.items.indexOf(n),1):!n&&t&&this.items.push(new ye(e))}toJSON(e,t){return super.toJSON(e,t,Set)}toString(e,t,n){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),t,n);throw new Error("Set items must all have null values")}static from(e,t,n){const{replacer:i}=n,r=new this(e);if(t&&Symbol.iterator in Object(t))for(let a of t)typeof i=="function"&&(a=i.call(t,a,a)),r.items.push(Gt(a,null,n));return r}}Ge.tag="tag:yaml.org,2002:set";const en={collection:"map",identify:s=>s instanceof Set,nodeClass:Ge,default:!1,tag:"tag:yaml.org,2002:set",createNode:(s,e,t)=>Ge.from(s,e,t),resolve(s,e){if(Xe(s)){if(s.hasAllNullValues(!0))return Object.assign(new Ge,s);e("Set items must all have null values")}else e("Expected a mapping for this tag");return s}};function tn(s,e){const t=s[0],n=t==="-"||t==="+"?s.substring(1):s,i=a=>e?BigInt(a):Number(a),r=n.replace(/_/g,"").split(":").reduce((a,o)=>a*i(60)+i(o),i(0));return t==="-"?i(-1)*r:r}function Mn(s){let{value:e}=s,t=a=>a;if(typeof e=="bigint")t=a=>BigInt(a);else if(isNaN(e)||!isFinite(e))return Se(s);let n="";e<0&&(n="-",e*=t(-1));const i=t(60),r=[e%i];return e<60?r.unshift(0):(e=(e-r[0])/i,r.unshift(e%i),e>=60&&(e=(e-r[0])/i,r.unshift(e))),n+r.map(a=>String(a).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const jn={identify:s=>typeof s=="bigint"||Number.isInteger(s),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(s,e,{intAsBigInt:t})=>tn(s,t),stringify:Mn},Un={identify:s=>typeof s=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:s=>tn(s,!1),stringify:Mn},Nt={identify:s=>s instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(s){const e=s.match(Nt.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,t,n,i,r,a,o]=e.map(Number),l=e[7]?Number((e[7]+"00").substr(1,3)):0;let f=Date.UTC(t,n-1,i,r||0,a||0,o||0,l);const b=e[8];if(b&&b!=="Z"){let g=tn(b,!1);Math.abs(g)<30&&(g*=60),f-=6e4*g}return new Date(f)},stringify:({value:s})=>s.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")},Kn=[We,qe,At,Et,Fn,$n,Vs,Hs,Ys,Js,qs,Zs,Gs,Yt,Xt,Jt,en,jn,Un,Nt],Wn=new Map([["core",js],["failsafe",[We,qe,At]],["json",Ws],["yaml11",Kn],["yaml-1.1",Kn]]),qn={binary:Yt,bool:Vt,float:Nn,floatExp:In,floatNaN:Cn,floatTime:Un,int:xn,intHex:Bn,intOct:Ln,intTime:jn,map:We,null:Et,omap:Xt,pairs:Jt,seq:qe,set:en,timestamp:Nt},Xs={"tag:yaml.org,2002:binary":Yt,"tag:yaml.org,2002:omap":Xt,"tag:yaml.org,2002:pairs":Jt,"tag:yaml.org,2002:set":en,"tag:yaml.org,2002:timestamp":Nt};function nn(s,e){let t=Wn.get(e);if(!t)if(Array.isArray(s))t=[];else{const n=Array.from(Wn.keys()).filter(i=>i!=="yaml11").map(i=>JSON.stringify(i)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${n} or define customTags array`)}if(Array.isArray(s))for(const n of s)t=t.concat(n);else typeof s=="function"&&(t=s(t.slice()));return t.map(n=>{if(typeof n!="string")return n;const i=qn[n];if(i)return i;const r=Object.keys(qn).map(a=>JSON.stringify(a)).join(", ");throw new Error(`Unknown custom tag "${n}"; use one of ${r}`)})}const Qs=(s,e)=>s.key<e.key?-1:s.key>e.key?1:0;class sn{constructor({compat:e,customTags:t,merge:n,resolveKnownTags:i,schema:r,sortMapEntries:a,toStringDefaults:o}){this.compat=Array.isArray(e)?nn(e,"compat"):e?nn(null,e):null,this.merge=!!n,this.name=typeof r=="string"&&r||"core",this.knownTags=i?Xs:{},this.tags=nn(t,this.name),this.toStringOptions=o!=null?o:null,Object.defineProperty(this,xe,{value:We}),Object.defineProperty(this,Ne,{value:At}),Object.defineProperty(this,Fe,{value:qe}),this.sortMapEntries=typeof a=="function"?a:a===!0?Qs:null}clone(){const e=Object.create(sn.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}function ei(s,e){var l;const t=[];let n=e.directives===!0;if(e.directives!==!1&&s.directives){const f=s.directives.toString(s);f?(t.push(f),n=!0):s.directives.docStart&&(n=!0)}n&&t.push("---");const i=kn(s,e),{commentString:r}=i.options;if(s.commentBefore){t.length!==1&&t.unshift("");const f=r(s.commentBefore);t.unshift(Te(f,""))}let a=!1,o=null;if(s.contents){if(fe(s.contents)){if(s.contents.spaceBefore&&n&&t.push(""),s.contents.commentBefore){const g=r(s.contents.commentBefore);t.push(Te(g,""))}i.forceBlockIndent=!!s.comment,o=s.contents.comment}const f=o?void 0:()=>a=!0;let b=Ke(s.contents,i,()=>o=null,f);o&&(b+=Be(b,"",r(o))),(b[0]==="|"||b[0]===">")&&t[t.length-1]==="---"?t[t.length-1]=`--- ${b}`:t.push(b)}else t.push(Ke(s.contents,i));if((l=s.directives)!=null&&l.docEnd)if(s.comment){const f=r(s.comment);f.includes(`
`)?(t.push("..."),t.push(Te(f,""))):t.push(`... ${f}`)}else t.push("...");else{let f=s.comment;f&&a&&(f=f.replace(/^\n+/,"")),f&&((!a||o)&&t[t.length-1]!==""&&t.push(""),t.push(Te(r(f),"")))}return t.join(`
`)+`
`}class Tt{constructor(e,t,n){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,_e,{value:$t});let i=null;typeof t=="function"||Array.isArray(t)?i=t:n===void 0&&t&&(n=t,t=void 0);const r=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,uniqueKeys:!0,version:"1.2"},n);this.options=r;let{version:a}=r;n!=null&&n._directives?(this.directives=n._directives.atDocument(),this.directives.yaml.explicit&&(a=this.directives.yaml.version)):this.directives=new ge({version:a}),this.setSchema(a,n),this.contents=e===void 0?null:this.createNode(e,i,n)}clone(){const e=Object.create(Tt.prototype,{[_e]:{value:$t}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=fe(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){Ve(this.contents)&&this.contents.add(e)}addIn(e,t){Ve(this.contents)&&this.contents.addIn(e,t)}createAlias(e,t){if(!e.anchor){const n=yn(this);e.anchor=!t||n.has(t)?_n(t||"a",n):t}return new jt(e.anchor)}createNode(e,t,n){let i;if(typeof t=="function")e=t.call({"":e},"",e),i=t;else if(Array.isArray(t)){const m=w=>typeof w=="number"||w instanceof String||w instanceof Number,p=t.filter(m).map(String);p.length>0&&(t=t.concat(p)),i=t}else n===void 0&&t&&(n=t,t=void 0);const{aliasDuplicateObjects:r,anchorPrefix:a,flow:o,keepUndefined:l,onTagObj:f,tag:b}=n!=null?n:{},{onAnchor:g,setAnchors:_,sourceObjects:u}=Is(this,a||"a"),y={aliasDuplicateObjects:r!=null?r:!0,keepUndefined:l!=null?l:!1,onAnchor:g,onTagObj:f,replacer:i,schema:this.schema,sourceObjects:u},h=tt(e,b,y);return o&&le(h)&&(h.flow=!0),_(),h}createPair(e,t,n={}){const i=this.createNode(e,null,n),r=this.createNode(t,null,n);return new ye(i,r)}delete(e){return Ve(this.contents)?this.contents.delete(e):!1}deleteIn(e){return nt(e)?this.contents==null?!1:(this.contents=null,!0):Ve(this.contents)?this.contents.deleteIn(e):!1}get(e,t){return le(this.contents)?this.contents.get(e,t):void 0}getIn(e,t){return nt(e)?!t&&ae(this.contents)?this.contents.value:this.contents:le(this.contents)?this.contents.getIn(e,t):void 0}has(e){return le(this.contents)?this.contents.has(e):!1}hasIn(e){return nt(e)?this.contents!==void 0:le(this.contents)?this.contents.hasIn(e):!1}set(e,t){this.contents==null?this.contents=mt(this.schema,[e],t):Ve(this.contents)&&this.contents.set(e,t)}setIn(e,t){nt(e)?this.contents=t:this.contents==null?this.contents=mt(this.schema,Array.from(e),t):Ve(this.contents)&&this.contents.setIn(e,t)}setSchema(e,t={}){typeof e=="number"&&(e=String(e));let n;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new ge({version:"1.1"}),n={merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new ge({version:e}),n={merge:!1,resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,n=null;break;default:{const i=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${i}`)}}if(t.schema instanceof Object)this.schema=t.schema;else if(n)this.schema=new sn(Object.assign(n,t));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:t,mapAsMap:n,maxAliasCount:i,onAnchor:r,reviver:a}={}){const o={anchors:new Map,doc:this,keep:!e,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof i=="number"?i:100},l=be(this.contents,t!=null?t:"",o);if(typeof r=="function")for(const{count:f,res:b}of o.anchors.values())r(b,f);return typeof a=="function"?je(a,{"":l},"",l):l}toJSON(e,t){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:t})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const t=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${t}`)}return ei(this,e)}}function Ve(s){if(le(s))return!0;throw new Error("Expected a YAML collection as document contents")}class Zn extends Error{constructor(e,t,n,i){super(),this.name=e,this.code=n,this.message=i,this.pos=t}}class rt extends Zn{constructor(e,t,n){super("YAMLParseError",e,t,n)}}class ti extends Zn{constructor(e,t,n){super("YAMLWarning",e,t,n)}}const Gn=(s,e)=>t=>{if(t.pos[0]===-1)return;t.linePos=t.pos.map(o=>e.linePos(o));const{line:n,col:i}=t.linePos[0];t.message+=` at line ${n}, column ${i}`;let r=i-1,a=s.substring(e.lineStarts[n-1],e.lineStarts[n]).replace(/[\n\r]+$/,"");if(r>=60&&a.length>80){const o=Math.min(r-39,a.length-79);a="\u2026"+a.substring(o),r-=o-1}if(a.length>80&&(a=a.substring(0,79)+"\u2026"),n>1&&/^ *$/.test(a.substring(0,r))){let o=s.substring(e.lineStarts[n-2],e.lineStarts[n-1]);o.length>80&&(o=o.substring(0,79)+`\u2026
`),a=o+a}if(/[^ ]/.test(a)){let o=1;const l=t.linePos[1];l&&l.line===n&&l.col>i&&(o=Math.max(1,Math.min(l.col-i,80-r)));const f=" ".repeat(r)+"^".repeat(o);t.message+=`:

${a}
${f}
`}};function He(s,{flow:e,indicator:t,next:n,offset:i,onError:r,startOnNewline:a}){let o=!1,l=a,f=a,b="",g="",_=!1,u=!1,y=!1,h=null,m=null,p=null,w=null,S=null;for(const C of s)switch(y&&(C.type!=="space"&&C.type!=="newline"&&C.type!=="comma"&&r(C.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),y=!1),C.type){case"space":!e&&l&&t!=="doc-start"&&C.source[0]==="	"&&r(C,"TAB_AS_INDENT","Tabs are not allowed as indentation"),f=!0;break;case"comment":{f||r(C,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const x=C.source.substring(1)||" ";b?b+=g+x:b=x,g="",l=!1;break}case"newline":l?b?b+=C.source:o=!0:g+=C.source,l=!0,_=!0,(h||m)&&(u=!0),f=!0;break;case"anchor":h&&r(C,"MULTIPLE_ANCHORS","A node can have at most one anchor"),C.source.endsWith(":")&&r(C.offset+C.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),h=C,S===null&&(S=C.offset),l=!1,f=!1,y=!0;break;case"tag":{m&&r(C,"MULTIPLE_TAGS","A node can have at most one tag"),m=C,S===null&&(S=C.offset),l=!1,f=!1,y=!0;break}case t:(h||m)&&r(C,"BAD_PROP_ORDER",`Anchors and tags must be after the ${C.source} indicator`),w&&r(C,"UNEXPECTED_TOKEN",`Unexpected ${C.source} in ${e!=null?e:"collection"}`),w=C,l=!1,f=!1;break;case"comma":if(e){p&&r(C,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),p=C,l=!1,f=!1;break}default:r(C,"UNEXPECTED_TOKEN",`Unexpected ${C.type} token`),l=!1,f=!1}const O=s[s.length-1],E=O?O.offset+O.source.length:i;return y&&n&&n.type!=="space"&&n.type!=="newline"&&n.type!=="comma"&&(n.type!=="scalar"||n.source!=="")&&r(n.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),{comma:p,found:w,spaceBefore:o,comment:b,hasNewline:_,hasNewlineAfterProp:u,anchor:h,tag:m,end:E,start:S!=null?S:E}}function at(s){if(!s)return null;switch(s.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(s.source.includes(`
`))return!0;if(s.end){for(const e of s.end)if(e.type==="newline")return!0}return!1;case"flow-collection":for(const e of s.items){for(const t of e.start)if(t.type==="newline")return!0;if(e.sep){for(const t of e.sep)if(t.type==="newline")return!0}if(at(e.key)||at(e.value))return!0}return!1;default:return!0}}function rn(s,e,t){if((e==null?void 0:e.type)==="flow-collection"){const n=e.end[0];n.indent===s&&(n.source==="]"||n.source==="}")&&at(e)&&t(n,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function Vn(s,e,t){const{uniqueKeys:n}=s.options;if(n===!1)return!1;const i=typeof n=="function"?n:(r,a)=>r===a||ae(r)&&ae(a)&&r.value===a.value&&!(r.value==="<<"&&s.schema.merge);return e.some(r=>i(r.key,t))}const Hn="All mapping items must start at the same column";function ni({composeNode:s,composeEmptyNode:e},t,n,i,r){var b,g;const a=(b=r==null?void 0:r.nodeClass)!=null?b:we,o=new a(t.schema);t.atRoot&&(t.atRoot=!1);let l=n.offset,f=null;for(const _ of n.items){const{start:u,key:y,sep:h,value:m}=_,p=He(u,{indicator:"explicit-key-ind",next:y!=null?y:h==null?void 0:h[0],offset:l,onError:i,startOnNewline:!0}),w=!p.found;if(w){if(y&&(y.type==="block-seq"?i(l,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in y&&y.indent!==n.indent&&i(l,"BAD_INDENT",Hn)),!p.anchor&&!p.tag&&!h){f=p.end,p.comment&&(o.comment?o.comment+=`
`+p.comment:o.comment=p.comment);continue}(p.hasNewlineAfterProp||at(y))&&i(y!=null?y:u[u.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else((g=p.found)==null?void 0:g.indent)!==n.indent&&i(l,"BAD_INDENT",Hn);const S=p.end,O=y?s(t,y,p,i):e(t,S,u,null,p,i);t.schema.compat&&rn(n.indent,y,i),Vn(t,o.items,O)&&i(S,"DUPLICATE_KEY","Map keys must be unique");const E=He(h!=null?h:[],{indicator:"map-value-ind",next:m,offset:O.range[2],onError:i,startOnNewline:!y||y.type==="block-scalar"});if(l=E.end,E.found){w&&((m==null?void 0:m.type)==="block-map"&&!E.hasNewline&&i(l,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),t.options.strict&&p.start<E.found.offset-1024&&i(O.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const C=m?s(t,m,E,i):e(t,l,h,null,E,i);t.schema.compat&&rn(n.indent,m,i),l=C.range[2];const x=new ye(O,C);t.options.keepSourceTokens&&(x.srcToken=_),o.items.push(x)}else{w&&i(O.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),E.comment&&(O.comment?O.comment+=`
`+E.comment:O.comment=E.comment);const C=new ye(O);t.options.keepSourceTokens&&(C.srcToken=_),o.items.push(C)}}return f&&f<l&&i(f,"IMPOSSIBLE","Map comment with trailing content"),o.range=[n.offset,l,f!=null?f:l],o}function si({composeNode:s,composeEmptyNode:e},t,n,i,r){var b;const a=(b=r==null?void 0:r.nodeClass)!=null?b:Re,o=new a(t.schema);t.atRoot&&(t.atRoot=!1);let l=n.offset,f=null;for(const{start:g,value:_}of n.items){const u=He(g,{indicator:"seq-item-ind",next:_,offset:l,onError:i,startOnNewline:!0});if(!u.found)if(u.anchor||u.tag||_)_&&_.type==="block-seq"?i(u.end,"BAD_INDENT","All sequence items must start at the same column"):i(l,"MISSING_CHAR","Sequence item without - indicator");else{f=u.end,u.comment&&(o.comment=u.comment);continue}const y=_?s(t,_,u,i):e(t,u.end,g,null,u,i);t.schema.compat&&rn(n.indent,_,i),l=y.range[2],o.items.push(y)}return o.range=[n.offset,l,f!=null?f:l],o}function ot(s,e,t,n){let i="";if(s){let r=!1,a="";for(const o of s){const{source:l,type:f}=o;switch(f){case"space":r=!0;break;case"comment":{t&&!r&&n(o,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const b=l.substring(1)||" ";i?i+=a+b:i=b,a="";break}case"newline":i&&(a+=l),r=!0;break;default:n(o,"UNEXPECTED_TOKEN",`Unexpected ${f} at node end`)}e+=l.length}}return{comment:i,offset:e}}const an="Block collections are not allowed within flow collections",on=s=>s&&(s.type==="block-map"||s.type==="block-seq");function ii({composeNode:s,composeEmptyNode:e},t,n,i,r){var m,p;const a=n.start.source==="{",o=a?"flow map":"flow sequence",l=(m=r==null?void 0:r.nodeClass)!=null?m:a?we:Re,f=new l(t.schema);f.flow=!0;const b=t.atRoot;b&&(t.atRoot=!1);let g=n.offset+n.start.source.length;for(let w=0;w<n.items.length;++w){const S=n.items[w],{start:O,key:E,sep:C,value:x}=S,D=He(O,{flow:o,indicator:"explicit-key-ind",next:E!=null?E:C==null?void 0:C[0],offset:g,onError:i,startOnNewline:!1});if(!D.found){if(!D.anchor&&!D.tag&&!C&&!x){w===0&&D.comma?i(D.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${o}`):w<n.items.length-1&&i(D.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${o}`),D.comment&&(f.comment?f.comment+=`
`+D.comment:f.comment=D.comment),g=D.end;continue}!a&&t.options.strict&&at(E)&&i(E,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(w===0)D.comma&&i(D.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${o}`);else if(D.comma||i(D.start,"MISSING_CHAR",`Missing , between ${o} items`),D.comment){let T="";e:for(const $ of O)switch($.type){case"comma":case"space":break;case"comment":T=$.source.substring(1);break e;default:break e}if(T){let $=f.items[f.items.length-1];oe($)&&($=(p=$.value)!=null?p:$.key),$.comment?$.comment+=`
`+T:$.comment=T,D.comment=D.comment.substring(T.length+1)}}if(!a&&!C&&!D.found){const T=x?s(t,x,D,i):e(t,D.end,C,null,D,i);f.items.push(T),g=T.range[2],on(x)&&i(T.range,"BLOCK_IN_FLOW",an)}else{const T=D.end,$=E?s(t,E,D,i):e(t,T,O,null,D,i);on(E)&&i($.range,"BLOCK_IN_FLOW",an);const G=He(C!=null?C:[],{flow:o,indicator:"map-value-ind",next:x,offset:$.range[2],onError:i,startOnNewline:!1});if(G.found){if(!a&&!D.found&&t.options.strict){if(C)for(const d of C){if(d===G.found)break;if(d.type==="newline"){i(d,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}D.start<G.found.offset-1024&&i(G.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else x&&("source"in x&&x.source&&x.source[0]===":"?i(x,"MISSING_CHAR",`Missing space after : in ${o}`):i(G.start,"MISSING_CHAR",`Missing , or : between ${o} items`));const A=x?s(t,x,G,i):G.found?e(t,G.end,C,null,G,i):null;A?on(x)&&i(A.range,"BLOCK_IN_FLOW",an):G.comment&&($.comment?$.comment+=`
`+G.comment:$.comment=G.comment);const P=new ye($,A);if(t.options.keepSourceTokens&&(P.srcToken=S),a){const d=f;Vn(t,d.items,$)&&i(T,"DUPLICATE_KEY","Map keys must be unique"),d.items.push(P)}else{const d=new we(t.schema);d.flow=!0,d.items.push(P),f.items.push(d)}g=A?A.range[2]:G.end}}const _=a?"}":"]",[u,...y]=n.end;let h=g;if(u&&u.source===_)h=u.offset+u.source.length;else{const w=o[0].toUpperCase()+o.substring(1),S=b?`${w} must end with a ${_}`:`${w} in block collection must be sufficiently indented and end with a ${_}`;i(g,b?"MISSING_CHAR":"BAD_INDENT",S),u&&u.source.length!==1&&y.unshift(u)}if(y.length>0){const w=ot(y,h,t.options.strict,i);w.comment&&(f.comment?f.comment+=`
`+w.comment:f.comment=w.comment),f.range=[n.offset,h,w.offset]}else f.range=[n.offset,h,h];return f}function ln(s,e,t,n,i,r){const a=t.type==="block-map"?ni(s,e,t,n,r):t.type==="block-seq"?si(s,e,t,n,r):ii(s,e,t,n,r),o=a.constructor;return i==="!"||i===o.tagName?(a.tag=o.tagName,a):(i&&(a.tag=i),a)}function ri(s,e,t,n,i){var g,_;const r=n?e.directives.tagName(n.source,u=>i(n,"TAG_RESOLVE_FAILED",u)):null,a=t.type==="block-map"?"map":t.type==="block-seq"?"seq":t.start.source==="{"?"map":"seq";if(!n||!r||r==="!"||r===we.tagName&&a==="map"||r===Re.tagName&&a==="seq"||!a)return ln(s,e,t,i,r);let o=e.schema.tags.find(u=>u.tag===r&&u.collection===a);if(!o){const u=e.schema.knownTags[r];if(u&&u.collection===a)e.schema.tags.push(Object.assign({},u,{default:!1})),o=u;else return u!=null&&u.collection?i(n,"BAD_COLLECTION_TYPE",`${u.tag} used for ${a} collection, but expects ${u.collection}`,!0):i(n,"TAG_RESOLVE_FAILED",`Unresolved tag: ${r}`,!0),ln(s,e,t,i,r)}const l=ln(s,e,t,i,r,o),f=(_=(g=o.resolve)==null?void 0:g.call(o,l,u=>i(n,"TAG_RESOLVE_FAILED",u),e.options))!=null?_:l,b=fe(f)?f:new ee(f);return b.range=l.range,b.tag=r,o!=null&&o.format&&(b.format=o.format),b}function ai(s,e,t){const n=s.offset,i=oi(s,e,t);if(!i)return{value:"",type:null,comment:"",range:[n,n,n]};const r=i.mode===">"?ee.BLOCK_FOLDED:ee.BLOCK_LITERAL,a=s.source?li(s.source):[];let o=a.length;for(let h=a.length-1;h>=0;--h){const m=a[h][1];if(m===""||m==="\r")o=h;else break}if(o===0){const h=i.chomp==="+"&&a.length>0?`
`.repeat(Math.max(1,a.length-1)):"";let m=n+i.length;return s.source&&(m+=s.source.length),{value:h,type:r,comment:i.comment,range:[n,m,m]}}let l=s.indent+i.indent,f=s.offset+i.length,b=0;for(let h=0;h<o;++h){const[m,p]=a[h];if(p===""||p==="\r")i.indent===0&&m.length>l&&(l=m.length);else{if(m.length<l){const w="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";t(f+m.length,"MISSING_CHAR",w)}i.indent===0&&(l=m.length),b=h;break}f+=m.length+p.length+1}for(let h=a.length-1;h>=o;--h)a[h][0].length>l&&(o=h+1);let g="",_="",u=!1;for(let h=0;h<b;++h)g+=a[h][0].slice(l)+`
`;for(let h=b;h<o;++h){let[m,p]=a[h];f+=m.length+p.length+1;const w=p[p.length-1]==="\r";if(w&&(p=p.slice(0,-1)),p&&m.length<l){const O=`Block scalar lines must not be less indented than their ${i.indent?"explicit indentation indicator":"first line"}`;t(f-p.length-(w?2:1),"BAD_INDENT",O),m=""}r===ee.BLOCK_LITERAL?(g+=_+m.slice(l)+p,_=`
`):m.length>l||p[0]==="	"?(_===" "?_=`
`:!u&&_===`
`&&(_=`

`),g+=_+m.slice(l)+p,_=`
`,u=!0):p===""?_===`
`?g+=`
`:_=`
`:(g+=_+p,_=" ",u=!1)}switch(i.chomp){case"-":break;case"+":for(let h=o;h<a.length;++h)g+=`
`+a[h][0].slice(l);g[g.length-1]!==`
`&&(g+=`
`);break;default:g+=`
`}const y=n+i.length+s.source.length;return{value:g,type:r,comment:i.comment,range:[n,y,y]}}function oi({offset:s,props:e},t,n){if(e[0].type!=="block-scalar-header")return n(e[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:i}=e[0],r=i[0];let a=0,o="",l=-1;for(let _=1;_<i.length;++_){const u=i[_];if(!o&&(u==="-"||u==="+"))o=u;else{const y=Number(u);!a&&y?a=y:l===-1&&(l=s+_)}}l!==-1&&n(l,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${i}`);let f=!1,b="",g=i.length;for(let _=1;_<e.length;++_){const u=e[_];switch(u.type){case"space":f=!0;case"newline":g+=u.source.length;break;case"comment":t&&!f&&n(u,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),g+=u.source.length,b=u.source.substring(1);break;case"error":n(u,"UNEXPECTED_TOKEN",u.message),g+=u.source.length;break;default:{const y=`Unexpected token in block scalar header: ${u.type}`;n(u,"UNEXPECTED_TOKEN",y);const h=u.source;h&&typeof h=="string"&&(g+=h.length)}}}return{mode:r,indent:a,chomp:o,comment:b,length:g}}function li(s){const e=s.split(/\n( *)/),t=e[0],n=t.match(/^( *)/),r=[n!=null&&n[1]?[n[1],t.slice(n[1].length)]:["",t]];for(let a=1;a<e.length;a+=2)r.push([e[a],e[a+1]]);return r}function ci(s,e,t){const{offset:n,type:i,source:r,end:a}=s;let o,l;const f=(_,u,y)=>t(n+_,u,y);switch(i){case"scalar":o=ee.PLAIN,l=ui(r,f);break;case"single-quoted-scalar":o=ee.QUOTE_SINGLE,l=hi(r,f);break;case"double-quoted-scalar":o=ee.QUOTE_DOUBLE,l=fi(r,f);break;default:return t(s,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${i}`),{value:"",type:null,comment:"",range:[n,n+r.length,n+r.length]}}const b=n+r.length,g=ot(a,b,e,t);return{value:l,type:o,comment:g.comment,range:[n,b,g.offset]}}function ui(s,e){let t="";switch(s[0]){case"	":t="a tab character";break;case",":t="flow indicator character ,";break;case"%":t="directive indicator character %";break;case"|":case">":{t=`block scalar indicator ${s[0]}`;break}case"@":case"`":{t=`reserved character ${s[0]}`;break}}return t&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${t}`),Yn(s)}function hi(s,e){return(s[s.length-1]!=="'"||s.length===1)&&e(s.length,"MISSING_CHAR","Missing closing 'quote"),Yn(s.slice(1,-1)).replace(/''/g,"'")}function Yn(s){var l;let e,t;try{e=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),t=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{e=/(.*?)[ \t]*\r?\n/sy,t=/[ \t]*(.*?)[ \t]*\r?\n/sy}let n=e.exec(s);if(!n)return s;let i=n[1],r=" ",a=e.lastIndex;for(t.lastIndex=a;n=t.exec(s);)n[1]===""?r===`
`?i+=r:r=`
`:(i+=r+n[1],r=" "),a=t.lastIndex;const o=/[ \t]*(.*)/sy;return o.lastIndex=a,n=o.exec(s),i+r+((l=n==null?void 0:n[1])!=null?l:"")}function fi(s,e){let t="";for(let n=1;n<s.length-1;++n){const i=s[n];if(!(i==="\r"&&s[n+1]===`
`))if(i===`
`){const{fold:r,offset:a}=di(s,n);t+=r,n=a}else if(i==="\\"){let r=s[++n];const a=pi[r];if(a)t+=a;else if(r===`
`)for(r=s[n+1];r===" "||r==="	";)r=s[++n+1];else if(r==="\r"&&s[n+1]===`
`)for(r=s[++n+1];r===" "||r==="	";)r=s[++n+1];else if(r==="x"||r==="u"||r==="U"){const o={x:2,u:4,U:8}[r];t+=mi(s,n+1,o,e),n+=o}else{const o=s.substr(n-1,2);e(n-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${o}`),t+=o}}else if(i===" "||i==="	"){const r=n;let a=s[n+1];for(;a===" "||a==="	";)a=s[++n+1];a!==`
`&&!(a==="\r"&&s[n+2]===`
`)&&(t+=n>r?s.slice(r,n+1):i)}else t+=i}return(s[s.length-1]!=='"'||s.length===1)&&e(s.length,"MISSING_CHAR",'Missing closing "quote'),t}function di(s,e){let t="",n=s[e+1];for(;(n===" "||n==="	"||n===`
`||n==="\r")&&!(n==="\r"&&s[e+2]!==`
`);)n===`
`&&(t+=`
`),e+=1,n=s[e+1];return t||(t=" "),{fold:t,offset:e}}const pi={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"\x85",_:"\xA0",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function mi(s,e,t,n){const i=s.substr(e,t),a=i.length===t&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;if(isNaN(a)){const o=s.substr(e-2,t+2);return n(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${o}`),o}return String.fromCodePoint(a)}function Jn(s,e,t,n){const{value:i,type:r,comment:a,range:o}=e.type==="block-scalar"?ai(e,s.options.strict,n):ci(e,s.options.strict,n),l=t?s.directives.tagName(t.source,g=>n(t,"TAG_RESOLVE_FAILED",g)):null,f=t&&l?gi(s.schema,i,l,t,n):e.type==="scalar"?yi(s,i,e,n):s.schema[Ne];let b;try{const g=f.resolve(i,_=>n(t!=null?t:e,"TAG_RESOLVE_FAILED",_),s.options);b=ae(g)?g:new ee(g)}catch(g){const _=g instanceof Error?g.message:String(g);n(t!=null?t:e,"TAG_RESOLVE_FAILED",_),b=new ee(i)}return b.range=o,b.source=i,r&&(b.type=r),l&&(b.tag=l),f.format&&(b.format=f.format),a&&(b.comment=a),b}function gi(s,e,t,n,i){var o;if(t==="!")return s[Ne];const r=[];for(const l of s.tags)if(!l.collection&&l.tag===t)if(l.default&&l.test)r.push(l);else return l;for(const l of r)if((o=l.test)!=null&&o.test(e))return l;const a=s.knownTags[t];return a&&!a.collection?(s.tags.push(Object.assign({},a,{default:!1,test:void 0})),a):(i(n,"TAG_RESOLVE_FAILED",`Unresolved tag: ${t}`,t!=="tag:yaml.org,2002:str"),s[Ne])}function yi({directives:s,schema:e},t,n,i){var a;const r=e.tags.find(o=>{var l;return o.default&&((l=o.test)==null?void 0:l.test(t))})||e[Ne];if(e.compat){const o=(a=e.compat.find(l=>{var f;return l.default&&((f=l.test)==null?void 0:f.test(t))}))!=null?a:e[Ne];if(r.tag!==o.tag){const l=s.tagString(r.tag),f=s.tagString(o.tag),b=`Value may be parsed as either ${l} or ${f}`;i(n,"TAG_RESOLVE_FAILED",b,!0)}}return r}function _i(s,e,t){if(e){t===null&&(t=e.length);for(let n=t-1;n>=0;--n){let i=e[n];switch(i.type){case"space":case"comment":case"newline":s-=i.source.length;continue}for(i=e[++n];(i==null?void 0:i.type)==="space";)s+=i.source.length,i=e[++n];break}}return s}const bi={composeNode:Xn,composeEmptyNode:cn};function Xn(s,e,t,n){const{spaceBefore:i,comment:r,anchor:a,tag:o}=t;let l,f=!0;switch(e.type){case"alias":l=wi(s,e,n),(a||o)&&n(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":l=Jn(s,e,o,n),a&&(l.anchor=a.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":l=ri(bi,s,e,o,n),a&&(l.anchor=a.source.substring(1));break;default:{const b=e.type==="error"?e.message:`Unsupported token (type: ${e.type})`;n(e,"UNEXPECTED_TOKEN",b),l=cn(s,e.offset,void 0,null,t,n),f=!1}}return a&&l.anchor===""&&n(a,"BAD_ALIAS","Anchor cannot be an empty string"),i&&(l.spaceBefore=!0),r&&(e.type==="scalar"&&e.source===""?l.comment=r:l.commentBefore=r),s.options.keepSourceTokens&&f&&(l.srcToken=e),l}function cn(s,e,t,n,{spaceBefore:i,comment:r,anchor:a,tag:o,end:l},f){const b={type:"scalar",offset:_i(e,t,n),indent:-1,source:""},g=Jn(s,b,o,f);return a&&(g.anchor=a.source.substring(1),g.anchor===""&&f(a,"BAD_ALIAS","Anchor cannot be an empty string")),i&&(g.spaceBefore=!0),r&&(g.comment=r,g.range[2]=l),g}function wi({options:s},{offset:e,source:t,end:n},i){const r=new jt(t.substring(1));r.source===""&&i(e,"BAD_ALIAS","Alias cannot be an empty string"),r.source.endsWith(":")&&i(e+t.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const a=e+t.length,o=ot(n,a,s.strict,i);return r.range=[e,a,o.offset],o.comment&&(r.comment=o.comment),r}function vi(s,e,{offset:t,start:n,value:i,end:r},a){const o=Object.assign({_directives:e},s),l=new Tt(void 0,o),f={atRoot:!0,directives:l.directives,options:l.options,schema:l.schema},b=He(n,{indicator:"doc-start",next:i!=null?i:r==null?void 0:r[0],offset:t,onError:a,startOnNewline:!0});b.found&&(l.directives.docStart=!0,i&&(i.type==="block-map"||i.type==="block-seq")&&!b.hasNewline&&a(b.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),l.contents=i?Xn(f,i,b,a):cn(f,b.end,n,null,b,a);const g=l.contents.range[2],_=ot(r,g,!1,a);return _.comment&&(l.comment=_.comment),l.range=[t,g,_.offset],l}function lt(s){if(typeof s=="number")return[s,s+1];if(Array.isArray(s))return s.length===2?s:[s[0],s[1]];const{offset:e,source:t}=s;return[e,e+(typeof t=="string"?t.length:1)]}function Qn(s){var i;let e="",t=!1,n=!1;for(let r=0;r<s.length;++r){const a=s[r];switch(a[0]){case"#":e+=(e===""?"":n?`

`:`
`)+(a.substring(1)||" "),t=!0,n=!1;break;case"%":((i=s[r+1])==null?void 0:i[0])!=="#"&&(r+=1),t=!1;break;default:t||(n=!0),t=!1}}return{comment:e,afterEmptyLine:n}}class ki{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(t,n,i,r)=>{const a=lt(t);r?this.warnings.push(new ti(a,n,i)):this.errors.push(new rt(a,n,i))},this.directives=new ge({version:e.version||"1.2"}),this.options=e}decorate(e,t){const{comment:n,afterEmptyLine:i}=Qn(this.prelude);if(n){const r=e.contents;if(t)e.comment=e.comment?`${e.comment}
${n}`:n;else if(i||e.directives.docStart||!r)e.commentBefore=n;else if(le(r)&&!r.flow&&r.items.length>0){let a=r.items[0];oe(a)&&(a=a.key);const o=a.commentBefore;a.commentBefore=o?`${n}
${o}`:n}else{const a=r.commentBefore;r.commentBefore=a?`${n}
${a}`:n}}t?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:Qn(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,t=!1,n=-1){for(const i of e)yield*this.next(i);yield*this.end(t,n)}*next(e){switch(e.type){case"directive":this.directives.add(e.source,(t,n,i)=>{const r=lt(e);r[0]+=t,this.onError(r,"BAD_DIRECTIVE",n,i)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{const t=vi(this.options,this.directives,e,this.onError);this.atDirectives&&!t.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(t,!1),this.doc&&(yield this.doc),this.doc=t,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{const t=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,n=new rt(lt(e),"UNEXPECTED_TOKEN",t);this.atDirectives||!this.doc?this.errors.push(n):this.doc.errors.push(n);break}case"doc-end":{if(!this.doc){const n="Unexpected doc-end without preceding document";this.errors.push(new rt(lt(e),"UNEXPECTED_TOKEN",n));break}this.doc.directives.docEnd=!0;const t=ot(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),t.comment){const n=this.doc.comment;this.doc.comment=n?`${n}
${t.comment}`:t.comment}this.doc.range[2]=t.offset;break}default:this.errors.push(new rt(lt(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,t=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){const n=Object.assign({_directives:this.directives},this.options),i=new Tt(void 0,n);this.atDirectives&&this.onError(t,"MISSING_CHAR","Missing directives-end indicator line"),i.range=[0,t,t],this.decorate(i,!1),yield i}}}const es="\uFEFF",ts="",ns="",un="";function Si(s){switch(s){case es:return"byte-order-mark";case ts:return"doc-mode";case ns:return"flow-error-end";case un:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(s[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}function ve(s){switch(s){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}const ss="0123456789ABCDEFabcdef".split(""),Ai="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()".split(""),hn=",[]{}".split(""),Ei=` ,[]{}
\r	`.split(""),fn=s=>!s||Ei.includes(s);class Oi{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,t=!1){var i;e&&(this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null),this.atEnd=!t;let n=(i=this.next)!=null?i:"stream";for(;n&&(t||this.hasChars(1));)n=yield*this.parseNext(n)}atLineEnd(){let e=this.pos,t=this.buffer[e];for(;t===" "||t==="	";)t=this.buffer[++e];return!t||t==="#"||t===`
`?!0:t==="\r"?this.buffer[e+1]===`
`:!1}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let t=this.buffer[e];if(this.indentNext>0){let n=0;for(;t===" ";)t=this.buffer[++n+e];if(t==="\r"){const i=this.buffer[n+e+1];if(i===`
`||!i&&!this.atEnd)return e+n+1}return t===`
`||n>=this.indentNext||!t&&!this.atEnd?e+n:-1}if(t==="-"||t==="."){const n=this.buffer.substr(e,3);if((n==="---"||n==="...")&&ve(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return(typeof e!="number"||e!==-1&&e<this.pos)&&(e=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=e),e===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[e-1]==="\r"&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===es&&(yield*this.pushCount(1),e=e.substring(1)),e[0]==="%"){let t=e.length;const n=e.indexOf("#");if(n!==-1){const r=e[n-1];(r===" "||r==="	")&&(t=n-1)}for(;;){const r=e[t-1];if(r===" "||r==="	")t-=1;else break}const i=(yield*this.pushCount(t))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-i),this.pushNewline(),"stream"}if(this.atLineEnd()){const t=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-t),yield*this.pushNewline(),"stream"}return yield ts,yield*this.parseLineStart()}*parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const t=this.peek(3);if(t==="---"&&ve(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"doc";if(t==="..."&&ve(this.charAt(3)))return yield*this.pushCount(3),"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!ve(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[e,t]=this.peek(2);if(!t&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&ve(t)){const n=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=n,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const e=this.getLine();if(e===null)return this.setNext("doc");let t=yield*this.pushIndicators();switch(e[t]){case"#":yield*this.pushCount(e.length-t);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(fn),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return t+=yield*this.parseBlockScalarHeader(),t+=yield*this.pushSpaces(!0),yield*this.pushCount(e.length-t),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,t,n=-1;do e=yield*this.pushNewline(),e>0?(t=yield*this.pushSpaces(!1),this.indentValue=n=t):t=0,t+=yield*this.pushSpaces(!0);while(e+t>0);const i=this.getLine();if(i===null)return this.setNext("flow");if((n!==-1&&n<this.indentNext&&i[0]!=="#"||n===0&&(i.startsWith("---")||i.startsWith("..."))&&ve(i[3]))&&!(n===this.indentNext-1&&this.flowLevel===1&&(i[0]==="]"||i[0]==="}")))return this.flowLevel=0,yield ns,yield*this.parseLineStart();let r=0;for(;i[r]===",";)r+=yield*this.pushCount(1),r+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(r+=yield*this.pushIndicators(),i[r]){case void 0:return"flow";case"#":return yield*this.pushCount(i.length-r),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(fn),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const a=this.charAt(1);if(this.flowKey||ve(a)||a===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const e=this.charAt(0);let t=this.buffer.indexOf(e,this.pos+1);if(e==="'")for(;t!==-1&&this.buffer[t+1]==="'";)t=this.buffer.indexOf("'",t+2);else for(;t!==-1;){let r=0;for(;this.buffer[t-1-r]==="\\";)r+=1;if(r%2===0)break;t=this.buffer.indexOf('"',t+1)}const n=this.buffer.substring(0,t);let i=n.indexOf(`
`,this.pos);if(i!==-1){for(;i!==-1;){const r=this.continueScalar(i+1);if(r===-1)break;i=n.indexOf(`
`,r)}i!==-1&&(t=i-(n[i-1]==="\r"?2:1))}if(t===-1){if(!this.atEnd)return this.setNext("quoted-scalar");t=this.buffer.length}return yield*this.pushToIndex(t+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){const t=this.buffer[++e];if(t==="+")this.blockScalarKeep=!0;else if(t>"0"&&t<="9")this.blockScalarIndent=Number(t)-1;else if(t!=="-")break}return yield*this.pushUntil(t=>ve(t)||t==="#")}*parseBlockScalar(){let e=this.pos-1,t=0,n;e:for(let i=this.pos;n=this.buffer[i];++i)switch(n){case" ":t+=1;break;case`
`:e=i,t=0;break;case"\r":{const r=this.buffer[i+1];if(!r&&!this.atEnd)return this.setNext("block-scalar");if(r===`
`)break}default:break e}if(!n&&!this.atEnd)return this.setNext("block-scalar");if(t>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=t:this.indentNext+=this.blockScalarIndent;do{const i=this.continueScalar(e+1);if(i===-1)break;e=this.buffer.indexOf(`
`,i)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}if(!this.blockScalarKeep)do{let i=e-1,r=this.buffer[i];r==="\r"&&(r=this.buffer[--i]);const a=i;for(;r===" "||r==="	";)r=this.buffer[--i];if(r===`
`&&i>=this.pos&&i+1+t>a)e=i;else break}while(!0);return yield un,yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const e=this.flowLevel>0;let t=this.pos-1,n=this.pos-1,i;for(;i=this.buffer[++n];)if(i===":"){const r=this.buffer[n+1];if(ve(r)||e&&r===",")break;t=n}else if(ve(i)){let r=this.buffer[n+1];if(i==="\r"&&(r===`
`?(n+=1,i=`
`,r=this.buffer[n+1]):t=n),r==="#"||e&&hn.includes(r))break;if(i===`
`){const a=this.continueScalar(n+1);if(a===-1)break;n=Math.max(n,a-2)}}else{if(e&&hn.includes(i))break;t=n}return!i&&!this.atEnd?this.setNext("plain-scalar"):(yield un,yield*this.pushToIndex(t+1,!0),e?"flow":"doc")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,t){const n=this.buffer.slice(this.pos,e);return n?(yield n,this.pos+=n.length,n.length):(t&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(fn))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const e=this.flowLevel>0,t=this.charAt(1);if(ve(t)||e&&hn.includes(t))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2,t=this.buffer[e];for(;!ve(t)&&t!==">";)t=this.buffer[++e];return yield*this.pushToIndex(t===">"?e+1:e,!1)}else{let e=this.pos+1,t=this.buffer[e];for(;t;)if(Ai.includes(t))t=this.buffer[++e];else if(t==="%"&&ss.includes(this.buffer[e+1])&&ss.includes(this.buffer[e+2]))t=this.buffer[e+=3];else break;return yield*this.pushToIndex(e,!1)}}*pushNewline(){const e=this.buffer[this.pos];return e===`
`?yield*this.pushCount(1):e==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(e){let t=this.pos-1,n;do n=this.buffer[++t];while(n===" "||e&&n==="	");const i=t-this.pos;return i>0&&(yield this.buffer.substr(this.pos,i),this.pos=t),i}*pushUntil(e){let t=this.pos,n=this.buffer[t];for(;!e(n);)n=this.buffer[++t];return yield*this.pushToIndex(t,!1)}}class Ci{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let t=0,n=this.lineStarts.length;for(;t<n;){const r=t+n>>1;this.lineStarts[r]<e?t=r+1:n=r}if(this.lineStarts[t]===e)return{line:t+1,col:1};if(t===0)return{line:0,col:e};const i=this.lineStarts[t-1];return{line:t,col:e-i+1}}}}function Ae(s,e){for(let t=0;t<s.length;++t)if(s[t].type===e)return!0;return!1}function is(s){for(let e=0;e<s.length;++e)switch(s[e].type){case"space":case"comment":case"newline":break;default:return e}return-1}function rs(s){switch(s==null?void 0:s.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function Lt(s){var e;switch(s.type){case"document":return s.start;case"block-map":{const t=s.items[s.items.length-1];return(e=t.sep)!=null?e:t.start}case"block-seq":return s.items[s.items.length-1].start;default:return[]}}function Ye(s){var t;if(s.length===0)return[];let e=s.length;e:for(;--e>=0;)switch(s[e].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;((t=s[++e])==null?void 0:t.type)==="space";);return s.splice(e,s.length)}function as(s){if(s.start.type==="flow-seq-start")for(const e of s.items)e.sep&&!e.value&&!Ae(e.start,"explicit-key-ind")&&!Ae(e.sep,"map-value-ind")&&(e.key&&(e.value=e.key),delete e.key,rs(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}class Ii{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new Oi,this.onNewLine=e}*parse(e,t=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(const n of this.lexer.lex(e,t))yield*this.next(n);t||(yield*this.end())}*next(e){if(this.source=e,this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=e.length;return}const t=Si(e);if(t)if(t==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=t,yield*this.step(),t){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&e[0]===" "&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{const n=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:n,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const e=this.peek(1);if(this.type==="doc-end"&&(!e||e.type!=="doc-end")){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){const t=e!=null?e:this.stack.pop();if(t)if(this.stack.length===0)yield t;else{const n=this.peek(1);switch(t.type==="block-scalar"?t.indent="indent"in n?n.indent:0:t.type==="flow-collection"&&n.type==="document"&&(t.indent=0),t.type==="flow-collection"&&as(t),n.type){case"document":n.value=t;break;case"block-scalar":n.props.push(t);break;case"block-map":{const i=n.items[n.items.length-1];if(i.value){n.items.push({start:[],key:t,sep:[]}),this.onKeyLine=!0;return}else if(i.sep)i.value=t;else{Object.assign(i,{key:t,sep:[]}),this.onKeyLine=!Ae(i.start,"explicit-key-ind");return}break}case"block-seq":{const i=n.items[n.items.length-1];i.value?n.items.push({start:[],value:t}):i.value=t;break}case"flow-collection":{const i=n.items[n.items.length-1];!i||i.value?n.items.push({start:[],key:t,sep:[]}):i.sep?i.value=t:Object.assign(i,{key:t,sep:[]});return}default:yield*this.pop(),yield*this.pop(t)}if((n.type==="document"||n.type==="block-map"||n.type==="block-seq")&&(t.type==="block-map"||t.type==="block-seq")){const i=t.items[t.items.length-1];i&&!i.sep&&!i.value&&i.start.length>0&&is(i.start)===-1&&(t.indent===0||i.start.every(r=>r.type!=="comment"||r.indent<t.indent))&&(n.type==="document"?n.end=i.start:n.items.push({start:i.start}),t.items.splice(-1,1))}}else{const n="Tried to pop an empty stack";yield{type:"error",offset:this.offset,source:"",message:n}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{const e={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":{is(e.start)!==-1?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}const t=this.startBlockValue(e);t?this.stack.push(t):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if(this.type==="map-value-ind"){const t=Lt(this.peek(2)),n=Ye(t);let i;e.end?(i=e.end,i.push(this.sourceToken),delete e.end):i=[this.sourceToken];const r={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:n,key:e,sep:i}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=r}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let t=this.source.indexOf(`
`)+1;for(;t!==0;)this.onNewLine(this.offset+t),t=this.source.indexOf(`
`,t)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){var n;const t=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,t.value){const i="end"in t.value?t.value.end:void 0,r=Array.isArray(i)?i[i.length-1]:void 0;(r==null?void 0:r.type)==="comment"?i==null||i.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else if(t.sep)t.sep.push(this.sourceToken);else{if(this.atIndentedComment(t.start,e.indent)){const i=e.items[e.items.length-2],r=(n=i==null?void 0:i.value)==null?void 0:n.end;if(Array.isArray(r)){Array.prototype.push.apply(r,t.start),r.push(this.sourceToken),e.items.pop();return}}t.start.push(this.sourceToken)}return}if(this.indent>=e.indent){const i=!this.onKeyLine&&this.indent===e.indent&&t.sep;let r=[];if(i&&t.sep&&!t.value){const a=[];for(let o=0;o<t.sep.length;++o){const l=t.sep[o];switch(l.type){case"newline":a.push(o);break;case"space":break;case"comment":l.indent>e.indent&&(a.length=0);break;default:a.length=0}}a.length>=2&&(r=t.sep.splice(a[1]))}switch(this.type){case"anchor":case"tag":i||t.value?(r.push(this.sourceToken),e.items.push({start:r}),this.onKeyLine=!0):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"explicit-key-ind":!t.sep&&!Ae(t.start,"explicit-key-ind")?t.start.push(this.sourceToken):i||t.value?(r.push(this.sourceToken),e.items.push({start:r})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]}),this.onKeyLine=!0;return;case"map-value-ind":if(Ae(t.start,"explicit-key-ind"))if(t.sep)if(t.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(Ae(t.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,key:null,sep:[this.sourceToken]}]});else if(rs(t.key)&&!Ae(t.sep,"newline")){const a=Ye(t.start),o=t.key,l=t.sep;l.push(this.sourceToken),delete t.key,delete t.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:a,key:o,sep:l}]})}else r.length>0?t.sep=t.sep.concat(r,this.sourceToken):t.sep.push(this.sourceToken);else if(Ae(t.start,"newline"))Object.assign(t,{key:null,sep:[this.sourceToken]});else{const a=Ye(t.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:a,key:null,sep:[this.sourceToken]}]})}else t.sep?t.value||i?e.items.push({start:r,key:null,sep:[this.sourceToken]}):Ae(t.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const a=this.flowScalar(this.type);i||t.value?(e.items.push({start:r,key:a,sep:[]}),this.onKeyLine=!0):t.sep?this.stack.push(a):(Object.assign(t,{key:a,sep:[]}),this.onKeyLine=!0);return}default:{const a=this.startBlockValue(e);if(a){i&&a.type!=="block-seq"&&Ae(t.start,"explicit-key-ind")&&e.items.push({start:r}),this.stack.push(a);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){var n;const t=e.items[e.items.length-1];switch(this.type){case"newline":if(t.value){const i="end"in t.value?t.value.end:void 0,r=Array.isArray(i)?i[i.length-1]:void 0;(r==null?void 0:r.type)==="comment"?i==null||i.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(t.start,e.indent)){const i=e.items[e.items.length-2],r=(n=i==null?void 0:i.value)==null?void 0:n.end;if(Array.isArray(r)){Array.prototype.push.apply(r,t.start),r.push(this.sourceToken),e.items.pop();return}}t.start.push(this.sourceToken)}return;case"anchor":case"tag":if(t.value||this.indent<=e.indent)break;t.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;t.value||Ae(t.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken);return}if(this.indent>e.indent){const i=this.startBlockValue(e);if(i){this.stack.push(i);return}}yield*this.pop(),yield*this.step()}*flowCollection(e){const t=e.items[e.items.length-1];if(this.type==="flow-error-end"){let n;do yield*this.pop(),n=this.peek(1);while(n&&n.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!t||t.sep?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken);return;case"map-value-ind":!t||t.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!t||t.value?e.items.push({start:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const i=this.flowScalar(this.type);!t||t.value?e.items.push({start:[],key:i,sep:[]}):t.sep?this.stack.push(i):Object.assign(t,{key:i,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}const n=this.startBlockValue(e);n?this.stack.push(n):(yield*this.pop(),yield*this.step())}else{const n=this.peek(2);if(n.type==="block-map"&&(this.type==="map-value-ind"&&n.indent===e.indent||this.type==="newline"&&!n.items[n.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&n.type!=="flow-collection"){const i=Lt(n),r=Ye(i);as(e);const a=e.end.splice(1,e.end.length);a.push(this.sourceToken);const o={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:r,key:e,sep:a}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=o}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let t=this.source.indexOf(`
`)+1;for(;t!==0;)this.onNewLine(this.offset+t),t=this.source.indexOf(`
`,t)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const t=Lt(e),n=Ye(t);return n.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n}]}}case"map-value-ind":{this.onKeyLine=!0;const t=Lt(e),n=Ye(t);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,t){return this.type!=="comment"||this.indent<=t?!1:e.every(n=>n.type==="newline"||n.type==="space")}*documentEnd(e){this.type!=="doc-mode"&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}}function Ni(s){const e=s.prettyErrors!==!1;return{lineCounter:s.lineCounter||e&&new Ci||null,prettyErrors:e}}function Ti(s,e={}){const{lineCounter:t,prettyErrors:n}=Ni(e),i=new Ii(t==null?void 0:t.addNewLine),r=new ki(e);let a=null;for(const o of r.compose(i.parse(s),!0,s.length))if(!a)a=o;else if(a.options.logLevel!=="silent"){a.errors.push(new rt(o.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return n&&t&&(a.errors.forEach(Gn(s,t)),a.warnings.forEach(Gn(s,t))),a}function Li(s,e,t){let n;typeof e=="function"?n=e:t===void 0&&e&&typeof e=="object"&&(t=e);const i=Ti(s,t);if(!i)return null;if(i.warnings.forEach(r=>Sn(i.options.logLevel,r)),i.errors.length>0){if(i.options.logLevel!=="silent")throw i.errors[0];i.errors=[]}return i.toJS(Object.assign({reviver:n},t))}const xi="header.yml";class Bi{constructor(e){this._server=e}href(e){return this._server.href(e)}get(e){return this._server.get(e)}ready(e){this._server.ready(e)}close(e){this._server.close(e)}gameHeader(){return this._server.get(xi).then(e=>Li(e))}}const zi="0.1.0-alpha.22",Pi=1e3,xt=.01;function Di(s,e){if(e.endsWith(".zip"))return s.zipServer(e);if(e.endsWith(".yaml")||e.endsWith(".yml")){const t=e.lastIndexOf("/");e=t<0?"":e.substring(0,t)}return s.fileServer(e)}var pe;(function(s){s[s.Idle=0]="Idle",s[s.Loading=1]="Loading",s[s.BecomePlaying=2]="BecomePlaying",s[s.Playing=3]="Playing",s[s.Pause=4]="Pause"})(pe||(pe={}));class Ri{constructor(e){this._player=e}get root(){return this._player.root}get gameServer(){return this._player.gameServer}get width(){return this._player.width}set width(e){this.resize({width:e})}get height(){return this._player.height}set height(e){this.resize({height:e})}get resizable(){return this._player.resizable}set resizable(e){this._player.resizable=e}get speed(){return this._player.speed}set speed(e){this._player.speed=e}get url(){return this._player.url}set url(e){this._player.url=e}get header(){return this._player.header}set header(e){this._player.header=e}get autoPlay(){return!1}set autoPlay(e){}resize(e,t){!this.resizable||(typeof e=="object"?this._player.resize(e):this._player.resize(e,t))}ready(){this._player.ready()}saveState(){return this._player.saveState()}loadState(e){this._player.loadState(e)}getController(e){return this._player.getController(e)}tick(e){this._player.tick(e)}}class Fi{get isLoading(){return this._state==pe.Loading}get isPlaying(){return this._state==pe.Playing}get isPaused(){return this._state==pe.Pause}constructor(e,t,n){this._state=pe.Idle,this._ui={},this._exports={},this._speed=1,this._physicsAccumulator=0,this._proxy=new Ri(this),this._config=e,this._options=n,this._controllerBus=new ms({player:this,inputController:e.inputController}),this._tickFromGame=this._tickFromGame.bind(this),this._options.onReady!==void 0&&(this._readyCallback=this._options.onReady),$i(t)&&(this._ui.element=t,this._options=Object.assign({},n),this._options.url===void 0&&t.dataset.url!==void 0&&(this._options.url=t.dataset.url),this._attach(),this.autoPlay&&this.play())}_attach(){if(this._ui.element!==void 0){{let e=document.createElement("div");this._ui.wrapper=e,e.addEventListener("mouseenter",()=>this._onMouseEnter()),e.addEventListener("mousemove",()=>this._onMouseMove()),e.addEventListener("mouseleave",()=>this._onMouseLeave()),e.style.position="relative",e.style.backgroundSize="cover",this._options.splashart!==void 0&&(e.style.backgroundImage=`url('${this._options.splashart}')`),this._ui.element.appendChild(e)}{let e=document.createElement("div");this._ui.base=e,e.style.width="100%",e.style.height="100%",e.style.position="absolute",e.style.left="0",e.style.top="0",this._ui.wrapper.appendChild(e)}this.resize({width:this._options.width,height:this._options.height}),this._ui.overlay=new ws(this._ui.wrapper),this._ui.overlay.onPlay=()=>this.play(),this._ui.overlay.onSpeed=e=>this.speed=e,this._resizeListener=()=>this._onResize(),window.addEventListener("resize",this._resizeListener)}}_initGame(){return new Promise((e,t)=>this._ui.element===void 0?t("element is not an HTMLElement"):(console.log("start game server..."),this._startGameServer().then(()=>(console.log("game server started"),this._loadHeader().then(()=>this._loadGame().then(e))))))}_startGameServer(){return new Promise(e=>{if(this._options.url===void 0)return e();const t=Di(this._config,this._options.url);this._gameServer=new Bi(t),this._gameServer.ready(e)})}_loadHeader(){return console.log("load header..."),new Promise((e,t)=>this._options.header!==void 0?e(this._options.header):this._gameServer===void 0?t("failed to get header"):this._gameServer.gameHeader().then(e)).then(e=>{console.log("header loaded"),console.log(e),this._options.header=e,this._proxy.resize({width:e.width,height:e.height})})}_getBootFunction(e){let t={},n={exports:{boot:void 0}};const i=new Function("exports","module","define",e)(t,n,void 0);if(t.boot!==void 0){this._exports.boot=t.boot;return}if(n.exports.boot!==void 0){this._exports.boot=n.exports.boot;return}if(i==="object"&&i.boot!==void 0){this._exports.boot=i.boot;return}}_loadBoot(){var e;console.log("load boot...");const t=this.header.boot;if(t!==void 0){if(!t.endsWith(".js"))return new Promise((n,i)=>{const r=window[t];return r===void 0||r.boot===void 0?i("invalid boot module"):(this._exports.boot=r.boot,n())});if(t.startsWith("http"))return fetch((e=this.header)===null||e===void 0?void 0:e.boot).then(n=>{if(!n.ok)throw new Error(n.statusText);return n.text()}).then(n=>(this._getBootFunction(n),Promise.resolve()));if(this._gameServer!==void 0)return this._gameServer.get(t).then(n=>(this._getBootFunction(n),Promise.resolve()))}return new Promise((n,i)=>i("failed to load boot"))}_loadGame(){return new Promise((e,t)=>{this._loadBoot().then(()=>this._exports.boot===void 0?t("missing boot"):(console.log("boot loaded"),this._game=this._exports.boot(this._proxy),this._game.ticker=this._tickFromGame,console.log(this._game),e()))})}_notifyReady(){this._playTask=void 0,this._readyCallback!==void 0&&this._readyCallback()}_play(e,t,n){if(e!==void 0||t!==void 0){this.stop(),this._options.url=e,this._options.header=t,(n===!0||this.autoPlay)&&this._play();return}if(this._state===pe.Pause){this._state=pe.Playing,this._ui.overlay&&this._ui.overlay.playing(),this._game!==void 0&&this._game.play();return}this._state===pe.Idle&&(this._state=pe.Loading,this._startLoadingDate=new Date,this._ui.overlay&&this._ui.overlay.loading(),this._playTask=this._initGame().catch(i=>{console.error(i),this._notifyReady()}))}_onMouseEnter(){this._ui.overlay&&this._ui.overlay.mouseEnter()}_onMouseMove(){this._ui.overlay&&this._ui.overlay.mouseMove()}_onMouseLeave(){this._ui.overlay&&this._ui.overlay.mouseLeave()}get root(){return this._ui.base}get gameServer(){return this._gameServer}resize(e,t){this._ui.wrapper!==void 0&&(typeof e!="number"&&(t=e.height,e=e.width),e!==void 0?this._ui.wrapper.style.width=`${e}px`:this._ui.wrapper.style.width="100%",t!==void 0?this._ui.wrapper.style.height=`${t}px`:this._ui.wrapper.style.height="100%",this._onResize())}_onResize(){this._game!==void 0&&this._game.resize()}get onReady(){return this._readyCallback}set onReady(e){this._readyCallback=e,this.isPlaying&&this._notifyReady()}_ready(){this._state===pe.BecomePlaying&&(this._state=pe.Playing,this._ui.overlay&&this._ui.overlay.playing(),this._game&&this._game.play(),this._notifyReady())}ready(){if(this._state!=pe.Loading)return;this._state=pe.BecomePlaying;const e=Pi-(+new Date-+this._startLoadingDate);if(e>0){setTimeout(()=>this._ready(),e);return}this._ready()}controller(e){return this._controllerBus.get(e)}get width(){return this._ui.wrapper?this._ui.wrapper.clientWidth:0}set width(e){this.resize({width:e})}get height(){return this._ui.wrapper?this._ui.wrapper.clientHeight:0}set height(e){this.resize({height:e})}get resizable(){return this._options.resizable===!0}set resizable(e){this._options.resizable=e}get speed(){return this._speed}set speed(e){this._speed=e}get url(){return this._options.url}set url(e){this.play({url:e})}get header(){return this._options.header}set header(e){this.play({header:e})}get autoPlay(){return this._options.autoPlay===!0}set autoPlay(e){this._options.autoPlay=e}get simulated(){return this._options.simulated===!0}set simulated(e){this._options.simulated=e}play(e){if(typeof e=="object"){this._play(e.url,e.header,e.autoPlay);return}if(e!==void 0){this._play(e);return}this._play()}pause(){!this.isPlaying||(this._game!==void 0&&this._game.pause(),this._ui.overlay&&this._ui.overlay.paused(),this._state=pe.Pause)}stop(){this._game!==void 0&&(this._game.stop(),this._game=void 0),this._ui.overlay&&this._ui.overlay.stopped(),this._gameServer!==void 0&&(this._gameServer.close(),this._gameServer=void 0),this._speed=1,this._state=pe.Idle}reload(){this.stop(),this.play()}remove(){this.stop(),this._resizeListener!==void 0&&window.removeEventListener("resize",this._resizeListener),this._ui.overlay&&(this._ui.overlay.remove(),this._ui.overlay=void 0),this._ui.wrapper&&(this._ui.wrapper.remove(),this._ui.wrapper=void 0)}saveState(){return{physicsAccumulator:this._physicsAccumulator,game:this._game!==void 0?this._game.saveState():{},controllers:this._controllerBus.saveState()}}loadState(e){this._physicsAccumulator=e.physicsAccumulator!==void 0?e.physicsAccumulator:0,this._game!==void 0&&this._game.loadState(e.game!==void 0?e.game:{}),this._controllerBus.loadState(e.controllers!==void 0?e.controllers:[{},{}])}_tickFromGame(e){if(this.ticker!==void 0){this.ticker(e);return}this.simulated||this.tick(e)}tick(e){if(this._game!==void 0){for(this._physicsAccumulator+=e*this.speed;this._physicsAccumulator>xt;)this._tickOneFrame(xt),this._physicsAccumulator-=xt;this._tickOneFrame(xt)}}_tickOneFrame(e){const t=this._game.getStateForAgent();this._game.tick(this._controllerBus.inputs(t),e)}getController(e){return this._controllerBus.get(e)}}function os(){return{resizable:!0,speed:1}}function $i(s){return"dataset"in s}function ls(s){return"length"in s}function Mi(s){return s!==void 0&&!ls(s)&&!("className"in s)}function cs(s,e,t){return new Fi(s,e,t)}function ji(s,e,t){let n,i=os();return Mi(e)?t=e:n=e,t!==void 0&&(i=Object.assign(Object.assign({},i),t)),n==null&&(i.element!==void 0?n=i.element:n=document.getElementsByClassName("moroboxai-player")),ls(n)?Array.prototype.map.call(n,r=>cs(s,r,i)):cs(s,n,i)}class Ui{constructor(){this._inputs={left:!1,right:!1,up:!1,down:!1},this._keyDownListener=e=>this._onKey(e,!0),this._keyUpListener=e=>this._onKey(e,!1),document.addEventListener("keydown",this._keyDownListener,!1),document.addEventListener("keyup",this._keyUpListener,!1)}_onKey(e,t){e.code==="ArrowDown"||e.code==="KeyS"?(e.code==="ArrowDown"&&e.preventDefault(),this._inputs.down=t):e.code==="ArrowUp"||e.code==="KeyW"?(e.code==="ArrowUp"&&e.preventDefault(),this._inputs.up=t):e.code==="ArrowLeft"||e.code==="KeyA"?(e.code==="ArrowLeft"&&e.preventDefault(),this._inputs.left=t):(e.code==="ArrowRight"||e.code==="KeyD")&&(e.code==="ArrowRight"&&e.preventDefault(),this._inputs.right=t)}remove(){document.removeEventListener("keydown",this._keyDownListener),document.removeEventListener("keyup",this._keyUpListener)}get inputs(){return this._inputs}}var Bt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function zt(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var us={exports:{}};/*!

    JSZip v3.10.1 - A JavaScript class for generating and reading zip files
    <http://stuartk.com/jszip>

    (c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
    Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

    JSZip uses the library pako released under the MIT license :
    https://github.com/nodeca/pako/blob/main/LICENSE
    */(function(s,e){(function(t){s.exports=t()})(function(){return function t(n,i,r){function a(f,b){if(!i[f]){if(!n[f]){var g=typeof zt=="function"&&zt;if(!b&&g)return g(f,!0);if(o)return o(f,!0);var _=new Error("Cannot find module '"+f+"'");throw _.code="MODULE_NOT_FOUND",_}var u=i[f]={exports:{}};n[f][0].call(u.exports,function(y){var h=n[f][1][y];return a(h||y)},u,u.exports,t,n,i,r)}return i[f].exports}for(var o=typeof zt=="function"&&zt,l=0;l<r.length;l++)a(r[l]);return a}({1:[function(t,n,i){var r=t("./utils"),a=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var f,b,g,_,u,y,h,m=[],p=0,w=l.length,S=w,O=r.getTypeOf(l)!=="string";p<l.length;)S=w-p,g=O?(f=l[p++],b=p<w?l[p++]:0,p<w?l[p++]:0):(f=l.charCodeAt(p++),b=p<w?l.charCodeAt(p++):0,p<w?l.charCodeAt(p++):0),_=f>>2,u=(3&f)<<4|b>>4,y=1<S?(15&b)<<2|g>>6:64,h=2<S?63&g:64,m.push(o.charAt(_)+o.charAt(u)+o.charAt(y)+o.charAt(h));return m.join("")},i.decode=function(l){var f,b,g,_,u,y,h=0,m=0,p="data:";if(l.substr(0,p.length)===p)throw new Error("Invalid base64 input, it looks like a data url.");var w,S=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===o.charAt(64)&&S--,l.charAt(l.length-2)===o.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(w=a.uint8array?new Uint8Array(0|S):new Array(0|S);h<l.length;)f=o.indexOf(l.charAt(h++))<<2|(_=o.indexOf(l.charAt(h++)))>>4,b=(15&_)<<4|(u=o.indexOf(l.charAt(h++)))>>2,g=(3&u)<<6|(y=o.indexOf(l.charAt(h++))),w[m++]=f,u!==64&&(w[m++]=b),y!==64&&(w[m++]=g);return w}},{"./support":30,"./utils":32}],2:[function(t,n,i){var r=t("./external"),a=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),l=t("./stream/DataLengthProbe");function f(b,g,_,u,y){this.compressedSize=b,this.uncompressedSize=g,this.crc32=_,this.compression=u,this.compressedContent=y}f.prototype={getContentWorker:function(){var b=new a(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),g=this;return b.on("end",function(){if(this.streamInfo.data_length!==g.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),b},getCompressedWorker:function(){return new a(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(b,g,_){return b.pipe(new o).pipe(new l("uncompressedSize")).pipe(g.compressWorker(_)).pipe(new l("compressedSize")).withStreamInfo("compression",g)},n.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,n,i){var r=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,n,i){var r=t("./utils"),a=function(){for(var o,l=[],f=0;f<256;f++){o=f;for(var b=0;b<8;b++)o=1&o?3988292384^o>>>1:o>>>1;l[f]=o}return l}();n.exports=function(o,l){return o!==void 0&&o.length?r.getTypeOf(o)!=="string"?function(f,b,g,_){var u=a,y=_+g;f^=-1;for(var h=_;h<y;h++)f=f>>>8^u[255&(f^b[h])];return-1^f}(0|l,o,o.length,0):function(f,b,g,_){var u=a,y=_+g;f^=-1;for(var h=_;h<y;h++)f=f>>>8^u[255&(f^b.charCodeAt(h))];return-1^f}(0|l,o,o.length,0):0}},{"./utils":32}],5:[function(t,n,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,n,i){var r=null;r=typeof Promise!="undefined"?Promise:t("lie"),n.exports={Promise:r}},{lie:37}],7:[function(t,n,i){var r=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined",a=t("pako"),o=t("./utils"),l=t("./stream/GenericWorker"),f=r?"uint8array":"array";function b(g,_){l.call(this,"FlateWorker/"+g),this._pako=null,this._pakoAction=g,this._pakoOptions=_,this.meta={}}i.magic="\b\0",o.inherits(b,l),b.prototype.processChunk=function(g){this.meta=g.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(f,g.data),!1)},b.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},b.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},b.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var g=this;this._pako.onData=function(_){g.push({data:_,meta:g.meta})}},i.compressWorker=function(g){return new b("Deflate",g)},i.uncompressWorker=function(){return new b("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,n,i){function r(u,y){var h,m="";for(h=0;h<y;h++)m+=String.fromCharCode(255&u),u>>>=8;return m}function a(u,y,h,m,p,w){var S,O,E=u.file,C=u.compression,x=w!==f.utf8encode,D=o.transformTo("string",w(E.name)),T=o.transformTo("string",f.utf8encode(E.name)),$=E.comment,G=o.transformTo("string",w($)),A=o.transformTo("string",f.utf8encode($)),P=T.length!==E.name.length,d=A.length!==$.length,F="",Q="",U="",te=E.dir,K=E.date,X={crc32:0,compressedSize:0,uncompressedSize:0};y&&!h||(X.crc32=u.crc32,X.compressedSize=u.compressedSize,X.uncompressedSize=u.uncompressedSize);var B=0;y&&(B|=8),x||!P&&!d||(B|=2048);var L=0,J=0;te&&(L|=16),p==="UNIX"?(J=798,L|=function(Z,ce){var me=Z;return Z||(me=ce?16893:33204),(65535&me)<<16}(E.unixPermissions,te)):(J=20,L|=function(Z){return 63&(Z||0)}(E.dosPermissions)),S=K.getUTCHours(),S<<=6,S|=K.getUTCMinutes(),S<<=5,S|=K.getUTCSeconds()/2,O=K.getUTCFullYear()-1980,O<<=4,O|=K.getUTCMonth()+1,O<<=5,O|=K.getUTCDate(),P&&(Q=r(1,1)+r(b(D),4)+T,F+="up"+r(Q.length,2)+Q),d&&(U=r(1,1)+r(b(G),4)+A,F+="uc"+r(U.length,2)+U);var V="";return V+=`
\0`,V+=r(B,2),V+=C.magic,V+=r(S,2),V+=r(O,2),V+=r(X.crc32,4),V+=r(X.compressedSize,4),V+=r(X.uncompressedSize,4),V+=r(D.length,2),V+=r(F.length,2),{fileRecord:g.LOCAL_FILE_HEADER+V+D+F,dirRecord:g.CENTRAL_FILE_HEADER+r(J,2)+V+r(G.length,2)+"\0\0\0\0"+r(L,4)+r(m,4)+D+F+G}}var o=t("../utils"),l=t("../stream/GenericWorker"),f=t("../utf8"),b=t("../crc32"),g=t("../signature");function _(u,y,h,m){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=h,this.encodeFileName=m,this.streamFiles=u,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(_,l),_.prototype.push=function(u){var y=u.meta.percent||0,h=this.entriesCount,m=this._sources.length;this.accumulate?this.contentBuffer.push(u):(this.bytesWritten+=u.data.length,l.prototype.push.call(this,{data:u.data,meta:{currentFile:this.currentFile,percent:h?(y+100*(h-m-1))/h:100}}))},_.prototype.openedSource=function(u){this.currentSourceOffset=this.bytesWritten,this.currentFile=u.file.name;var y=this.streamFiles&&!u.file.dir;if(y){var h=a(u,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:h.fileRecord,meta:{percent:0}})}else this.accumulate=!0},_.prototype.closedSource=function(u){this.accumulate=!1;var y=this.streamFiles&&!u.file.dir,h=a(u,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(h.dirRecord),y)this.push({data:function(m){return g.DATA_DESCRIPTOR+r(m.crc32,4)+r(m.compressedSize,4)+r(m.uncompressedSize,4)}(u),meta:{percent:100}});else for(this.push({data:h.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},_.prototype.flush=function(){for(var u=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var h=this.bytesWritten-u,m=function(p,w,S,O,E){var C=o.transformTo("string",E(O));return g.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(p,2)+r(p,2)+r(w,4)+r(S,4)+r(C.length,2)+C}(this.dirRecords.length,h,u,this.zipComment,this.encodeFileName);this.push({data:m,meta:{percent:100}})},_.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},_.prototype.registerPrevious=function(u){this._sources.push(u);var y=this;return u.on("data",function(h){y.processChunk(h)}),u.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),u.on("error",function(h){y.error(h)}),this},_.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},_.prototype.error=function(u){var y=this._sources;if(!l.prototype.error.call(this,u))return!1;for(var h=0;h<y.length;h++)try{y[h].error(u)}catch{}return!0},_.prototype.lock=function(){l.prototype.lock.call(this);for(var u=this._sources,y=0;y<u.length;y++)u[y].lock()},n.exports=_},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,n,i){var r=t("../compressions"),a=t("./ZipFileWorker");i.generateWorker=function(o,l,f){var b=new a(l.streamFiles,f,l.platform,l.encodeFileName),g=0;try{o.forEach(function(_,u){g++;var y=function(w,S){var O=w||S,E=r[O];if(!E)throw new Error(O+" is not a valid compression method !");return E}(u.options.compression,l.compression),h=u.options.compressionOptions||l.compressionOptions||{},m=u.dir,p=u.date;u._compressWorker(y,h).withStreamInfo("file",{name:_,dir:m,date:p,comment:u.comment||"",unixPermissions:u.unixPermissions,dosPermissions:u.dosPermissions}).pipe(b)}),b.entriesCount=g}catch(_){b.error(_)}return b}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,n,i){function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new r;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(r.prototype=t("./object")).loadAsync=t("./load"),r.support=t("./support"),r.defaults=t("./defaults"),r.version="3.10.1",r.loadAsync=function(a,o){return new r().loadAsync(a,o)},r.external=t("./external"),n.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,n,i){var r=t("./utils"),a=t("./external"),o=t("./utf8"),l=t("./zipEntries"),f=t("./stream/Crc32Probe"),b=t("./nodejsUtils");function g(_){return new a.Promise(function(u,y){var h=_.decompressed.getContentWorker().pipe(new f);h.on("error",function(m){y(m)}).on("end",function(){h.streamInfo.crc32!==_.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):u()}).resume()})}n.exports=function(_,u){var y=this;return u=r.extend(u||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),b.isNode&&b.isStream(_)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",_,!0,u.optimizedBinaryString,u.base64).then(function(h){var m=new l(u);return m.load(h),m}).then(function(h){var m=[a.Promise.resolve(h)],p=h.files;if(u.checkCRC32)for(var w=0;w<p.length;w++)m.push(g(p[w]));return a.Promise.all(m)}).then(function(h){for(var m=h.shift(),p=m.files,w=0;w<p.length;w++){var S=p[w],O=S.fileNameStr,E=r.resolve(S.fileNameStr);y.file(E,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:u.createFolders}),S.dir||(y.file(E).unsafeOriginalName=O)}return m.zipComment.length&&(y.comment=m.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,n,i){var r=t("../utils"),a=t("../stream/GenericWorker");function o(l,f){a.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(f)}r.inherits(o,a),o.prototype._bindStream=function(l){var f=this;(this._stream=l).pause(),l.on("data",function(b){f.push({data:b,meta:{percent:0}})}).on("error",function(b){f.isPaused?this.generatedError=b:f.error(b)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,n,i){var r=t("readable-stream").Readable;function a(o,l,f){r.call(this,l),this._helper=o;var b=this;o.on("data",function(g,_){b.push(g)||b._helper.pause(),f&&f(_)}).on("error",function(g){b.emit("error",g)}).on("end",function(){b.push(null)})}t("../utils").inherits(a,r),a.prototype._read=function(){this._helper.resume()},n.exports=a},{"../utils":32,"readable-stream":16}],14:[function(t,n,i){n.exports={isNode:typeof Buffer!="undefined",newBufferFrom:function(r,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(r,a);if(typeof r=="number")throw new Error('The "data" argument must not be a number');return new Buffer(r,a)},allocBuffer:function(r){if(Buffer.alloc)return Buffer.alloc(r);var a=new Buffer(r);return a.fill(0),a},isBuffer:function(r){return Buffer.isBuffer(r)},isStream:function(r){return r&&typeof r.on=="function"&&typeof r.pause=="function"&&typeof r.resume=="function"}}},{}],15:[function(t,n,i){function r(E,C,x){var D,T=o.getTypeOf(C),$=o.extend(x||{},b);$.date=$.date||new Date,$.compression!==null&&($.compression=$.compression.toUpperCase()),typeof $.unixPermissions=="string"&&($.unixPermissions=parseInt($.unixPermissions,8)),$.unixPermissions&&16384&$.unixPermissions&&($.dir=!0),$.dosPermissions&&16&$.dosPermissions&&($.dir=!0),$.dir&&(E=p(E)),$.createFolders&&(D=m(E))&&w.call(this,D,!0);var G=T==="string"&&$.binary===!1&&$.base64===!1;x&&x.binary!==void 0||($.binary=!G),(C instanceof g&&C.uncompressedSize===0||$.dir||!C||C.length===0)&&($.base64=!1,$.binary=!0,C="",$.compression="STORE",T="string");var A=null;A=C instanceof g||C instanceof l?C:y.isNode&&y.isStream(C)?new h(E,C):o.prepareContent(E,C,$.binary,$.optimizedBinaryString,$.base64);var P=new _(E,A,$);this.files[E]=P}var a=t("./utf8"),o=t("./utils"),l=t("./stream/GenericWorker"),f=t("./stream/StreamHelper"),b=t("./defaults"),g=t("./compressedObject"),_=t("./zipObject"),u=t("./generate"),y=t("./nodejsUtils"),h=t("./nodejs/NodejsStreamInputAdapter"),m=function(E){E.slice(-1)==="/"&&(E=E.substring(0,E.length-1));var C=E.lastIndexOf("/");return 0<C?E.substring(0,C):""},p=function(E){return E.slice(-1)!=="/"&&(E+="/"),E},w=function(E,C){return C=C!==void 0?C:b.createFolders,E=p(E),this.files[E]||r.call(this,E,null,{dir:!0,createFolders:C}),this.files[E]};function S(E){return Object.prototype.toString.call(E)==="[object RegExp]"}var O={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(E){var C,x,D;for(C in this.files)D=this.files[C],(x=C.slice(this.root.length,C.length))&&C.slice(0,this.root.length)===this.root&&E(x,D)},filter:function(E){var C=[];return this.forEach(function(x,D){E(x,D)&&C.push(D)}),C},file:function(E,C,x){if(arguments.length!==1)return E=this.root+E,r.call(this,E,C,x),this;if(S(E)){var D=E;return this.filter(function($,G){return!G.dir&&D.test($)})}var T=this.files[this.root+E];return T&&!T.dir?T:null},folder:function(E){if(!E)return this;if(S(E))return this.filter(function(T,$){return $.dir&&E.test(T)});var C=this.root+E,x=w.call(this,C),D=this.clone();return D.root=x.name,D},remove:function(E){E=this.root+E;var C=this.files[E];if(C||(E.slice(-1)!=="/"&&(E+="/"),C=this.files[E]),C&&!C.dir)delete this.files[E];else for(var x=this.filter(function(T,$){return $.name.slice(0,E.length)===E}),D=0;D<x.length;D++)delete this.files[x[D].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(E){var C,x={};try{if((x=o.extend(E||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=x.type.toLowerCase(),x.compression=x.compression.toUpperCase(),x.type==="binarystring"&&(x.type="string"),!x.type)throw new Error("No output type specified.");o.checkSupport(x.type),x.platform!=="darwin"&&x.platform!=="freebsd"&&x.platform!=="linux"&&x.platform!=="sunos"||(x.platform="UNIX"),x.platform==="win32"&&(x.platform="DOS");var D=x.comment||this.comment||"";C=u.generateWorker(this,x,D)}catch(T){(C=new l("error")).error(T)}return new f(C,x.type||"string",x.mimeType)},generateAsync:function(E,C){return this.generateInternalStream(E).accumulate(C)},generateNodeStream:function(E,C){return(E=E||{}).type||(E.type="nodebuffer"),this.generateInternalStream(E).toNodejsStream(C)}};n.exports=O},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,n,i){n.exports=t("stream")},{stream:void 0}],17:[function(t,n,i){var r=t("./DataReader");function a(o){r.call(this,o);for(var l=0;l<this.data.length;l++)o[l]=255&o[l]}t("../utils").inherits(a,r),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var l=o.charCodeAt(0),f=o.charCodeAt(1),b=o.charCodeAt(2),g=o.charCodeAt(3),_=this.length-4;0<=_;--_)if(this.data[_]===l&&this.data[_+1]===f&&this.data[_+2]===b&&this.data[_+3]===g)return _-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var l=o.charCodeAt(0),f=o.charCodeAt(1),b=o.charCodeAt(2),g=o.charCodeAt(3),_=this.readData(4);return l===_[0]&&f===_[1]&&b===_[2]&&g===_[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},n.exports=a},{"../utils":32,"./DataReader":18}],18:[function(t,n,i){var r=t("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l,f=0;for(this.checkOffset(o),l=this.index+o-1;l>=this.index;l--)f=(f<<8)+this.byteAt(l);return this.index+=o,f},readString:function(o){return r.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},n.exports=a},{"../utils":32}],19:[function(t,n,i){var r=t("./Uint8ArrayReader");function a(o){r.call(this,o)}t("../utils").inherits(a,r),a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},n.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,n,i){var r=t("./DataReader");function a(o){r.call(this,o)}t("../utils").inherits(a,r),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},n.exports=a},{"../utils":32,"./DataReader":18}],21:[function(t,n,i){var r=t("./ArrayReader");function a(o){r.call(this,o)}t("../utils").inherits(a,r),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},n.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(t,n,i){var r=t("../utils"),a=t("../support"),o=t("./ArrayReader"),l=t("./StringReader"),f=t("./NodeBufferReader"),b=t("./Uint8ArrayReader");n.exports=function(g){var _=r.getTypeOf(g);return r.checkSupport(_),_!=="string"||a.uint8array?_==="nodebuffer"?new f(g):a.uint8array?new b(r.transformTo("uint8array",g)):new o(r.transformTo("array",g)):new l(g)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,n,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,n,i){var r=t("./GenericWorker"),a=t("../utils");function o(l){r.call(this,"ConvertWorker to "+l),this.destType=l}a.inherits(o,r),o.prototype.processChunk=function(l){this.push({data:a.transformTo(this.destType,l.data),meta:l.meta})},n.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,n,i){var r=t("./GenericWorker"),a=t("../crc32");function o(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,r),o.prototype.processChunk=function(l){this.streamInfo.crc32=a(l.data,this.streamInfo.crc32||0),this.push(l)},n.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,n,i){var r=t("../utils"),a=t("./GenericWorker");function o(l){a.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}r.inherits(o,a),o.prototype.processChunk=function(l){if(l){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+l.data.length}a.prototype.processChunk.call(this,l)},n.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,n,i){var r=t("../utils"),a=t("./GenericWorker");function o(l){a.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(b){f.dataIsReady=!0,f.data=b,f.max=b&&b.length||0,f.type=r.getTypeOf(b),f.isPaused||f._tickAndRepeat()},function(b){f.error(b)})}r.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,f);break;case"uint8array":l=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":l=this.data.slice(this.index,f)}return this.index=f,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,n,i){function r(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var l=0;l<this._listeners[a].length;l++)this._listeners[a][l].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(l){o.processChunk(l)}),a.on("end",function(){o.end()}),a.on("error",function(l){o.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},n.exports=r},{}],29:[function(t,n,i){var r=t("../utils"),a=t("./ConvertWorker"),o=t("./GenericWorker"),l=t("../base64"),f=t("../support"),b=t("../external"),g=null;if(f.nodestream)try{g=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function _(y,h){return new b.Promise(function(m,p){var w=[],S=y._internalType,O=y._outputType,E=y._mimeType;y.on("data",function(C,x){w.push(C),h&&h(x)}).on("error",function(C){w=[],p(C)}).on("end",function(){try{var C=function(x,D,T){switch(x){case"blob":return r.newBlob(r.transformTo("arraybuffer",D),T);case"base64":return l.encode(D);default:return r.transformTo(x,D)}}(O,function(x,D){var T,$=0,G=null,A=0;for(T=0;T<D.length;T++)A+=D[T].length;switch(x){case"string":return D.join("");case"array":return Array.prototype.concat.apply([],D);case"uint8array":for(G=new Uint8Array(A),T=0;T<D.length;T++)G.set(D[T],$),$+=D[T].length;return G;case"nodebuffer":return Buffer.concat(D);default:throw new Error("concat : unsupported type '"+x+"'")}}(S,w),E);m(C)}catch(x){p(x)}w=[]}).resume()})}function u(y,h,m){var p=h;switch(h){case"blob":case"arraybuffer":p="uint8array";break;case"base64":p="string"}try{this._internalType=p,this._outputType=h,this._mimeType=m,r.checkSupport(p),this._worker=y.pipe(new a(p)),y.lock()}catch(w){this._worker=new o("error"),this._worker.error(w)}}u.prototype={accumulate:function(y){return _(this,y)},on:function(y,h){var m=this;return y==="data"?this._worker.on(y,function(p){h.call(m,p.data,p.meta)}):this._worker.on(y,function(){r.delay(h,arguments,m)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(r.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},y)}},n.exports=u},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined",i.nodebuffer=typeof Buffer!="undefined",i.uint8array=typeof Uint8Array!="undefined",typeof ArrayBuffer=="undefined")i.blob=!1;else{var r=new ArrayBuffer(0);try{i.blob=new Blob([r],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(r),i.blob=a.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(t,n,i){for(var r=t("./utils"),a=t("./support"),o=t("./nodejsUtils"),l=t("./stream/GenericWorker"),f=new Array(256),b=0;b<256;b++)f[b]=252<=b?6:248<=b?5:240<=b?4:224<=b?3:192<=b?2:1;f[254]=f[254]=1;function g(){l.call(this,"utf-8 decode"),this.leftOver=null}function _(){l.call(this,"utf-8 encode")}i.utf8encode=function(u){return a.nodebuffer?o.newBufferFrom(u,"utf-8"):function(y){var h,m,p,w,S,O=y.length,E=0;for(w=0;w<O;w++)(64512&(m=y.charCodeAt(w)))==55296&&w+1<O&&(64512&(p=y.charCodeAt(w+1)))==56320&&(m=65536+(m-55296<<10)+(p-56320),w++),E+=m<128?1:m<2048?2:m<65536?3:4;for(h=a.uint8array?new Uint8Array(E):new Array(E),w=S=0;S<E;w++)(64512&(m=y.charCodeAt(w)))==55296&&w+1<O&&(64512&(p=y.charCodeAt(w+1)))==56320&&(m=65536+(m-55296<<10)+(p-56320),w++),m<128?h[S++]=m:(m<2048?h[S++]=192|m>>>6:(m<65536?h[S++]=224|m>>>12:(h[S++]=240|m>>>18,h[S++]=128|m>>>12&63),h[S++]=128|m>>>6&63),h[S++]=128|63&m);return h}(u)},i.utf8decode=function(u){return a.nodebuffer?r.transformTo("nodebuffer",u).toString("utf-8"):function(y){var h,m,p,w,S=y.length,O=new Array(2*S);for(h=m=0;h<S;)if((p=y[h++])<128)O[m++]=p;else if(4<(w=f[p]))O[m++]=65533,h+=w-1;else{for(p&=w===2?31:w===3?15:7;1<w&&h<S;)p=p<<6|63&y[h++],w--;1<w?O[m++]=65533:p<65536?O[m++]=p:(p-=65536,O[m++]=55296|p>>10&1023,O[m++]=56320|1023&p)}return O.length!==m&&(O.subarray?O=O.subarray(0,m):O.length=m),r.applyFromCharCode(O)}(u=r.transformTo(a.uint8array?"uint8array":"array",u))},r.inherits(g,l),g.prototype.processChunk=function(u){var y=r.transformTo(a.uint8array?"uint8array":"array",u.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var h=y;(y=new Uint8Array(h.length+this.leftOver.length)).set(this.leftOver,0),y.set(h,this.leftOver.length)}else y=this.leftOver.concat(y);this.leftOver=null}var m=function(w,S){var O;for((S=S||w.length)>w.length&&(S=w.length),O=S-1;0<=O&&(192&w[O])==128;)O--;return O<0||O===0?S:O+f[w[O]]>S?O:S}(y),p=y;m!==y.length&&(a.uint8array?(p=y.subarray(0,m),this.leftOver=y.subarray(m,y.length)):(p=y.slice(0,m),this.leftOver=y.slice(m,y.length))),this.push({data:i.utf8decode(p),meta:u.meta})},g.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=g,r.inherits(_,l),_.prototype.processChunk=function(u){this.push({data:i.utf8encode(u.data),meta:u.meta})},i.Utf8EncodeWorker=_},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,n,i){var r=t("./support"),a=t("./base64"),o=t("./nodejsUtils"),l=t("./external");function f(h){return h}function b(h,m){for(var p=0;p<h.length;++p)m[p]=255&h.charCodeAt(p);return m}t("setimmediate"),i.newBlob=function(h,m){i.checkSupport("blob");try{return new Blob([h],{type:m})}catch{try{var p=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return p.append(h),p.getBlob(m)}catch{throw new Error("Bug : can't construct the Blob.")}}};var g={stringifyByChunk:function(h,m,p){var w=[],S=0,O=h.length;if(O<=p)return String.fromCharCode.apply(null,h);for(;S<O;)m==="array"||m==="nodebuffer"?w.push(String.fromCharCode.apply(null,h.slice(S,Math.min(S+p,O)))):w.push(String.fromCharCode.apply(null,h.subarray(S,Math.min(S+p,O)))),S+=p;return w.join("")},stringifyByChar:function(h){for(var m="",p=0;p<h.length;p++)m+=String.fromCharCode(h[p]);return m},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function _(h){var m=65536,p=i.getTypeOf(h),w=!0;if(p==="uint8array"?w=g.applyCanBeUsed.uint8array:p==="nodebuffer"&&(w=g.applyCanBeUsed.nodebuffer),w)for(;1<m;)try{return g.stringifyByChunk(h,p,m)}catch{m=Math.floor(m/2)}return g.stringifyByChar(h)}function u(h,m){for(var p=0;p<h.length;p++)m[p]=h[p];return m}i.applyFromCharCode=_;var y={};y.string={string:f,array:function(h){return b(h,new Array(h.length))},arraybuffer:function(h){return y.string.uint8array(h).buffer},uint8array:function(h){return b(h,new Uint8Array(h.length))},nodebuffer:function(h){return b(h,o.allocBuffer(h.length))}},y.array={string:_,array:f,arraybuffer:function(h){return new Uint8Array(h).buffer},uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return o.newBufferFrom(h)}},y.arraybuffer={string:function(h){return _(new Uint8Array(h))},array:function(h){return u(new Uint8Array(h),new Array(h.byteLength))},arraybuffer:f,uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return o.newBufferFrom(new Uint8Array(h))}},y.uint8array={string:_,array:function(h){return u(h,new Array(h.length))},arraybuffer:function(h){return h.buffer},uint8array:f,nodebuffer:function(h){return o.newBufferFrom(h)}},y.nodebuffer={string:_,array:function(h){return u(h,new Array(h.length))},arraybuffer:function(h){return y.nodebuffer.uint8array(h).buffer},uint8array:function(h){return u(h,new Uint8Array(h.length))},nodebuffer:f},i.transformTo=function(h,m){if(m=m||"",!h)return m;i.checkSupport(h);var p=i.getTypeOf(m);return y[p][h](m)},i.resolve=function(h){for(var m=h.split("/"),p=[],w=0;w<m.length;w++){var S=m[w];S==="."||S===""&&w!==0&&w!==m.length-1||(S===".."?p.pop():p.push(S))}return p.join("/")},i.getTypeOf=function(h){return typeof h=="string"?"string":Object.prototype.toString.call(h)==="[object Array]"?"array":r.nodebuffer&&o.isBuffer(h)?"nodebuffer":r.uint8array&&h instanceof Uint8Array?"uint8array":r.arraybuffer&&h instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(h){if(!r[h.toLowerCase()])throw new Error(h+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(h){var m,p,w="";for(p=0;p<(h||"").length;p++)w+="\\x"+((m=h.charCodeAt(p))<16?"0":"")+m.toString(16).toUpperCase();return w},i.delay=function(h,m,p){setImmediate(function(){h.apply(p||null,m||[])})},i.inherits=function(h,m){function p(){}p.prototype=m.prototype,h.prototype=new p},i.extend=function(){var h,m,p={};for(h=0;h<arguments.length;h++)for(m in arguments[h])Object.prototype.hasOwnProperty.call(arguments[h],m)&&p[m]===void 0&&(p[m]=arguments[h][m]);return p},i.prepareContent=function(h,m,p,w,S){return l.Promise.resolve(m).then(function(O){return r.blob&&(O instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(O))!==-1)&&typeof FileReader!="undefined"?new l.Promise(function(E,C){var x=new FileReader;x.onload=function(D){E(D.target.result)},x.onerror=function(D){C(D.target.error)},x.readAsArrayBuffer(O)}):O}).then(function(O){var E=i.getTypeOf(O);return E?(E==="arraybuffer"?O=i.transformTo("uint8array",O):E==="string"&&(S?O=a.decode(O):p&&w!==!0&&(O=function(C){return b(C,r.uint8array?new Uint8Array(C.length):new Array(C.length))}(O))),O):l.Promise.reject(new Error("Can't read the data of '"+h+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,n,i){var r=t("./reader/readerFor"),a=t("./utils"),o=t("./signature"),l=t("./zipEntry"),f=t("./support");function b(g){this.files=[],this.loadOptions=g}b.prototype={checkSignature:function(g){if(!this.reader.readAndCheckSignature(g)){this.reader.index-=4;var _=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(_)+", expected "+a.pretty(g)+")")}},isSignature:function(g,_){var u=this.reader.index;this.reader.setIndex(g);var y=this.reader.readString(4)===_;return this.reader.setIndex(u),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var g=this.reader.readData(this.zipCommentLength),_=f.uint8array?"uint8array":"array",u=a.transformTo(_,g);this.zipComment=this.loadOptions.decodeFileName(u)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var g,_,u,y=this.zip64EndOfCentralSize-44;0<y;)g=this.reader.readInt(2),_=this.reader.readInt(4),u=this.reader.readData(_),this.zip64ExtensibleData[g]={id:g,length:_,value:u}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var g,_;for(g=0;g<this.files.length;g++)_=this.files[g],this.reader.setIndex(_.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),_.readLocalPart(this.reader),_.handleUTF8(),_.processAttributes()},readCentralDir:function(){var g;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(g=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(g);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var g=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(g<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(g);var _=g;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(g=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(g),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var u=this.centralDirOffset+this.centralDirSize;this.zip64&&(u+=20,u+=12+this.zip64EndOfCentralSize);var y=_-u;if(0<y)this.isSignature(_,o.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(g){this.reader=r(g)},load:function(g){this.prepareReader(g),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=b},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,n,i){var r=t("./reader/readerFor"),a=t("./utils"),o=t("./compressedObject"),l=t("./crc32"),f=t("./utf8"),b=t("./compressions"),g=t("./support");function _(u,y){this.options=u,this.loadOptions=y}_.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(u){var y,h;if(u.skip(22),this.fileNameLength=u.readInt(2),h=u.readInt(2),this.fileName=u.readData(this.fileNameLength),u.skip(h),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((y=function(m){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p)&&b[p].magic===m)return b[p];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,y,u.readData(this.compressedSize))},readCentralPart:function(u){this.versionMadeBy=u.readInt(2),u.skip(2),this.bitFlag=u.readInt(2),this.compressionMethod=u.readString(2),this.date=u.readDate(),this.crc32=u.readInt(4),this.compressedSize=u.readInt(4),this.uncompressedSize=u.readInt(4);var y=u.readInt(2);if(this.extraFieldsLength=u.readInt(2),this.fileCommentLength=u.readInt(2),this.diskNumberStart=u.readInt(2),this.internalFileAttributes=u.readInt(2),this.externalFileAttributes=u.readInt(4),this.localHeaderOffset=u.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");u.skip(y),this.readExtraFields(u),this.parseZIP64ExtraField(u),this.fileComment=u.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var u=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),u==0&&(this.dosPermissions=63&this.externalFileAttributes),u==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var u=r(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=u.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=u.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=u.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=u.readInt(4))}},readExtraFields:function(u){var y,h,m,p=u.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});u.index+4<p;)y=u.readInt(2),h=u.readInt(2),m=u.readData(h),this.extraFields[y]={id:y,length:h,value:m};u.setIndex(p)},handleUTF8:function(){var u=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var y=this.findExtraFieldUnicodePath();if(y!==null)this.fileNameStr=y;else{var h=a.transformTo(u,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(h)}var m=this.findExtraFieldUnicodeComment();if(m!==null)this.fileCommentStr=m;else{var p=a.transformTo(u,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(p)}}},findExtraFieldUnicodePath:function(){var u=this.extraFields[28789];if(u){var y=r(u.value);return y.readInt(1)!==1||l(this.fileName)!==y.readInt(4)?null:f.utf8decode(y.readData(u.length-5))}return null},findExtraFieldUnicodeComment:function(){var u=this.extraFields[25461];if(u){var y=r(u.value);return y.readInt(1)!==1||l(this.fileComment)!==y.readInt(4)?null:f.utf8decode(y.readData(u.length-5))}return null}},n.exports=_},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,n,i){function r(y,h,m){this.name=y,this.dir=m.dir,this.date=m.date,this.comment=m.comment,this.unixPermissions=m.unixPermissions,this.dosPermissions=m.dosPermissions,this._data=h,this._dataBinary=m.binary,this.options={compression:m.compression,compressionOptions:m.compressionOptions}}var a=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),l=t("./utf8"),f=t("./compressedObject"),b=t("./stream/GenericWorker");r.prototype={internalStream:function(y){var h=null,m="string";try{if(!y)throw new Error("No output type specified.");var p=(m=y.toLowerCase())==="string"||m==="text";m!=="binarystring"&&m!=="text"||(m="string"),h=this._decompressWorker();var w=!this._dataBinary;w&&!p&&(h=h.pipe(new l.Utf8EncodeWorker)),!w&&p&&(h=h.pipe(new l.Utf8DecodeWorker))}catch(S){(h=new b("error")).error(S)}return new a(h,m,"")},async:function(y,h){return this.internalStream(y).accumulate(h)},nodeStream:function(y,h){return this.internalStream(y||"nodebuffer").toNodejsStream(h)},_compressWorker:function(y,h){if(this._data instanceof f&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var m=this._decompressWorker();return this._dataBinary||(m=m.pipe(new l.Utf8EncodeWorker)),f.createWorkerFrom(m,y,h)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof b?this._data:new o(this._data)}};for(var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],_=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},u=0;u<g.length;u++)r.prototype[g[u]]=_;n.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,n,i){(function(r){var a,o,l=r.MutationObserver||r.WebKitMutationObserver;if(l){var f=0,b=new l(y),g=r.document.createTextNode("");b.observe(g,{characterData:!0}),a=function(){g.data=f=++f%2}}else if(r.setImmediate||r.MessageChannel===void 0)a="document"in r&&"onreadystatechange"in r.document.createElement("script")?function(){var h=r.document.createElement("script");h.onreadystatechange=function(){y(),h.onreadystatechange=null,h.parentNode.removeChild(h),h=null},r.document.documentElement.appendChild(h)}:function(){setTimeout(y,0)};else{var _=new r.MessageChannel;_.port1.onmessage=y,a=function(){_.port2.postMessage(0)}}var u=[];function y(){var h,m;o=!0;for(var p=u.length;p;){for(m=u,u=[],h=-1;++h<p;)m[h]();p=u.length}o=!1}n.exports=function(h){u.push(h)!==1||o||a()}}).call(this,typeof Bt!="undefined"?Bt:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],37:[function(t,n,i){var r=t("immediate");function a(){}var o={},l=["REJECTED"],f=["FULFILLED"],b=["PENDING"];function g(p){if(typeof p!="function")throw new TypeError("resolver must be a function");this.state=b,this.queue=[],this.outcome=void 0,p!==a&&h(this,p)}function _(p,w,S){this.promise=p,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function u(p,w,S){r(function(){var O;try{O=w(S)}catch(E){return o.reject(p,E)}O===p?o.reject(p,new TypeError("Cannot resolve promise with itself")):o.resolve(p,O)})}function y(p){var w=p&&p.then;if(p&&(typeof p=="object"||typeof p=="function")&&typeof w=="function")return function(){w.apply(p,arguments)}}function h(p,w){var S=!1;function O(x){S||(S=!0,o.reject(p,x))}function E(x){S||(S=!0,o.resolve(p,x))}var C=m(function(){w(E,O)});C.status==="error"&&O(C.value)}function m(p,w){var S={};try{S.value=p(w),S.status="success"}catch(O){S.status="error",S.value=O}return S}(n.exports=g).prototype.finally=function(p){if(typeof p!="function")return this;var w=this.constructor;return this.then(function(S){return w.resolve(p()).then(function(){return S})},function(S){return w.resolve(p()).then(function(){throw S})})},g.prototype.catch=function(p){return this.then(null,p)},g.prototype.then=function(p,w){if(typeof p!="function"&&this.state===f||typeof w!="function"&&this.state===l)return this;var S=new this.constructor(a);return this.state!==b?u(S,this.state===f?p:w,this.outcome):this.queue.push(new _(S,p,w)),S},_.prototype.callFulfilled=function(p){o.resolve(this.promise,p)},_.prototype.otherCallFulfilled=function(p){u(this.promise,this.onFulfilled,p)},_.prototype.callRejected=function(p){o.reject(this.promise,p)},_.prototype.otherCallRejected=function(p){u(this.promise,this.onRejected,p)},o.resolve=function(p,w){var S=m(y,w);if(S.status==="error")return o.reject(p,S.value);var O=S.value;if(O)h(p,O);else{p.state=f,p.outcome=w;for(var E=-1,C=p.queue.length;++E<C;)p.queue[E].callFulfilled(w)}return p},o.reject=function(p,w){p.state=l,p.outcome=w;for(var S=-1,O=p.queue.length;++S<O;)p.queue[S].callRejected(w);return p},g.resolve=function(p){return p instanceof this?p:o.resolve(new this(a),p)},g.reject=function(p){var w=new this(a);return o.reject(w,p)},g.all=function(p){var w=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=p.length,O=!1;if(!S)return this.resolve([]);for(var E=new Array(S),C=0,x=-1,D=new this(a);++x<S;)T(p[x],x);return D;function T($,G){w.resolve($).then(function(A){E[G]=A,++C!==S||O||(O=!0,o.resolve(D,E))},function(A){O||(O=!0,o.reject(D,A))})}},g.race=function(p){var w=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=p.length,O=!1;if(!S)return this.resolve([]);for(var E=-1,C=new this(a);++E<S;)x=p[E],w.resolve(x).then(function(D){O||(O=!0,o.resolve(C,D))},function(D){O||(O=!0,o.reject(C,D))});var x;return C}},{immediate:36}],38:[function(t,n,i){var r={};(0,t("./lib/utils/common").assign)(r,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),n.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,n,i){var r=t("./zlib/deflate"),a=t("./utils/common"),o=t("./utils/strings"),l=t("./zlib/messages"),f=t("./zlib/zstream"),b=Object.prototype.toString,g=0,_=-1,u=0,y=8;function h(p){if(!(this instanceof h))return new h(p);this.options=a.assign({level:_,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:u,to:""},p||{});var w=this.options;w.raw&&0<w.windowBits?w.windowBits=-w.windowBits:w.gzip&&0<w.windowBits&&w.windowBits<16&&(w.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var S=r.deflateInit2(this.strm,w.level,w.method,w.windowBits,w.memLevel,w.strategy);if(S!==g)throw new Error(l[S]);if(w.header&&r.deflateSetHeader(this.strm,w.header),w.dictionary){var O;if(O=typeof w.dictionary=="string"?o.string2buf(w.dictionary):b.call(w.dictionary)==="[object ArrayBuffer]"?new Uint8Array(w.dictionary):w.dictionary,(S=r.deflateSetDictionary(this.strm,O))!==g)throw new Error(l[S]);this._dict_set=!0}}function m(p,w){var S=new h(w);if(S.push(p,!0),S.err)throw S.msg||l[S.err];return S.result}h.prototype.push=function(p,w){var S,O,E=this.strm,C=this.options.chunkSize;if(this.ended)return!1;O=w===~~w?w:w===!0?4:0,typeof p=="string"?E.input=o.string2buf(p):b.call(p)==="[object ArrayBuffer]"?E.input=new Uint8Array(p):E.input=p,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new a.Buf8(C),E.next_out=0,E.avail_out=C),(S=r.deflate(E,O))!==1&&S!==g)return this.onEnd(S),!(this.ended=!0);E.avail_out!==0&&(E.avail_in!==0||O!==4&&O!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(E.output,E.next_out))):this.onData(a.shrinkBuf(E.output,E.next_out)))}while((0<E.avail_in||E.avail_out===0)&&S!==1);return O===4?(S=r.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===g):O!==2||(this.onEnd(g),!(E.avail_out=0))},h.prototype.onData=function(p){this.chunks.push(p)},h.prototype.onEnd=function(p){p===g&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},i.Deflate=h,i.deflate=m,i.deflateRaw=function(p,w){return(w=w||{}).raw=!0,m(p,w)},i.gzip=function(p,w){return(w=w||{}).gzip=!0,m(p,w)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,n,i){var r=t("./zlib/inflate"),a=t("./utils/common"),o=t("./utils/strings"),l=t("./zlib/constants"),f=t("./zlib/messages"),b=t("./zlib/zstream"),g=t("./zlib/gzheader"),_=Object.prototype.toString;function u(h){if(!(this instanceof u))return new u(h);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},h||{});var m=this.options;m.raw&&0<=m.windowBits&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),!(0<=m.windowBits&&m.windowBits<16)||h&&h.windowBits||(m.windowBits+=32),15<m.windowBits&&m.windowBits<48&&(15&m.windowBits)==0&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new b,this.strm.avail_out=0;var p=r.inflateInit2(this.strm,m.windowBits);if(p!==l.Z_OK)throw new Error(f[p]);this.header=new g,r.inflateGetHeader(this.strm,this.header)}function y(h,m){var p=new u(m);if(p.push(h,!0),p.err)throw p.msg||f[p.err];return p.result}u.prototype.push=function(h,m){var p,w,S,O,E,C,x=this.strm,D=this.options.chunkSize,T=this.options.dictionary,$=!1;if(this.ended)return!1;w=m===~~m?m:m===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof h=="string"?x.input=o.binstring2buf(h):_.call(h)==="[object ArrayBuffer]"?x.input=new Uint8Array(h):x.input=h,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new a.Buf8(D),x.next_out=0,x.avail_out=D),(p=r.inflate(x,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&T&&(C=typeof T=="string"?o.string2buf(T):_.call(T)==="[object ArrayBuffer]"?new Uint8Array(T):T,p=r.inflateSetDictionary(this.strm,C)),p===l.Z_BUF_ERROR&&$===!0&&(p=l.Z_OK,$=!1),p!==l.Z_STREAM_END&&p!==l.Z_OK)return this.onEnd(p),!(this.ended=!0);x.next_out&&(x.avail_out!==0&&p!==l.Z_STREAM_END&&(x.avail_in!==0||w!==l.Z_FINISH&&w!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=o.utf8border(x.output,x.next_out),O=x.next_out-S,E=o.buf2string(x.output,S),x.next_out=O,x.avail_out=D-O,O&&a.arraySet(x.output,x.output,S,O,0),this.onData(E)):this.onData(a.shrinkBuf(x.output,x.next_out)))),x.avail_in===0&&x.avail_out===0&&($=!0)}while((0<x.avail_in||x.avail_out===0)&&p!==l.Z_STREAM_END);return p===l.Z_STREAM_END&&(w=l.Z_FINISH),w===l.Z_FINISH?(p=r.inflateEnd(this.strm),this.onEnd(p),this.ended=!0,p===l.Z_OK):w!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(x.avail_out=0))},u.prototype.onData=function(h){this.chunks.push(h)},u.prototype.onEnd=function(h){h===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},i.Inflate=u,i.inflate=y,i.inflateRaw=function(h,m){return(m=m||{}).raw=!0,y(h,m)},i.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,n,i){var r=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";i.assign=function(l){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var b=f.shift();if(b){if(typeof b!="object")throw new TypeError(b+"must be non-object");for(var g in b)b.hasOwnProperty(g)&&(l[g]=b[g])}}return l},i.shrinkBuf=function(l,f){return l.length===f?l:l.subarray?l.subarray(0,f):(l.length=f,l)};var a={arraySet:function(l,f,b,g,_){if(f.subarray&&l.subarray)l.set(f.subarray(b,b+g),_);else for(var u=0;u<g;u++)l[_+u]=f[b+u]},flattenChunks:function(l){var f,b,g,_,u,y;for(f=g=0,b=l.length;f<b;f++)g+=l[f].length;for(y=new Uint8Array(g),f=_=0,b=l.length;f<b;f++)u=l[f],y.set(u,_),_+=u.length;return y}},o={arraySet:function(l,f,b,g,_){for(var u=0;u<g;u++)l[_+u]=f[b+u]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,a)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(r)},{}],42:[function(t,n,i){var r=t("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new r.Buf8(256),f=0;f<256;f++)l[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function b(g,_){if(_<65537&&(g.subarray&&o||!g.subarray&&a))return String.fromCharCode.apply(null,r.shrinkBuf(g,_));for(var u="",y=0;y<_;y++)u+=String.fromCharCode(g[y]);return u}l[254]=l[254]=1,i.string2buf=function(g){var _,u,y,h,m,p=g.length,w=0;for(h=0;h<p;h++)(64512&(u=g.charCodeAt(h)))==55296&&h+1<p&&(64512&(y=g.charCodeAt(h+1)))==56320&&(u=65536+(u-55296<<10)+(y-56320),h++),w+=u<128?1:u<2048?2:u<65536?3:4;for(_=new r.Buf8(w),h=m=0;m<w;h++)(64512&(u=g.charCodeAt(h)))==55296&&h+1<p&&(64512&(y=g.charCodeAt(h+1)))==56320&&(u=65536+(u-55296<<10)+(y-56320),h++),u<128?_[m++]=u:(u<2048?_[m++]=192|u>>>6:(u<65536?_[m++]=224|u>>>12:(_[m++]=240|u>>>18,_[m++]=128|u>>>12&63),_[m++]=128|u>>>6&63),_[m++]=128|63&u);return _},i.buf2binstring=function(g){return b(g,g.length)},i.binstring2buf=function(g){for(var _=new r.Buf8(g.length),u=0,y=_.length;u<y;u++)_[u]=g.charCodeAt(u);return _},i.buf2string=function(g,_){var u,y,h,m,p=_||g.length,w=new Array(2*p);for(u=y=0;u<p;)if((h=g[u++])<128)w[y++]=h;else if(4<(m=l[h]))w[y++]=65533,u+=m-1;else{for(h&=m===2?31:m===3?15:7;1<m&&u<p;)h=h<<6|63&g[u++],m--;1<m?w[y++]=65533:h<65536?w[y++]=h:(h-=65536,w[y++]=55296|h>>10&1023,w[y++]=56320|1023&h)}return b(w,y)},i.utf8border=function(g,_){var u;for((_=_||g.length)>g.length&&(_=g.length),u=_-1;0<=u&&(192&g[u])==128;)u--;return u<0||u===0?_:u+l[g[u]]>_?u:_}},{"./common":41}],43:[function(t,n,i){n.exports=function(r,a,o,l){for(var f=65535&r|0,b=r>>>16&65535|0,g=0;o!==0;){for(o-=g=2e3<o?2e3:o;b=b+(f=f+a[l++]|0)|0,--g;);f%=65521,b%=65521}return f|b<<16|0}},{}],44:[function(t,n,i){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,n,i){var r=function(){for(var a,o=[],l=0;l<256;l++){a=l;for(var f=0;f<8;f++)a=1&a?3988292384^a>>>1:a>>>1;o[l]=a}return o}();n.exports=function(a,o,l,f){var b=r,g=f+l;a^=-1;for(var _=f;_<g;_++)a=a>>>8^b[255&(a^o[_])];return-1^a}},{}],46:[function(t,n,i){var r,a=t("../utils/common"),o=t("./trees"),l=t("./adler32"),f=t("./crc32"),b=t("./messages"),g=0,_=4,u=0,y=-2,h=-1,m=4,p=2,w=8,S=9,O=286,E=30,C=19,x=2*O+1,D=15,T=3,$=258,G=$+T+1,A=42,P=113,d=1,F=2,Q=3,U=4;function te(c,R){return c.msg=b[R],R}function K(c){return(c<<1)-(4<c?9:0)}function X(c){for(var R=c.length;0<=--R;)c[R]=0}function B(c){var R=c.state,z=R.pending;z>c.avail_out&&(z=c.avail_out),z!==0&&(a.arraySet(c.output,R.pending_buf,R.pending_out,z,c.next_out),c.next_out+=z,R.pending_out+=z,c.total_out+=z,c.avail_out-=z,R.pending-=z,R.pending===0&&(R.pending_out=0))}function L(c,R){o._tr_flush_block(c,0<=c.block_start?c.block_start:-1,c.strstart-c.block_start,R),c.block_start=c.strstart,B(c.strm)}function J(c,R){c.pending_buf[c.pending++]=R}function V(c,R){c.pending_buf[c.pending++]=R>>>8&255,c.pending_buf[c.pending++]=255&R}function Z(c,R){var z,k,v=c.max_chain_length,I=c.strstart,M=c.prev_length,j=c.nice_match,N=c.strstart>c.w_size-G?c.strstart-(c.w_size-G):0,W=c.window,H=c.w_mask,q=c.prev,Y=c.strstart+$,re=W[I+M-1],se=W[I+M];c.prev_length>=c.good_match&&(v>>=2),j>c.lookahead&&(j=c.lookahead);do if(W[(z=R)+M]===se&&W[z+M-1]===re&&W[z]===W[I]&&W[++z]===W[I+1]){I+=2,z++;do;while(W[++I]===W[++z]&&W[++I]===W[++z]&&W[++I]===W[++z]&&W[++I]===W[++z]&&W[++I]===W[++z]&&W[++I]===W[++z]&&W[++I]===W[++z]&&W[++I]===W[++z]&&I<Y);if(k=$-(Y-I),I=Y-$,M<k){if(c.match_start=R,j<=(M=k))break;re=W[I+M-1],se=W[I+M]}}while((R=q[R&H])>N&&--v!=0);return M<=c.lookahead?M:c.lookahead}function ce(c){var R,z,k,v,I,M,j,N,W,H,q=c.w_size;do{if(v=c.window_size-c.lookahead-c.strstart,c.strstart>=q+(q-G)){for(a.arraySet(c.window,c.window,q,q,0),c.match_start-=q,c.strstart-=q,c.block_start-=q,R=z=c.hash_size;k=c.head[--R],c.head[R]=q<=k?k-q:0,--z;);for(R=z=q;k=c.prev[--R],c.prev[R]=q<=k?k-q:0,--z;);v+=q}if(c.strm.avail_in===0)break;if(M=c.strm,j=c.window,N=c.strstart+c.lookahead,W=v,H=void 0,H=M.avail_in,W<H&&(H=W),z=H===0?0:(M.avail_in-=H,a.arraySet(j,M.input,M.next_in,H,N),M.state.wrap===1?M.adler=l(M.adler,j,H,N):M.state.wrap===2&&(M.adler=f(M.adler,j,H,N)),M.next_in+=H,M.total_in+=H,H),c.lookahead+=z,c.lookahead+c.insert>=T)for(I=c.strstart-c.insert,c.ins_h=c.window[I],c.ins_h=(c.ins_h<<c.hash_shift^c.window[I+1])&c.hash_mask;c.insert&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[I+T-1])&c.hash_mask,c.prev[I&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=I,I++,c.insert--,!(c.lookahead+c.insert<T)););}while(c.lookahead<G&&c.strm.avail_in!==0)}function me(c,R){for(var z,k;;){if(c.lookahead<G){if(ce(c),c.lookahead<G&&R===g)return d;if(c.lookahead===0)break}if(z=0,c.lookahead>=T&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+T-1])&c.hash_mask,z=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart),z!==0&&c.strstart-z<=c.w_size-G&&(c.match_length=Z(c,z)),c.match_length>=T)if(k=o._tr_tally(c,c.strstart-c.match_start,c.match_length-T),c.lookahead-=c.match_length,c.match_length<=c.max_lazy_match&&c.lookahead>=T){for(c.match_length--;c.strstart++,c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+T-1])&c.hash_mask,z=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart,--c.match_length!=0;);c.strstart++}else c.strstart+=c.match_length,c.match_length=0,c.ins_h=c.window[c.strstart],c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+1])&c.hash_mask;else k=o._tr_tally(c,0,c.window[c.strstart]),c.lookahead--,c.strstart++;if(k&&(L(c,!1),c.strm.avail_out===0))return d}return c.insert=c.strstart<T-1?c.strstart:T-1,R===_?(L(c,!0),c.strm.avail_out===0?Q:U):c.last_lit&&(L(c,!1),c.strm.avail_out===0)?d:F}function ne(c,R){for(var z,k,v;;){if(c.lookahead<G){if(ce(c),c.lookahead<G&&R===g)return d;if(c.lookahead===0)break}if(z=0,c.lookahead>=T&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+T-1])&c.hash_mask,z=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart),c.prev_length=c.match_length,c.prev_match=c.match_start,c.match_length=T-1,z!==0&&c.prev_length<c.max_lazy_match&&c.strstart-z<=c.w_size-G&&(c.match_length=Z(c,z),c.match_length<=5&&(c.strategy===1||c.match_length===T&&4096<c.strstart-c.match_start)&&(c.match_length=T-1)),c.prev_length>=T&&c.match_length<=c.prev_length){for(v=c.strstart+c.lookahead-T,k=o._tr_tally(c,c.strstart-1-c.prev_match,c.prev_length-T),c.lookahead-=c.prev_length-1,c.prev_length-=2;++c.strstart<=v&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+T-1])&c.hash_mask,z=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart),--c.prev_length!=0;);if(c.match_available=0,c.match_length=T-1,c.strstart++,k&&(L(c,!1),c.strm.avail_out===0))return d}else if(c.match_available){if((k=o._tr_tally(c,0,c.window[c.strstart-1]))&&L(c,!1),c.strstart++,c.lookahead--,c.strm.avail_out===0)return d}else c.match_available=1,c.strstart++,c.lookahead--}return c.match_available&&(k=o._tr_tally(c,0,c.window[c.strstart-1]),c.match_available=0),c.insert=c.strstart<T-1?c.strstart:T-1,R===_?(L(c,!0),c.strm.avail_out===0?Q:U):c.last_lit&&(L(c,!1),c.strm.avail_out===0)?d:F}function ie(c,R,z,k,v){this.good_length=c,this.max_lazy=R,this.nice_length=z,this.max_chain=k,this.func=v}function de(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=w,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*x),this.dyn_dtree=new a.Buf16(2*(2*E+1)),this.bl_tree=new a.Buf16(2*(2*C+1)),X(this.dyn_ltree),X(this.dyn_dtree),X(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(D+1),this.heap=new a.Buf16(2*O+1),X(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*O+1),X(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ue(c){var R;return c&&c.state?(c.total_in=c.total_out=0,c.data_type=p,(R=c.state).pending=0,R.pending_out=0,R.wrap<0&&(R.wrap=-R.wrap),R.status=R.wrap?A:P,c.adler=R.wrap===2?0:1,R.last_flush=g,o._tr_init(R),u):te(c,y)}function Ce(c){var R=ue(c);return R===u&&function(z){z.window_size=2*z.w_size,X(z.head),z.max_lazy_match=r[z.level].max_lazy,z.good_match=r[z.level].good_length,z.nice_match=r[z.level].nice_length,z.max_chain_length=r[z.level].max_chain,z.strstart=0,z.block_start=0,z.lookahead=0,z.insert=0,z.match_length=z.prev_length=T-1,z.match_available=0,z.ins_h=0}(c.state),R}function Ee(c,R,z,k,v,I){if(!c)return y;var M=1;if(R===h&&(R=6),k<0?(M=0,k=-k):15<k&&(M=2,k-=16),v<1||S<v||z!==w||k<8||15<k||R<0||9<R||I<0||m<I)return te(c,y);k===8&&(k=9);var j=new de;return(c.state=j).strm=c,j.wrap=M,j.gzhead=null,j.w_bits=k,j.w_size=1<<j.w_bits,j.w_mask=j.w_size-1,j.hash_bits=v+7,j.hash_size=1<<j.hash_bits,j.hash_mask=j.hash_size-1,j.hash_shift=~~((j.hash_bits+T-1)/T),j.window=new a.Buf8(2*j.w_size),j.head=new a.Buf16(j.hash_size),j.prev=new a.Buf16(j.w_size),j.lit_bufsize=1<<v+6,j.pending_buf_size=4*j.lit_bufsize,j.pending_buf=new a.Buf8(j.pending_buf_size),j.d_buf=1*j.lit_bufsize,j.l_buf=3*j.lit_bufsize,j.level=R,j.strategy=I,j.method=z,Ce(c)}r=[new ie(0,0,0,0,function(c,R){var z=65535;for(z>c.pending_buf_size-5&&(z=c.pending_buf_size-5);;){if(c.lookahead<=1){if(ce(c),c.lookahead===0&&R===g)return d;if(c.lookahead===0)break}c.strstart+=c.lookahead,c.lookahead=0;var k=c.block_start+z;if((c.strstart===0||c.strstart>=k)&&(c.lookahead=c.strstart-k,c.strstart=k,L(c,!1),c.strm.avail_out===0)||c.strstart-c.block_start>=c.w_size-G&&(L(c,!1),c.strm.avail_out===0))return d}return c.insert=0,R===_?(L(c,!0),c.strm.avail_out===0?Q:U):(c.strstart>c.block_start&&(L(c,!1),c.strm.avail_out),d)}),new ie(4,4,8,4,me),new ie(4,5,16,8,me),new ie(4,6,32,32,me),new ie(4,4,16,16,ne),new ie(8,16,32,32,ne),new ie(8,16,128,128,ne),new ie(8,32,128,256,ne),new ie(32,128,258,1024,ne),new ie(32,258,258,4096,ne)],i.deflateInit=function(c,R){return Ee(c,R,w,15,8,0)},i.deflateInit2=Ee,i.deflateReset=Ce,i.deflateResetKeep=ue,i.deflateSetHeader=function(c,R){return c&&c.state?c.state.wrap!==2?y:(c.state.gzhead=R,u):y},i.deflate=function(c,R){var z,k,v,I;if(!c||!c.state||5<R||R<0)return c?te(c,y):y;if(k=c.state,!c.output||!c.input&&c.avail_in!==0||k.status===666&&R!==_)return te(c,c.avail_out===0?-5:y);if(k.strm=c,z=k.last_flush,k.last_flush=R,k.status===A)if(k.wrap===2)c.adler=0,J(k,31),J(k,139),J(k,8),k.gzhead?(J(k,(k.gzhead.text?1:0)+(k.gzhead.hcrc?2:0)+(k.gzhead.extra?4:0)+(k.gzhead.name?8:0)+(k.gzhead.comment?16:0)),J(k,255&k.gzhead.time),J(k,k.gzhead.time>>8&255),J(k,k.gzhead.time>>16&255),J(k,k.gzhead.time>>24&255),J(k,k.level===9?2:2<=k.strategy||k.level<2?4:0),J(k,255&k.gzhead.os),k.gzhead.extra&&k.gzhead.extra.length&&(J(k,255&k.gzhead.extra.length),J(k,k.gzhead.extra.length>>8&255)),k.gzhead.hcrc&&(c.adler=f(c.adler,k.pending_buf,k.pending,0)),k.gzindex=0,k.status=69):(J(k,0),J(k,0),J(k,0),J(k,0),J(k,0),J(k,k.level===9?2:2<=k.strategy||k.level<2?4:0),J(k,3),k.status=P);else{var M=w+(k.w_bits-8<<4)<<8;M|=(2<=k.strategy||k.level<2?0:k.level<6?1:k.level===6?2:3)<<6,k.strstart!==0&&(M|=32),M+=31-M%31,k.status=P,V(k,M),k.strstart!==0&&(V(k,c.adler>>>16),V(k,65535&c.adler)),c.adler=1}if(k.status===69)if(k.gzhead.extra){for(v=k.pending;k.gzindex<(65535&k.gzhead.extra.length)&&(k.pending!==k.pending_buf_size||(k.gzhead.hcrc&&k.pending>v&&(c.adler=f(c.adler,k.pending_buf,k.pending-v,v)),B(c),v=k.pending,k.pending!==k.pending_buf_size));)J(k,255&k.gzhead.extra[k.gzindex]),k.gzindex++;k.gzhead.hcrc&&k.pending>v&&(c.adler=f(c.adler,k.pending_buf,k.pending-v,v)),k.gzindex===k.gzhead.extra.length&&(k.gzindex=0,k.status=73)}else k.status=73;if(k.status===73)if(k.gzhead.name){v=k.pending;do{if(k.pending===k.pending_buf_size&&(k.gzhead.hcrc&&k.pending>v&&(c.adler=f(c.adler,k.pending_buf,k.pending-v,v)),B(c),v=k.pending,k.pending===k.pending_buf_size)){I=1;break}I=k.gzindex<k.gzhead.name.length?255&k.gzhead.name.charCodeAt(k.gzindex++):0,J(k,I)}while(I!==0);k.gzhead.hcrc&&k.pending>v&&(c.adler=f(c.adler,k.pending_buf,k.pending-v,v)),I===0&&(k.gzindex=0,k.status=91)}else k.status=91;if(k.status===91)if(k.gzhead.comment){v=k.pending;do{if(k.pending===k.pending_buf_size&&(k.gzhead.hcrc&&k.pending>v&&(c.adler=f(c.adler,k.pending_buf,k.pending-v,v)),B(c),v=k.pending,k.pending===k.pending_buf_size)){I=1;break}I=k.gzindex<k.gzhead.comment.length?255&k.gzhead.comment.charCodeAt(k.gzindex++):0,J(k,I)}while(I!==0);k.gzhead.hcrc&&k.pending>v&&(c.adler=f(c.adler,k.pending_buf,k.pending-v,v)),I===0&&(k.status=103)}else k.status=103;if(k.status===103&&(k.gzhead.hcrc?(k.pending+2>k.pending_buf_size&&B(c),k.pending+2<=k.pending_buf_size&&(J(k,255&c.adler),J(k,c.adler>>8&255),c.adler=0,k.status=P)):k.status=P),k.pending!==0){if(B(c),c.avail_out===0)return k.last_flush=-1,u}else if(c.avail_in===0&&K(R)<=K(z)&&R!==_)return te(c,-5);if(k.status===666&&c.avail_in!==0)return te(c,-5);if(c.avail_in!==0||k.lookahead!==0||R!==g&&k.status!==666){var j=k.strategy===2?function(N,W){for(var H;;){if(N.lookahead===0&&(ce(N),N.lookahead===0)){if(W===g)return d;break}if(N.match_length=0,H=o._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++,H&&(L(N,!1),N.strm.avail_out===0))return d}return N.insert=0,W===_?(L(N,!0),N.strm.avail_out===0?Q:U):N.last_lit&&(L(N,!1),N.strm.avail_out===0)?d:F}(k,R):k.strategy===3?function(N,W){for(var H,q,Y,re,se=N.window;;){if(N.lookahead<=$){if(ce(N),N.lookahead<=$&&W===g)return d;if(N.lookahead===0)break}if(N.match_length=0,N.lookahead>=T&&0<N.strstart&&(q=se[Y=N.strstart-1])===se[++Y]&&q===se[++Y]&&q===se[++Y]){re=N.strstart+$;do;while(q===se[++Y]&&q===se[++Y]&&q===se[++Y]&&q===se[++Y]&&q===se[++Y]&&q===se[++Y]&&q===se[++Y]&&q===se[++Y]&&Y<re);N.match_length=$-(re-Y),N.match_length>N.lookahead&&(N.match_length=N.lookahead)}if(N.match_length>=T?(H=o._tr_tally(N,1,N.match_length-T),N.lookahead-=N.match_length,N.strstart+=N.match_length,N.match_length=0):(H=o._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++),H&&(L(N,!1),N.strm.avail_out===0))return d}return N.insert=0,W===_?(L(N,!0),N.strm.avail_out===0?Q:U):N.last_lit&&(L(N,!1),N.strm.avail_out===0)?d:F}(k,R):r[k.level].func(k,R);if(j!==Q&&j!==U||(k.status=666),j===d||j===Q)return c.avail_out===0&&(k.last_flush=-1),u;if(j===F&&(R===1?o._tr_align(k):R!==5&&(o._tr_stored_block(k,0,0,!1),R===3&&(X(k.head),k.lookahead===0&&(k.strstart=0,k.block_start=0,k.insert=0))),B(c),c.avail_out===0))return k.last_flush=-1,u}return R!==_?u:k.wrap<=0?1:(k.wrap===2?(J(k,255&c.adler),J(k,c.adler>>8&255),J(k,c.adler>>16&255),J(k,c.adler>>24&255),J(k,255&c.total_in),J(k,c.total_in>>8&255),J(k,c.total_in>>16&255),J(k,c.total_in>>24&255)):(V(k,c.adler>>>16),V(k,65535&c.adler)),B(c),0<k.wrap&&(k.wrap=-k.wrap),k.pending!==0?u:1)},i.deflateEnd=function(c){var R;return c&&c.state?(R=c.state.status)!==A&&R!==69&&R!==73&&R!==91&&R!==103&&R!==P&&R!==666?te(c,y):(c.state=null,R===P?te(c,-3):u):y},i.deflateSetDictionary=function(c,R){var z,k,v,I,M,j,N,W,H=R.length;if(!c||!c.state||(I=(z=c.state).wrap)===2||I===1&&z.status!==A||z.lookahead)return y;for(I===1&&(c.adler=l(c.adler,R,H,0)),z.wrap=0,H>=z.w_size&&(I===0&&(X(z.head),z.strstart=0,z.block_start=0,z.insert=0),W=new a.Buf8(z.w_size),a.arraySet(W,R,H-z.w_size,z.w_size,0),R=W,H=z.w_size),M=c.avail_in,j=c.next_in,N=c.input,c.avail_in=H,c.next_in=0,c.input=R,ce(z);z.lookahead>=T;){for(k=z.strstart,v=z.lookahead-(T-1);z.ins_h=(z.ins_h<<z.hash_shift^z.window[k+T-1])&z.hash_mask,z.prev[k&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=k,k++,--v;);z.strstart=k,z.lookahead=T-1,ce(z)}return z.strstart+=z.lookahead,z.block_start=z.strstart,z.insert=z.lookahead,z.lookahead=0,z.match_length=z.prev_length=T-1,z.match_available=0,c.next_in=j,c.input=N,c.avail_in=M,z.wrap=I,u},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,n,i){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,n,i){n.exports=function(r,a){var o,l,f,b,g,_,u,y,h,m,p,w,S,O,E,C,x,D,T,$,G,A,P,d,F;o=r.state,l=r.next_in,d=r.input,f=l+(r.avail_in-5),b=r.next_out,F=r.output,g=b-(a-r.avail_out),_=b+(r.avail_out-257),u=o.dmax,y=o.wsize,h=o.whave,m=o.wnext,p=o.window,w=o.hold,S=o.bits,O=o.lencode,E=o.distcode,C=(1<<o.lenbits)-1,x=(1<<o.distbits)-1;e:do{S<15&&(w+=d[l++]<<S,S+=8,w+=d[l++]<<S,S+=8),D=O[w&C];t:for(;;){if(w>>>=T=D>>>24,S-=T,(T=D>>>16&255)===0)F[b++]=65535&D;else{if(!(16&T)){if((64&T)==0){D=O[(65535&D)+(w&(1<<T)-1)];continue t}if(32&T){o.mode=12;break e}r.msg="invalid literal/length code",o.mode=30;break e}$=65535&D,(T&=15)&&(S<T&&(w+=d[l++]<<S,S+=8),$+=w&(1<<T)-1,w>>>=T,S-=T),S<15&&(w+=d[l++]<<S,S+=8,w+=d[l++]<<S,S+=8),D=E[w&x];n:for(;;){if(w>>>=T=D>>>24,S-=T,!(16&(T=D>>>16&255))){if((64&T)==0){D=E[(65535&D)+(w&(1<<T)-1)];continue n}r.msg="invalid distance code",o.mode=30;break e}if(G=65535&D,S<(T&=15)&&(w+=d[l++]<<S,(S+=8)<T&&(w+=d[l++]<<S,S+=8)),u<(G+=w&(1<<T)-1)){r.msg="invalid distance too far back",o.mode=30;break e}if(w>>>=T,S-=T,(T=b-g)<G){if(h<(T=G-T)&&o.sane){r.msg="invalid distance too far back",o.mode=30;break e}if(P=p,(A=0)===m){if(A+=y-T,T<$){for($-=T;F[b++]=p[A++],--T;);A=b-G,P=F}}else if(m<T){if(A+=y+m-T,(T-=m)<$){for($-=T;F[b++]=p[A++],--T;);if(A=0,m<$){for($-=T=m;F[b++]=p[A++],--T;);A=b-G,P=F}}}else if(A+=m-T,T<$){for($-=T;F[b++]=p[A++],--T;);A=b-G,P=F}for(;2<$;)F[b++]=P[A++],F[b++]=P[A++],F[b++]=P[A++],$-=3;$&&(F[b++]=P[A++],1<$&&(F[b++]=P[A++]))}else{for(A=b-G;F[b++]=F[A++],F[b++]=F[A++],F[b++]=F[A++],2<($-=3););$&&(F[b++]=F[A++],1<$&&(F[b++]=F[A++]))}break}}break}}while(l<f&&b<_);l-=$=S>>3,w&=(1<<(S-=$<<3))-1,r.next_in=l,r.next_out=b,r.avail_in=l<f?f-l+5:5-(l-f),r.avail_out=b<_?_-b+257:257-(b-_),o.hold=w,o.bits=S}},{}],49:[function(t,n,i){var r=t("../utils/common"),a=t("./adler32"),o=t("./crc32"),l=t("./inffast"),f=t("./inftrees"),b=1,g=2,_=0,u=-2,y=1,h=852,m=592;function p(A){return(A>>>24&255)+(A>>>8&65280)+((65280&A)<<8)+((255&A)<<24)}function w(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(A){var P;return A&&A.state?(P=A.state,A.total_in=A.total_out=P.total=0,A.msg="",P.wrap&&(A.adler=1&P.wrap),P.mode=y,P.last=0,P.havedict=0,P.dmax=32768,P.head=null,P.hold=0,P.bits=0,P.lencode=P.lendyn=new r.Buf32(h),P.distcode=P.distdyn=new r.Buf32(m),P.sane=1,P.back=-1,_):u}function O(A){var P;return A&&A.state?((P=A.state).wsize=0,P.whave=0,P.wnext=0,S(A)):u}function E(A,P){var d,F;return A&&A.state?(F=A.state,P<0?(d=0,P=-P):(d=1+(P>>4),P<48&&(P&=15)),P&&(P<8||15<P)?u:(F.window!==null&&F.wbits!==P&&(F.window=null),F.wrap=d,F.wbits=P,O(A))):u}function C(A,P){var d,F;return A?(F=new w,(A.state=F).window=null,(d=E(A,P))!==_&&(A.state=null),d):u}var x,D,T=!0;function $(A){if(T){var P;for(x=new r.Buf32(512),D=new r.Buf32(32),P=0;P<144;)A.lens[P++]=8;for(;P<256;)A.lens[P++]=9;for(;P<280;)A.lens[P++]=7;for(;P<288;)A.lens[P++]=8;for(f(b,A.lens,0,288,x,0,A.work,{bits:9}),P=0;P<32;)A.lens[P++]=5;f(g,A.lens,0,32,D,0,A.work,{bits:5}),T=!1}A.lencode=x,A.lenbits=9,A.distcode=D,A.distbits=5}function G(A,P,d,F){var Q,U=A.state;return U.window===null&&(U.wsize=1<<U.wbits,U.wnext=0,U.whave=0,U.window=new r.Buf8(U.wsize)),F>=U.wsize?(r.arraySet(U.window,P,d-U.wsize,U.wsize,0),U.wnext=0,U.whave=U.wsize):(F<(Q=U.wsize-U.wnext)&&(Q=F),r.arraySet(U.window,P,d-F,Q,U.wnext),(F-=Q)?(r.arraySet(U.window,P,d-F,F,0),U.wnext=F,U.whave=U.wsize):(U.wnext+=Q,U.wnext===U.wsize&&(U.wnext=0),U.whave<U.wsize&&(U.whave+=Q))),0}i.inflateReset=O,i.inflateReset2=E,i.inflateResetKeep=S,i.inflateInit=function(A){return C(A,15)},i.inflateInit2=C,i.inflate=function(A,P){var d,F,Q,U,te,K,X,B,L,J,V,Z,ce,me,ne,ie,de,ue,Ce,Ee,c,R,z,k,v=0,I=new r.Buf8(4),M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!A||!A.state||!A.output||!A.input&&A.avail_in!==0)return u;(d=A.state).mode===12&&(d.mode=13),te=A.next_out,Q=A.output,X=A.avail_out,U=A.next_in,F=A.input,K=A.avail_in,B=d.hold,L=d.bits,J=K,V=X,R=_;e:for(;;)switch(d.mode){case y:if(d.wrap===0){d.mode=13;break}for(;L<16;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}if(2&d.wrap&&B===35615){I[d.check=0]=255&B,I[1]=B>>>8&255,d.check=o(d.check,I,2,0),L=B=0,d.mode=2;break}if(d.flags=0,d.head&&(d.head.done=!1),!(1&d.wrap)||(((255&B)<<8)+(B>>8))%31){A.msg="incorrect header check",d.mode=30;break}if((15&B)!=8){A.msg="unknown compression method",d.mode=30;break}if(L-=4,c=8+(15&(B>>>=4)),d.wbits===0)d.wbits=c;else if(c>d.wbits){A.msg="invalid window size",d.mode=30;break}d.dmax=1<<c,A.adler=d.check=1,d.mode=512&B?10:12,L=B=0;break;case 2:for(;L<16;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}if(d.flags=B,(255&d.flags)!=8){A.msg="unknown compression method",d.mode=30;break}if(57344&d.flags){A.msg="unknown header flags set",d.mode=30;break}d.head&&(d.head.text=B>>8&1),512&d.flags&&(I[0]=255&B,I[1]=B>>>8&255,d.check=o(d.check,I,2,0)),L=B=0,d.mode=3;case 3:for(;L<32;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}d.head&&(d.head.time=B),512&d.flags&&(I[0]=255&B,I[1]=B>>>8&255,I[2]=B>>>16&255,I[3]=B>>>24&255,d.check=o(d.check,I,4,0)),L=B=0,d.mode=4;case 4:for(;L<16;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}d.head&&(d.head.xflags=255&B,d.head.os=B>>8),512&d.flags&&(I[0]=255&B,I[1]=B>>>8&255,d.check=o(d.check,I,2,0)),L=B=0,d.mode=5;case 5:if(1024&d.flags){for(;L<16;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}d.length=B,d.head&&(d.head.extra_len=B),512&d.flags&&(I[0]=255&B,I[1]=B>>>8&255,d.check=o(d.check,I,2,0)),L=B=0}else d.head&&(d.head.extra=null);d.mode=6;case 6:if(1024&d.flags&&(K<(Z=d.length)&&(Z=K),Z&&(d.head&&(c=d.head.extra_len-d.length,d.head.extra||(d.head.extra=new Array(d.head.extra_len)),r.arraySet(d.head.extra,F,U,Z,c)),512&d.flags&&(d.check=o(d.check,F,Z,U)),K-=Z,U+=Z,d.length-=Z),d.length))break e;d.length=0,d.mode=7;case 7:if(2048&d.flags){if(K===0)break e;for(Z=0;c=F[U+Z++],d.head&&c&&d.length<65536&&(d.head.name+=String.fromCharCode(c)),c&&Z<K;);if(512&d.flags&&(d.check=o(d.check,F,Z,U)),K-=Z,U+=Z,c)break e}else d.head&&(d.head.name=null);d.length=0,d.mode=8;case 8:if(4096&d.flags){if(K===0)break e;for(Z=0;c=F[U+Z++],d.head&&c&&d.length<65536&&(d.head.comment+=String.fromCharCode(c)),c&&Z<K;);if(512&d.flags&&(d.check=o(d.check,F,Z,U)),K-=Z,U+=Z,c)break e}else d.head&&(d.head.comment=null);d.mode=9;case 9:if(512&d.flags){for(;L<16;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}if(B!==(65535&d.check)){A.msg="header crc mismatch",d.mode=30;break}L=B=0}d.head&&(d.head.hcrc=d.flags>>9&1,d.head.done=!0),A.adler=d.check=0,d.mode=12;break;case 10:for(;L<32;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}A.adler=d.check=p(B),L=B=0,d.mode=11;case 11:if(d.havedict===0)return A.next_out=te,A.avail_out=X,A.next_in=U,A.avail_in=K,d.hold=B,d.bits=L,2;A.adler=d.check=1,d.mode=12;case 12:if(P===5||P===6)break e;case 13:if(d.last){B>>>=7&L,L-=7&L,d.mode=27;break}for(;L<3;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}switch(d.last=1&B,L-=1,3&(B>>>=1)){case 0:d.mode=14;break;case 1:if($(d),d.mode=20,P!==6)break;B>>>=2,L-=2;break e;case 2:d.mode=17;break;case 3:A.msg="invalid block type",d.mode=30}B>>>=2,L-=2;break;case 14:for(B>>>=7&L,L-=7&L;L<32;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}if((65535&B)!=(B>>>16^65535)){A.msg="invalid stored block lengths",d.mode=30;break}if(d.length=65535&B,L=B=0,d.mode=15,P===6)break e;case 15:d.mode=16;case 16:if(Z=d.length){if(K<Z&&(Z=K),X<Z&&(Z=X),Z===0)break e;r.arraySet(Q,F,U,Z,te),K-=Z,U+=Z,X-=Z,te+=Z,d.length-=Z;break}d.mode=12;break;case 17:for(;L<14;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}if(d.nlen=257+(31&B),B>>>=5,L-=5,d.ndist=1+(31&B),B>>>=5,L-=5,d.ncode=4+(15&B),B>>>=4,L-=4,286<d.nlen||30<d.ndist){A.msg="too many length or distance symbols",d.mode=30;break}d.have=0,d.mode=18;case 18:for(;d.have<d.ncode;){for(;L<3;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}d.lens[M[d.have++]]=7&B,B>>>=3,L-=3}for(;d.have<19;)d.lens[M[d.have++]]=0;if(d.lencode=d.lendyn,d.lenbits=7,z={bits:d.lenbits},R=f(0,d.lens,0,19,d.lencode,0,d.work,z),d.lenbits=z.bits,R){A.msg="invalid code lengths set",d.mode=30;break}d.have=0,d.mode=19;case 19:for(;d.have<d.nlen+d.ndist;){for(;ie=(v=d.lencode[B&(1<<d.lenbits)-1])>>>16&255,de=65535&v,!((ne=v>>>24)<=L);){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}if(de<16)B>>>=ne,L-=ne,d.lens[d.have++]=de;else{if(de===16){for(k=ne+2;L<k;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}if(B>>>=ne,L-=ne,d.have===0){A.msg="invalid bit length repeat",d.mode=30;break}c=d.lens[d.have-1],Z=3+(3&B),B>>>=2,L-=2}else if(de===17){for(k=ne+3;L<k;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}L-=ne,c=0,Z=3+(7&(B>>>=ne)),B>>>=3,L-=3}else{for(k=ne+7;L<k;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}L-=ne,c=0,Z=11+(127&(B>>>=ne)),B>>>=7,L-=7}if(d.have+Z>d.nlen+d.ndist){A.msg="invalid bit length repeat",d.mode=30;break}for(;Z--;)d.lens[d.have++]=c}}if(d.mode===30)break;if(d.lens[256]===0){A.msg="invalid code -- missing end-of-block",d.mode=30;break}if(d.lenbits=9,z={bits:d.lenbits},R=f(b,d.lens,0,d.nlen,d.lencode,0,d.work,z),d.lenbits=z.bits,R){A.msg="invalid literal/lengths set",d.mode=30;break}if(d.distbits=6,d.distcode=d.distdyn,z={bits:d.distbits},R=f(g,d.lens,d.nlen,d.ndist,d.distcode,0,d.work,z),d.distbits=z.bits,R){A.msg="invalid distances set",d.mode=30;break}if(d.mode=20,P===6)break e;case 20:d.mode=21;case 21:if(6<=K&&258<=X){A.next_out=te,A.avail_out=X,A.next_in=U,A.avail_in=K,d.hold=B,d.bits=L,l(A,V),te=A.next_out,Q=A.output,X=A.avail_out,U=A.next_in,F=A.input,K=A.avail_in,B=d.hold,L=d.bits,d.mode===12&&(d.back=-1);break}for(d.back=0;ie=(v=d.lencode[B&(1<<d.lenbits)-1])>>>16&255,de=65535&v,!((ne=v>>>24)<=L);){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}if(ie&&(240&ie)==0){for(ue=ne,Ce=ie,Ee=de;ie=(v=d.lencode[Ee+((B&(1<<ue+Ce)-1)>>ue)])>>>16&255,de=65535&v,!(ue+(ne=v>>>24)<=L);){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}B>>>=ue,L-=ue,d.back+=ue}if(B>>>=ne,L-=ne,d.back+=ne,d.length=de,ie===0){d.mode=26;break}if(32&ie){d.back=-1,d.mode=12;break}if(64&ie){A.msg="invalid literal/length code",d.mode=30;break}d.extra=15&ie,d.mode=22;case 22:if(d.extra){for(k=d.extra;L<k;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}d.length+=B&(1<<d.extra)-1,B>>>=d.extra,L-=d.extra,d.back+=d.extra}d.was=d.length,d.mode=23;case 23:for(;ie=(v=d.distcode[B&(1<<d.distbits)-1])>>>16&255,de=65535&v,!((ne=v>>>24)<=L);){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}if((240&ie)==0){for(ue=ne,Ce=ie,Ee=de;ie=(v=d.distcode[Ee+((B&(1<<ue+Ce)-1)>>ue)])>>>16&255,de=65535&v,!(ue+(ne=v>>>24)<=L);){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}B>>>=ue,L-=ue,d.back+=ue}if(B>>>=ne,L-=ne,d.back+=ne,64&ie){A.msg="invalid distance code",d.mode=30;break}d.offset=de,d.extra=15&ie,d.mode=24;case 24:if(d.extra){for(k=d.extra;L<k;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}d.offset+=B&(1<<d.extra)-1,B>>>=d.extra,L-=d.extra,d.back+=d.extra}if(d.offset>d.dmax){A.msg="invalid distance too far back",d.mode=30;break}d.mode=25;case 25:if(X===0)break e;if(Z=V-X,d.offset>Z){if((Z=d.offset-Z)>d.whave&&d.sane){A.msg="invalid distance too far back",d.mode=30;break}ce=Z>d.wnext?(Z-=d.wnext,d.wsize-Z):d.wnext-Z,Z>d.length&&(Z=d.length),me=d.window}else me=Q,ce=te-d.offset,Z=d.length;for(X<Z&&(Z=X),X-=Z,d.length-=Z;Q[te++]=me[ce++],--Z;);d.length===0&&(d.mode=21);break;case 26:if(X===0)break e;Q[te++]=d.length,X--,d.mode=21;break;case 27:if(d.wrap){for(;L<32;){if(K===0)break e;K--,B|=F[U++]<<L,L+=8}if(V-=X,A.total_out+=V,d.total+=V,V&&(A.adler=d.check=d.flags?o(d.check,Q,V,te-V):a(d.check,Q,V,te-V)),V=X,(d.flags?B:p(B))!==d.check){A.msg="incorrect data check",d.mode=30;break}L=B=0}d.mode=28;case 28:if(d.wrap&&d.flags){for(;L<32;){if(K===0)break e;K--,B+=F[U++]<<L,L+=8}if(B!==(4294967295&d.total)){A.msg="incorrect length check",d.mode=30;break}L=B=0}d.mode=29;case 29:R=1;break e;case 30:R=-3;break e;case 31:return-4;case 32:default:return u}return A.next_out=te,A.avail_out=X,A.next_in=U,A.avail_in=K,d.hold=B,d.bits=L,(d.wsize||V!==A.avail_out&&d.mode<30&&(d.mode<27||P!==4))&&G(A,A.output,A.next_out,V-A.avail_out)?(d.mode=31,-4):(J-=A.avail_in,V-=A.avail_out,A.total_in+=J,A.total_out+=V,d.total+=V,d.wrap&&V&&(A.adler=d.check=d.flags?o(d.check,Q,V,A.next_out-V):a(d.check,Q,V,A.next_out-V)),A.data_type=d.bits+(d.last?64:0)+(d.mode===12?128:0)+(d.mode===20||d.mode===15?256:0),(J==0&&V===0||P===4)&&R===_&&(R=-5),R)},i.inflateEnd=function(A){if(!A||!A.state)return u;var P=A.state;return P.window&&(P.window=null),A.state=null,_},i.inflateGetHeader=function(A,P){var d;return A&&A.state?(2&(d=A.state).wrap)==0?u:((d.head=P).done=!1,_):u},i.inflateSetDictionary=function(A,P){var d,F=P.length;return A&&A.state?(d=A.state).wrap!==0&&d.mode!==11?u:d.mode===11&&a(1,P,F,0)!==d.check?-3:G(A,P,F,F)?(d.mode=31,-4):(d.havedict=1,_):u},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,n,i){var r=t("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(b,g,_,u,y,h,m,p){var w,S,O,E,C,x,D,T,$,G=p.bits,A=0,P=0,d=0,F=0,Q=0,U=0,te=0,K=0,X=0,B=0,L=null,J=0,V=new r.Buf16(16),Z=new r.Buf16(16),ce=null,me=0;for(A=0;A<=15;A++)V[A]=0;for(P=0;P<u;P++)V[g[_+P]]++;for(Q=G,F=15;1<=F&&V[F]===0;F--);if(F<Q&&(Q=F),F===0)return y[h++]=20971520,y[h++]=20971520,p.bits=1,0;for(d=1;d<F&&V[d]===0;d++);for(Q<d&&(Q=d),A=K=1;A<=15;A++)if(K<<=1,(K-=V[A])<0)return-1;if(0<K&&(b===0||F!==1))return-1;for(Z[1]=0,A=1;A<15;A++)Z[A+1]=Z[A]+V[A];for(P=0;P<u;P++)g[_+P]!==0&&(m[Z[g[_+P]]++]=P);if(x=b===0?(L=ce=m,19):b===1?(L=a,J-=257,ce=o,me-=257,256):(L=l,ce=f,-1),A=d,C=h,te=P=B=0,O=-1,E=(X=1<<(U=Q))-1,b===1&&852<X||b===2&&592<X)return 1;for(;;){for(D=A-te,$=m[P]<x?(T=0,m[P]):m[P]>x?(T=ce[me+m[P]],L[J+m[P]]):(T=96,0),w=1<<A-te,d=S=1<<U;y[C+(B>>te)+(S-=w)]=D<<24|T<<16|$|0,S!==0;);for(w=1<<A-1;B&w;)w>>=1;if(w!==0?(B&=w-1,B+=w):B=0,P++,--V[A]==0){if(A===F)break;A=g[_+m[P]]}if(Q<A&&(B&E)!==O){for(te===0&&(te=Q),C+=d,K=1<<(U=A-te);U+te<F&&!((K-=V[U+te])<=0);)U++,K<<=1;if(X+=1<<U,b===1&&852<X||b===2&&592<X)return 1;y[O=B&E]=Q<<24|U<<16|C-h|0}}return B!==0&&(y[C+B]=A-te<<24|64<<16|0),p.bits=Q,0}},{"../utils/common":41}],51:[function(t,n,i){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,n,i){var r=t("../utils/common"),a=0,o=1;function l(v){for(var I=v.length;0<=--I;)v[I]=0}var f=0,b=29,g=256,_=g+1+b,u=30,y=19,h=2*_+1,m=15,p=16,w=7,S=256,O=16,E=17,C=18,x=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],D=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=new Array(2*(_+2));l(G);var A=new Array(2*u);l(A);var P=new Array(512);l(P);var d=new Array(256);l(d);var F=new Array(b);l(F);var Q,U,te,K=new Array(u);function X(v,I,M,j,N){this.static_tree=v,this.extra_bits=I,this.extra_base=M,this.elems=j,this.max_length=N,this.has_stree=v&&v.length}function B(v,I){this.dyn_tree=v,this.max_code=0,this.stat_desc=I}function L(v){return v<256?P[v]:P[256+(v>>>7)]}function J(v,I){v.pending_buf[v.pending++]=255&I,v.pending_buf[v.pending++]=I>>>8&255}function V(v,I,M){v.bi_valid>p-M?(v.bi_buf|=I<<v.bi_valid&65535,J(v,v.bi_buf),v.bi_buf=I>>p-v.bi_valid,v.bi_valid+=M-p):(v.bi_buf|=I<<v.bi_valid&65535,v.bi_valid+=M)}function Z(v,I,M){V(v,M[2*I],M[2*I+1])}function ce(v,I){for(var M=0;M|=1&v,v>>>=1,M<<=1,0<--I;);return M>>>1}function me(v,I,M){var j,N,W=new Array(m+1),H=0;for(j=1;j<=m;j++)W[j]=H=H+M[j-1]<<1;for(N=0;N<=I;N++){var q=v[2*N+1];q!==0&&(v[2*N]=ce(W[q]++,q))}}function ne(v){var I;for(I=0;I<_;I++)v.dyn_ltree[2*I]=0;for(I=0;I<u;I++)v.dyn_dtree[2*I]=0;for(I=0;I<y;I++)v.bl_tree[2*I]=0;v.dyn_ltree[2*S]=1,v.opt_len=v.static_len=0,v.last_lit=v.matches=0}function ie(v){8<v.bi_valid?J(v,v.bi_buf):0<v.bi_valid&&(v.pending_buf[v.pending++]=v.bi_buf),v.bi_buf=0,v.bi_valid=0}function de(v,I,M,j){var N=2*I,W=2*M;return v[N]<v[W]||v[N]===v[W]&&j[I]<=j[M]}function ue(v,I,M){for(var j=v.heap[M],N=M<<1;N<=v.heap_len&&(N<v.heap_len&&de(I,v.heap[N+1],v.heap[N],v.depth)&&N++,!de(I,j,v.heap[N],v.depth));)v.heap[M]=v.heap[N],M=N,N<<=1;v.heap[M]=j}function Ce(v,I,M){var j,N,W,H,q=0;if(v.last_lit!==0)for(;j=v.pending_buf[v.d_buf+2*q]<<8|v.pending_buf[v.d_buf+2*q+1],N=v.pending_buf[v.l_buf+q],q++,j===0?Z(v,N,I):(Z(v,(W=d[N])+g+1,I),(H=x[W])!==0&&V(v,N-=F[W],H),Z(v,W=L(--j),M),(H=D[W])!==0&&V(v,j-=K[W],H)),q<v.last_lit;);Z(v,S,I)}function Ee(v,I){var M,j,N,W=I.dyn_tree,H=I.stat_desc.static_tree,q=I.stat_desc.has_stree,Y=I.stat_desc.elems,re=-1;for(v.heap_len=0,v.heap_max=h,M=0;M<Y;M++)W[2*M]!==0?(v.heap[++v.heap_len]=re=M,v.depth[M]=0):W[2*M+1]=0;for(;v.heap_len<2;)W[2*(N=v.heap[++v.heap_len]=re<2?++re:0)]=1,v.depth[N]=0,v.opt_len--,q&&(v.static_len-=H[2*N+1]);for(I.max_code=re,M=v.heap_len>>1;1<=M;M--)ue(v,W,M);for(N=Y;M=v.heap[1],v.heap[1]=v.heap[v.heap_len--],ue(v,W,1),j=v.heap[1],v.heap[--v.heap_max]=M,v.heap[--v.heap_max]=j,W[2*N]=W[2*M]+W[2*j],v.depth[N]=(v.depth[M]>=v.depth[j]?v.depth[M]:v.depth[j])+1,W[2*M+1]=W[2*j+1]=N,v.heap[1]=N++,ue(v,W,1),2<=v.heap_len;);v.heap[--v.heap_max]=v.heap[1],function(se,ke){var ct,Ie,ut,he,Pt,dn,Le=ke.dyn_tree,ds=ke.max_code,Ji=ke.stat_desc.static_tree,Xi=ke.stat_desc.has_stree,Qi=ke.stat_desc.extra_bits,ps=ke.stat_desc.extra_base,ht=ke.stat_desc.max_length,Dt=0;for(he=0;he<=m;he++)se.bl_count[he]=0;for(Le[2*se.heap[se.heap_max]+1]=0,ct=se.heap_max+1;ct<h;ct++)ht<(he=Le[2*Le[2*(Ie=se.heap[ct])+1]+1]+1)&&(he=ht,Dt++),Le[2*Ie+1]=he,ds<Ie||(se.bl_count[he]++,Pt=0,ps<=Ie&&(Pt=Qi[Ie-ps]),dn=Le[2*Ie],se.opt_len+=dn*(he+Pt),Xi&&(se.static_len+=dn*(Ji[2*Ie+1]+Pt)));if(Dt!==0){do{for(he=ht-1;se.bl_count[he]===0;)he--;se.bl_count[he]--,se.bl_count[he+1]+=2,se.bl_count[ht]--,Dt-=2}while(0<Dt);for(he=ht;he!==0;he--)for(Ie=se.bl_count[he];Ie!==0;)ds<(ut=se.heap[--ct])||(Le[2*ut+1]!==he&&(se.opt_len+=(he-Le[2*ut+1])*Le[2*ut],Le[2*ut+1]=he),Ie--)}}(v,I),me(W,re,v.bl_count)}function c(v,I,M){var j,N,W=-1,H=I[1],q=0,Y=7,re=4;for(H===0&&(Y=138,re=3),I[2*(M+1)+1]=65535,j=0;j<=M;j++)N=H,H=I[2*(j+1)+1],++q<Y&&N===H||(q<re?v.bl_tree[2*N]+=q:N!==0?(N!==W&&v.bl_tree[2*N]++,v.bl_tree[2*O]++):q<=10?v.bl_tree[2*E]++:v.bl_tree[2*C]++,W=N,re=(q=0)===H?(Y=138,3):N===H?(Y=6,3):(Y=7,4))}function R(v,I,M){var j,N,W=-1,H=I[1],q=0,Y=7,re=4;for(H===0&&(Y=138,re=3),j=0;j<=M;j++)if(N=H,H=I[2*(j+1)+1],!(++q<Y&&N===H)){if(q<re)for(;Z(v,N,v.bl_tree),--q!=0;);else N!==0?(N!==W&&(Z(v,N,v.bl_tree),q--),Z(v,O,v.bl_tree),V(v,q-3,2)):q<=10?(Z(v,E,v.bl_tree),V(v,q-3,3)):(Z(v,C,v.bl_tree),V(v,q-11,7));W=N,re=(q=0)===H?(Y=138,3):N===H?(Y=6,3):(Y=7,4)}}l(K);var z=!1;function k(v,I,M,j){V(v,(f<<1)+(j?1:0),3),function(N,W,H,q){ie(N),q&&(J(N,H),J(N,~H)),r.arraySet(N.pending_buf,N.window,W,H,N.pending),N.pending+=H}(v,I,M,!0)}i._tr_init=function(v){z||(function(){var I,M,j,N,W,H=new Array(m+1);for(N=j=0;N<b-1;N++)for(F[N]=j,I=0;I<1<<x[N];I++)d[j++]=N;for(d[j-1]=N,N=W=0;N<16;N++)for(K[N]=W,I=0;I<1<<D[N];I++)P[W++]=N;for(W>>=7;N<u;N++)for(K[N]=W<<7,I=0;I<1<<D[N]-7;I++)P[256+W++]=N;for(M=0;M<=m;M++)H[M]=0;for(I=0;I<=143;)G[2*I+1]=8,I++,H[8]++;for(;I<=255;)G[2*I+1]=9,I++,H[9]++;for(;I<=279;)G[2*I+1]=7,I++,H[7]++;for(;I<=287;)G[2*I+1]=8,I++,H[8]++;for(me(G,_+1,H),I=0;I<u;I++)A[2*I+1]=5,A[2*I]=ce(I,5);Q=new X(G,x,g+1,_,m),U=new X(A,D,0,u,m),te=new X(new Array(0),T,0,y,w)}(),z=!0),v.l_desc=new B(v.dyn_ltree,Q),v.d_desc=new B(v.dyn_dtree,U),v.bl_desc=new B(v.bl_tree,te),v.bi_buf=0,v.bi_valid=0,ne(v)},i._tr_stored_block=k,i._tr_flush_block=function(v,I,M,j){var N,W,H=0;0<v.level?(v.strm.data_type===2&&(v.strm.data_type=function(q){var Y,re=4093624447;for(Y=0;Y<=31;Y++,re>>>=1)if(1&re&&q.dyn_ltree[2*Y]!==0)return a;if(q.dyn_ltree[18]!==0||q.dyn_ltree[20]!==0||q.dyn_ltree[26]!==0)return o;for(Y=32;Y<g;Y++)if(q.dyn_ltree[2*Y]!==0)return o;return a}(v)),Ee(v,v.l_desc),Ee(v,v.d_desc),H=function(q){var Y;for(c(q,q.dyn_ltree,q.l_desc.max_code),c(q,q.dyn_dtree,q.d_desc.max_code),Ee(q,q.bl_desc),Y=y-1;3<=Y&&q.bl_tree[2*$[Y]+1]===0;Y--);return q.opt_len+=3*(Y+1)+5+5+4,Y}(v),N=v.opt_len+3+7>>>3,(W=v.static_len+3+7>>>3)<=N&&(N=W)):N=W=M+5,M+4<=N&&I!==-1?k(v,I,M,j):v.strategy===4||W===N?(V(v,2+(j?1:0),3),Ce(v,G,A)):(V(v,4+(j?1:0),3),function(q,Y,re,se){var ke;for(V(q,Y-257,5),V(q,re-1,5),V(q,se-4,4),ke=0;ke<se;ke++)V(q,q.bl_tree[2*$[ke]+1],3);R(q,q.dyn_ltree,Y-1),R(q,q.dyn_dtree,re-1)}(v,v.l_desc.max_code+1,v.d_desc.max_code+1,H+1),Ce(v,v.dyn_ltree,v.dyn_dtree)),ne(v),j&&ie(v)},i._tr_tally=function(v,I,M){return v.pending_buf[v.d_buf+2*v.last_lit]=I>>>8&255,v.pending_buf[v.d_buf+2*v.last_lit+1]=255&I,v.pending_buf[v.l_buf+v.last_lit]=255&M,v.last_lit++,I===0?v.dyn_ltree[2*M]++:(v.matches++,I--,v.dyn_ltree[2*(d[M]+g+1)]++,v.dyn_dtree[2*L(I)]++),v.last_lit===v.lit_bufsize-1},i._tr_align=function(v){V(v,2,3),Z(v,S,G),function(I){I.bi_valid===16?(J(I,I.bi_buf),I.bi_buf=0,I.bi_valid=0):8<=I.bi_valid&&(I.pending_buf[I.pending++]=255&I.bi_buf,I.bi_buf>>=8,I.bi_valid-=8)}(v)}},{"../utils/common":41}],53:[function(t,n,i){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,n,i){(function(r){(function(a,o){if(!a.setImmediate){var l,f,b,g,_=1,u={},y=!1,h=a.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(a);m=m&&m.setTimeout?m:a,l={}.toString.call(a.process)==="[object process]"?function(O){process.nextTick(function(){w(O)})}:function(){if(a.postMessage&&!a.importScripts){var O=!0,E=a.onmessage;return a.onmessage=function(){O=!1},a.postMessage("","*"),a.onmessage=E,O}}()?(g="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",S,!1):a.attachEvent("onmessage",S),function(O){a.postMessage(g+O,"*")}):a.MessageChannel?((b=new MessageChannel).port1.onmessage=function(O){w(O.data)},function(O){b.port2.postMessage(O)}):h&&"onreadystatechange"in h.createElement("script")?(f=h.documentElement,function(O){var E=h.createElement("script");E.onreadystatechange=function(){w(O),E.onreadystatechange=null,f.removeChild(E),E=null},f.appendChild(E)}):function(O){setTimeout(w,0,O)},m.setImmediate=function(O){typeof O!="function"&&(O=new Function(""+O));for(var E=new Array(arguments.length-1),C=0;C<E.length;C++)E[C]=arguments[C+1];var x={callback:O,args:E};return u[_]=x,l(_),_++},m.clearImmediate=p}function p(O){delete u[O]}function w(O){if(y)setTimeout(w,0,O);else{var E=u[O];if(E){y=!0;try{(function(C){var x=C.callback,D=C.args;switch(D.length){case 0:x();break;case 1:x(D[0]);break;case 2:x(D[0],D[1]);break;case 3:x(D[0],D[1],D[2]);break;default:x.apply(o,D)}})(E)}finally{p(O),y=!1}}}}function S(O){O.source===a&&typeof O.data=="string"&&O.data.indexOf(g)===0&&w(+O.data.slice(g.length))}})(typeof self=="undefined"?r===void 0?this:r:self)}).call(this,typeof Bt!="undefined"?Bt:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[10])(10)})})(us);var Ki=us.exports;function hs(s){return fetch(s).then(e=>e.ok?e.blob():Promise.reject(e.status)).then(e=>e.text())}class fs{ready(e){throw new Error("Method not implemented.")}close(e){throw new Error("Method not implemented.")}}class Wi extends fs{constructor(e){super(),this._baseUrl=e}href(e){return`${this._baseUrl}/${e}`}get(e){return hs(this.href(e))}ready(e){e&&e()}close(e){e&&e(null)}}class qi extends fs{constructor(e){super(),this._zip=void 0,this._isClosed=!1,this._task=hs(e).then(Ki.loadAsync).then(t=>{this._isClosed||(this._zip=t,this._task=void 0,this._notifyReady())})}href(e){return e}get(e){return new Promise((t,n)=>{if(this._zip===void 0){n(void 0);return}const i=this._zip.file(e);if(!i){n(void 0);return}i.async("string").then(r=>{t(r)}).catch(n)})}ready(e){this._readyCallback=e,this._task===void 0&&this._notifyReady()}_notifyReady(){this._readyCallback!==void 0&&this._readyCallback()}close(e){this._isClosed=!0,this._task=void 0,this._zip=void 0,e!==void 0&&e(null)}}const Zi="0.1.0-alpha.27",Gi="0.1.0-alpha.23",Vi={inputController:()=>new Ui,fileServer:s=>new Wi(s),zipServer:s=>new qi(s)};function Hi(){return os()}function Yi(s,e){return ji(Vi,s,e)}Oe.GAME_SDK_VERSION=Zi,Oe.PLAYER_SDK_VERSION=zi,Oe.VERSION=Gi,Oe.defaultOptions=Hi,Oe.init=Yi,Object.defineProperties(Oe,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
